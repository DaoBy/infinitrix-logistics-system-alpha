import{E as $}from"./EmployeeLayout-HD3iRf9t.js";import{g as z,I as T,d as g,o as d,w as r,b as e,c as i,e as o,a as n,t as s,f as l,ah as G,a8 as H,a9 as J,aa as K,ab as Q,ai as X,u as Y,P as Z,W as I}from"./app-Xu1-QTPS.js";import{D as E}from"./DangerButton-B9GvHwCg.js";import{_ as ee}from"./SecondaryButton-B4_LijSy.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./NavLink-Dma88ZBl.js";const te={class:"flex justify-between items-center px-6"},ae={class:"flex space-x-2"},se={class:"px-2 md:px-6 py-4 max-w-5xl mx-auto"},re={class:"bg-white dark:bg-gray-800 shadow-sm rounded-lg border border-gray-200 dark:border-gray-700 mb-6"},de={class:"flex flex-col md:flex-row md:items-center md:justify-between p-4 bg-indigo-50 dark:bg-indigo-900 border-b border-gray-200 dark:border-gray-700"},ne={class:"flex items-center gap-2"},ie={class:"text-lg font-bold text-indigo-900 dark:text-indigo-100 tracking-wide"},oe={class:"mt-1 text-xs text-gray-500 dark:text-gray-300"},le={key:0},me={class:"mt-3 md:mt-0 flex items-center gap-2"},ye={class:"font-medium text-gray-900 dark:text-gray-100"},ue={class:"p-4 md:p-6"},ge={class:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6"},ce={class:"bg-gray-50 dark:bg-gray-700/50 p-3 md:p-4 rounded-lg flex flex-col gap-1"},xe={class:"font-medium truncate"},be={class:"text-xs text-gray-600 dark:text-gray-400 truncate"},fe={class:"text-xs text-gray-600 dark:text-gray-400 truncate"},pe={class:"bg-gray-50 dark:bg-gray-700/50 p-3 md:p-4 rounded-lg flex flex-col gap-1"},ve={class:"font-medium truncate"},ke={class:"text-xs text-gray-600 dark:text-gray-400 truncate"},we={class:"text-xs text-gray-600 dark:text-gray-400 truncate"},he={class:"bg-white dark:bg-gray-800 shadow-sm rounded-lg border border-gray-200 dark:border-gray-700 mb-6"},_e={class:"p-4 md:p-6"},je={class:"space-y-4"},De={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ce={class:"flex justify-between mb-2"},Ve={class:"capitalize font-medium"},qe={class:"flex justify-between mb-2"},Ne={class:"font-medium"},Ae={class:"flex justify-between mb-2"},Pe={key:0,class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-semibold bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100"},Se={key:1,class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-semibold bg-yellow-100 text-yellow-800 dark:bg-yellow-800 dark:text-yellow-100"},Be={class:"flex justify-between mb-2"},Re={class:"flex justify-between mb-2"},Te={key:0,class:"flex justify-between mb-2"},Ie={key:0},Ee=["src"],Le={key:0},Ue={class:"bg-gray-50 dark:bg-gray-700/50 p-4 rounded"},Fe={class:"whitespace-pre-line text-gray-900 dark:text-gray-100"},Me={key:0,class:"bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-700 rounded-lg p-4 mb-6"},Oe={class:"flex items-center"},We={class:"flex-1"},$e={key:0,class:"mt-2 p-3 bg-red-100 dark:bg-red-800/50 rounded"},ze={class:"text-red-700 dark:text-red-300"},Ge={class:"mt-3 flex items-center gap-4 text-sm text-red-700 dark:text-red-300"},Ze={__name:"Show",props:{payment:Object},setup(a){const u=a,y=z(!1),L=()=>{y.value=!0},U=()=>{I.visit(route("collector.payments.resubmit",{delivery:u.payment.delivery_request_id,payment:u.payment.id}))},F=()=>{I.delete(route("collector.payments.destroy",u.payment.id),{onSuccess:()=>{y.value=!1}})};function M(m){if(!m)return"N/A";try{return new Date(m).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"Invalid date"}}function c(m){if(!m)return"N/A";try{return new Date(m).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Invalid date"}}return(m,t)=>{const O=T("ExclamationTriangleIcon"),W=T("PrimaryButton");return d(),g($,null,{header:r(()=>[e("div",te,[t[4]||(t[4]=e("h2",{class:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200"}," Payment Details ",-1)),e("div",ae,[a.payment.verified_by?o("",!0):(d(),g(E,{key:0,onClick:L,class:"!px-4 !py-2 !text-xs"},{default:r(()=>t[2]||(t[2]=[l(" Delete ")])),_:1})),n(Y(Z),{href:m.route("collector.payments.index"),class:"inline-flex items-center text-sm text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-200"},{default:r(()=>t[3]||(t[3]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),l(" Back to collections ")])),_:1},8,["href"])])])]),default:r(()=>{var x,b,f,p,v,k,w,h,_,j,D,C,V,q,N,A,P,S,B;return[e("div",se,[e("div",re,[e("div",de,[e("div",null,[e("div",ne,[t[5]||(t[5]=e("span",{class:"inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-indigo-100 text-indigo-800 dark:bg-indigo-800 dark:text-indigo-100"}," Reference # ",-1)),e("span",ie,s(((x=a.payment.delivery_request)==null?void 0:x.reference_number)||"DR-"+String(a.payment.delivery_request_id).padStart(6,"0")),1)]),e("div",oe,[l(" Delivery ID: DO-"+s(String(a.payment.delivery_request_id).padStart(6,"0"))+" ",1),(b=a.payment.delivery_request)!=null&&b.created_at?(d(),i("span",le," | Created: "+s(M(a.payment.delivery_request.created_at)),1)):o("",!0)])]),e("div",me,[e("span",ye," ₱"+s(((f=a.payment.delivery_request)==null?void 0:f.total_price)!==void 0&&((p=a.payment.delivery_request)==null?void 0:p.total_price)!==null?Number(a.payment.delivery_request.total_price).toFixed(2):"0.00"),1),t[6]||(t[6]=e("span",{class:"text-xs text-gray-500 dark:text-gray-300"},"Total Amount",-1))])]),e("div",ue,[e("div",ge,[e("div",ce,[t[7]||(t[7]=e("h3",{class:"text-base font-medium text-gray-900 dark:text-gray-100 mb-2"},"Sender",-1)),e("p",xe,s(((k=(v=a.payment.delivery_request)==null?void 0:v.sender)==null?void 0:k.name)||"N/A"),1),e("p",be,s(((h=(w=a.payment.delivery_request)==null?void 0:w.sender)==null?void 0:h.email)||""),1),e("p",fe,s(((j=(_=a.payment.delivery_request)==null?void 0:_.sender)==null?void 0:j.mobile)||""),1)]),e("div",pe,[t[8]||(t[8]=e("h3",{class:"text-base font-medium text-gray-900 dark:text-gray-100 mb-2"},"Receiver",-1)),e("p",ve,s(((C=(D=a.payment.delivery_request)==null?void 0:D.receiver)==null?void 0:C.name)||"N/A"),1),e("p",ke,s(((q=(V=a.payment.delivery_request)==null?void 0:V.receiver)==null?void 0:q.email)||""),1),e("p",we,s(((A=(N=a.payment.delivery_request)==null?void 0:N.receiver)==null?void 0:A.mobile)||""),1)])])])]),e("div",he,[t[17]||(t[17]=e("div",{class:"p-3 md:p-4 bg-gray-50 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-700"},[e("h3",{class:"font-medium text-gray-900 dark:text-gray-100"}," Collection Details ")],-1)),e("div",_e,[e("div",je,[e("div",De,[e("div",null,[e("div",Ce,[t[9]||(t[9]=e("span",{class:"text-gray-600 dark:text-gray-400"},"Payment Method:",-1)),e("span",Ve,s(a.payment.method),1)]),e("div",qe,[t[10]||(t[10]=e("span",{class:"text-gray-600 dark:text-gray-400"},"Amount Collected:",-1)),e("span",Ne,"₱"+s(Number(a.payment.amount).toFixed(2)),1)]),e("div",Ae,[t[11]||(t[11]=e("span",{class:"text-gray-600 dark:text-gray-400"},"Status:",-1)),e("span",null,[a.payment.verified_by?(d(),i("span",Pe,"Verified")):(d(),i("span",Se,"Pending Verification"))])]),e("div",Be,[t[12]||(t[12]=e("span",{class:"text-gray-600 dark:text-gray-400"},"Collected By:",-1)),e("span",null,s(((P=a.payment.collected_by)==null?void 0:P.name)||"N/A"),1)]),e("div",Re,[t[13]||(t[13]=e("span",{class:"text-gray-600 dark:text-gray-400"},"Collected At:",-1)),e("span",null,s(a.payment.collected_at?c(a.payment.collected_at):"N/A"),1)]),a.payment.verified_by?(d(),i("div",Te,[t[14]||(t[14]=e("span",{class:"text-gray-600 dark:text-gray-400"},"Verified By:",-1)),e("span",null,s(((S=a.payment.verified_by)==null?void 0:S.name)||"N/A"),1)])):o("",!0)]),a.payment.receipt_image?(d(),i("div",Ie,[e("div",null,[t[15]||(t[15]=e("span",{class:"block text-gray-600 dark:text-gray-400 mb-1"},"Receipt:",-1)),e("img",{src:"/storage/"+a.payment.receipt_image,alt:"Payment receipt",class:"max-w-full h-auto rounded border border-gray-200 dark:border-gray-700"},null,8,Ee)])])):o("",!0)]),a.payment.notes?(d(),i("div",Le,[t[16]||(t[16]=e("span",{class:"block text-gray-600 dark:text-gray-400 mb-1"},"Notes:",-1)),e("div",Ue,[e("p",Fe,s(a.payment.notes),1)])])):o("",!0)])])])]),a.payment.rejected_by?(d(),i("div",Me,[e("div",Oe,[n(O,{class:"h-5 w-5 text-red-400 mr-2"}),e("div",We,[t[20]||(t[20]=e("h3",{class:"text-lg font-medium text-red-800 dark:text-red-200"},"Payment Rejected",-1)),t[21]||(t[21]=e("p",{class:"text-red-700 dark:text-red-300"}," This payment was rejected and needs to be resubmitted. ",-1)),a.payment.rejection_reason?(d(),i("div",$e,[t[18]||(t[18]=e("p",{class:"text-sm font-medium text-red-800 dark:text-red-200"},"Rejection Reason:",-1)),e("p",ze,s(a.payment.rejection_reason),1)])):o("",!0),e("div",Ge,[e("span",null,"Rejected by: "+s((B=a.payment.rejected_by)==null?void 0:B.name),1),t[19]||(t[19]=e("span",null,"|",-1)),e("span",null,"Rejected at: "+s(c(a.payment.rejected_at)),1)])]),!a.payment.verified_by&&a.payment.rejected_by?(d(),g(W,{key:0,onClick:U,class:"bg-orange-600 hover:bg-orange-700"},{default:r(()=>t[22]||(t[22]=[l(" Resubmit Payment ")])),_:1})):o("",!0)])])):o("",!0),n(G,{modelValue:y.value,"onUpdate:modelValue":t[1]||(t[1]=R=>y.value=R),"max-width":"500"},{default:r(()=>[n(H,null,{default:r(()=>[n(J,null,{default:r(()=>t[23]||(t[23]=[l("Confirm Deletion")])),_:1}),n(K,null,{default:r(()=>t[24]||(t[24]=[l(" Are you sure you want to delete this payment record? This action cannot be undone. ")])),_:1}),n(Q,null,{default:r(()=>[n(X),n(ee,{type:"button",onClick:t[0]||(t[0]=R=>y.value=!1)},{default:r(()=>t[25]||(t[25]=[l(" Cancel ")])),_:1}),n(E,{type:"button",onClick:F},{default:r(()=>t[26]||(t[26]=[l(" Delete ")])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]}),_:1})}}};export{Ze as default};
