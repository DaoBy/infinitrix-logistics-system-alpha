import{g as _,i as x,h as z,W as b,d as E,o as v,w as l,b as s,c as f,e as g,t as r,a as i,f as d,k as D,n as I}from"./app-SYI-8bdC.js";import{E as W}from"./EmployeeLayout-B8SQYBgj.js";import{_ as G}from"./PrimaryButton-CBiTPJhk.js";import{_ as Y}from"./SecondaryButton-BS-rbRq0.js";import{D as H}from"./DangerButton-CNs3xLhr.js";import{P as J}from"./Pagination-DOkO8BU-.js";import{_ as K}from"./SearchInput-CAeLERWr.js";import{S as k}from"./SelectInput-DbD3HIzo.js";import{_ as Q}from"./DataTable-CWybtFnL.js";import{_ as X}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./NavLink-D6cPZaLM.js";const Z={class:"flex justify-between items-center w-full px-6 md:px-8"},ee={class:"flex gap-2"},te={class:"zoom-content"},ae={class:"px-6 py-4"},se={key:0,class:"mb-6"},le={key:0,class:"p-4 bg-blue-100 text-blue-800 rounded"},re={key:1,class:"p-4 bg-green-100 text-green-800 rounded"},oe={key:2,class:"p-4 bg-red-100 text-red-800 rounded"},ne={class:"mb-6 flex flex-col md:flex-row justify-between items-start md:items-center gap-4"},ie={class:"flex flex-wrap gap-2 w-full md:w-auto"},de={class:"bg-white shadow-sm sm:rounded-lg"},ue={class:"p-4 bg-white border-b border-gray-200"},pe={class:"font-mono text-sm text-gray-600"},ce={class:"flex items-center"},me={class:"text-gray-700"},ve={class:"flex items-center"},_e={class:"text-gray-700"},fe={class:"capitalize"},ge={class:"flex space-x-2"},ye={class:"mt-4 flex justify-center"},he={__name:"ApprovedRequest",props:{deliveries:{type:Array,required:!0,default:()=>[]},pagination:{type:Object,default:()=>({current_page:1,last_page:1,links:[]})},filters:{type:Object,default:()=>({search:"",payment_method:"",payment_type:"",date_range:"all"})},status:String,success:String,error:String},setup(o){const u=o,n=_(u.filters.search||""),c=_(u.filters.payment_method||""),m=_(u.filters.payment_type||""),y=_(u.filters.date_range||"all"),p=_("approved_at"),h=_("desc"),w=x(()=>{var t;return Number((t=u.pagination)==null?void 0:t.current_page)||1}),A=x(()=>{var t;return Number((t=u.pagination)==null?void 0:t.last_page)||1}),R=x(()=>{var t;return{current_page:w.value,last_page:A.value,links:((t=u.pagination)==null?void 0:t.links)||[]}}),N=[{value:"",text:"All Payment Types"},{value:"prepaid",text:"Prepaid"},{value:"postpaid",text:"Postpaid"}],q=[{value:"",text:"All Methods"},{value:"cash",text:"Cash"},{value:"gcash",text:"GCash"},{value:"bank",text:"Bank Transfer"}],T=[{value:"all",text:"All Time"},{value:"today",text:"Today"},{value:"week",text:"This Week"},{value:"month",text:"This Month"},{value:"year",text:"This Year"}],j=[{field:"id",header:"Request ID",sortable:!0},{field:"sender",header:"Sender",sortable:!0},{field:"receiver",header:"Receiver",sortable:!0},{field:"pick_up_region",header:"Pick-up",sortable:!0},{field:"drop_off_region",header:"Drop-off",sortable:!0},{field:"status",header:"Status",sortable:!0},{field:"total_price",header:"Amount",sortable:!0},{field:"payment_method",header:"Payment Method",sortable:!0},{field:"payment_type",header:"Payment Type",sortable:!0},{field:"created_at",header:"Request Date",sortable:!0},{field:"approved_at",header:"Approved At",sortable:!0},{field:"approved_by",header:"Approved By",sortable:!0},{field:"actions",header:"Actions",sortable:!1}];function B(t){switch(t){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}}const S=x(()=>(u.deliveries||[]).map(t=>({...t,payment_type:t.payment_type??(["cash","gcash","bank"].includes(t.payment_method)?"prepaid":"postpaid")}))),L=x(()=>S.value?S.value.filter(t=>{var P,V;const a=n.value===""||((P=t.sender)==null?void 0:P.toLowerCase().includes(n.value.toLowerCase()))||((V=t.receiver)==null?void 0:V.toLowerCase().includes(n.value.toLowerCase()))||t.id.toString().includes(n.value),e=c.value===""||t.payment_method===c.value,C=m.value===""||t.payment_type===m.value;return a&&e&&C}).sort((t,a)=>{if(!p.value)return 0;const e=h.value==="asc"?1:-1;return t[p.value]<a[p.value]?-1*e:t[p.value]>a[p.value]?1*e:0}):[]);z([n,c,y,m],()=>{b.get(route("deliveries.index"),{search:n.value,payment_method:c.value,payment_type:m.value,date_range:y.value,page:1},{preserveState:!0,replace:!0})});function F(t){p.value===t?h.value=h.value==="asc"?"desc":"asc":(p.value=t,h.value="asc")}function M(t){b.get(route("deliveries.index"),{page:t,search:n.value,payment_method:c.value,payment_type:m.value,date_range:y.value},{preserveState:!0})}function U(t){b.get(route("deliveries.show",t))}function O(){b.get(route("deliveries.pending"))}function $(){b.get(route("deliveries.rejected"))}return(t,a)=>(v(),E(W,null,{header:l(()=>[s("div",Z,[a[6]||(a[6]=s("div",null,[s("h2",{class:"text-xl font-semibold leading-tight text-gray-800"},"Approved Delivery Requests"),s("p",{class:"mt-1 text-sm text-gray-500"}," Review and manage approved delivery requests ")],-1)),s("div",ee,[i(G,{onClick:O},{default:l(()=>a[4]||(a[4]=[d(" Pending Requests ")])),_:1}),i(H,{onClick:$},{default:l(()=>a[5]||(a[5]=[d(" Rejected Requests ")])),_:1})])])]),default:l(()=>[s("div",te,[s("div",ae,[o.status||o.success||o.error?(v(),f("div",se,[o.status?(v(),f("div",le,r(o.status),1)):g("",!0),o.success?(v(),f("div",re,r(o.success),1)):g("",!0),o.error?(v(),f("div",oe,r(o.error),1)):g("",!0)])):g("",!0),s("div",ne,[i(K,{modelValue:n.value,"onUpdate:modelValue":a[0]||(a[0]=e=>n.value=e),placeholder:"Search requests...",class:"w-full max-w-md"},null,8,["modelValue"]),s("div",ie,[i(k,{modelValue:m.value,"onUpdate:modelValue":a[1]||(a[1]=e=>m.value=e),options:N,"option-value":"value","option-label":"text",placeholder:"All Payment Types",class:"w-full md:w-48"},null,8,["modelValue"]),i(k,{modelValue:c.value,"onUpdate:modelValue":a[2]||(a[2]=e=>c.value=e),options:q,"option-value":"value","option-label":"text",placeholder:"All Payment Methods",class:"w-full md:w-48"},null,8,["modelValue"]),i(k,{modelValue:y.value,"onUpdate:modelValue":a[3]||(a[3]=e=>y.value=e),options:T,"option-value":"value","option-label":"text",placeholder:"Filter by date",class:"w-full md:w-48"},null,8,["modelValue"])])]),s("div",de,[s("div",ue,[i(Q,{columns:j,data:L.value,"sort-field":p.value,"sort-direction":h.value,onSort:F,class:"w-full"},{id:l(({row:e})=>[s("span",pe,"DR-"+r(String(e.id).padStart(6,"0")),1)]),status:l(({row:e})=>[s("span",{class:I([B(e.status),"px-2 inline-flex text-xs leading-5 font-semibold rounded-full"])},r(e.status.charAt(0).toUpperCase()+e.status.slice(1)),3)]),sender:l(({row:e})=>[d(r(e.sender||"N/A"),1)]),receiver:l(({row:e})=>[d(r(e.receiver||"N/A"),1)]),pick_up_region:l(({row:e})=>[s("div",ce,[e.pick_up_region&&e.pick_up_region_color?(v(),f("div",{key:0,class:"w-3 h-3 rounded-full mr-2 border border-gray-300",style:D({backgroundColor:e.pick_up_region_color})},null,4)):g("",!0),s("span",me,r(e.pick_up_region||"N/A"),1)])]),drop_off_region:l(({row:e})=>[s("div",ve,[e.drop_off_region&&e.drop_off_region_color?(v(),f("div",{key:0,class:"w-3 h-3 rounded-full mr-2 border border-gray-300",style:D({backgroundColor:e.drop_off_region_color})},null,4)):g("",!0),s("span",_e,r(e.drop_off_region||"N/A"),1)])]),total_price:l(({row:e})=>[d(" â‚±"+r(e.total_price||"0.00"),1)]),payment_method:l(({row:e})=>[s("span",fe,r(e.payment_method||"N/A"),1)]),payment_type:l(({row:e})=>[d(r(e.payment_type?e.payment_type.charAt(0).toUpperCase()+e.payment_type.slice(1):"N/A"),1)]),created_at:l(({row:e})=>[d(r(e.created_at?new Date(e.created_at).toLocaleDateString():"N/A"),1)]),approved_at:l(({row:e})=>[d(r(e.approved_at?new Date(e.approved_at).toLocaleDateString():"N/A"),1)]),actions:l(({row:e})=>[s("div",ge,[i(Y,{onClick:C=>U(e.id)},{default:l(()=>a[7]||(a[7]=[d(" View ")])),_:2},1032,["onClick"])])]),_:1},8,["data","sort-field","sort-direction"])])]),s("div",ye,[i(J,{"current-page":w.value,"total-pages":A.value,pagination:R.value,onPageChanged:M},null,8,["current-page","total-pages","pagination"])])])])]),_:1}))}},Ne=X(he,[["__scopeId","data-v-74432a3f"]]);export{Ne as default};
