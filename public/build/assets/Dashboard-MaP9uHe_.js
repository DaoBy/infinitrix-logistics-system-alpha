import{g as T,p as Ve,i as P,h as Me,C as Ae,d as V,o as r,w as v,b as e,a as d,c as n,e as m,n as D,f as y,t as o,q as qe,F as j,r as q,u as g,s as Ne,W as S}from"./app-B0MxlU5m.js";import{E as Te}from"./EmployeeLayout-CfA_UWXy.js";import{_ as De}from"./SearchInput-SbslQi-L.js";import{S as M}from"./SelectInput-DDrWxS1C.js";import{_ as A}from"./SecondaryButton-BRyA478y.js";import{_ as Oe}from"./PrimaryButton-Cvq5q4eC.js";import{_ as L}from"./StatusBadge-XOuJzwf9.js";import{M as Be}from"./Modal-DzMlMPRl.js";import{_ as Z}from"./TextArea-DYBBFGZR.js";import{_ as ze}from"./InputError-CNetEjNY.js";import{D as ee}from"./DangerButton-CMc3f1cK.js";import{P as O}from"./Pagination-CstvEeg9.js";import{r as U}from"./CheckCircleIcon-x9FVXLx9.js";import{r as $e}from"./ArchiveBoxIcon-uznr-PM5.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./NavLink-RNmN4-k9.js";const Fe={class:"py-6 px-2 md:px-6"},Le={class:"bg-white shadow-sm rounded-lg border border-gray-200 mb-6 max-w-screen-xl mx-auto"},Ue={class:"border-b border-gray-200"},Ee={class:"-mb-px flex space-x-8 px-6"},He={class:"ml-2 bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs font-medium"},Ie={class:"ml-2 bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs font-medium"},Ge={class:"ml-2 bg-purple-100 text-purple-800 px-2 py-1 rounded-full text-xs font-medium"},Ke={class:"p-4 border-b border-gray-200"},We={class:"flex flex-col lg:flex-row gap-4"},Qe={class:"flex-1"},Je={class:"flex items-center gap-2"},Xe={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mt-4"},Ye={class:"flex justify-between items-center mt-4"},Ze={class:"text-sm text-gray-500"},et={key:0,class:"ml-2"},tt={key:1,class:"ml-2"},st={key:2,class:"ml-2"},at={key:3,class:"ml-2"},ot={key:4,class:"ml-2"},it={key:5,class:"ml-2"},rt={key:0},nt={class:"bg-white shadow-sm rounded-lg overflow-hidden border border-gray-200 max-w-screen-xl mx-auto"},lt={class:"overflow-x-auto"},dt={class:"min-w-full divide-y divide-gray-200"},ct={class:"bg-white divide-y divide-gray-200"},ut={class:"px-6 py-4 whitespace-nowrap"},pt={class:"text-sm font-medium text-gray-900"},mt={class:"text-sm text-gray-500 capitalize"},yt={key:0},xt={class:"px-6 py-4 whitespace-nowrap"},ft={class:"text-sm font-medium text-gray-900"},vt={class:"text-sm text-gray-500"},gt={class:"px-6 py-4 whitespace-nowrap"},ht={class:"text-sm text-gray-900 capitalize"},_t={class:"text-sm text-gray-500"},bt={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},wt={class:"flex justify-end space-x-2"},kt={key:0,class:"text-center py-12"},Ct={key:1},jt={key:0,class:"bg-white shadow-sm rounded-lg overflow-hidden border border-gray-200 max-w-screen-xl mx-auto mb-6"},Pt={class:"px-4 py-5 sm:px-6 border-b border-gray-200"},St={class:"flex justify-between items-center"},Rt={class:"text-sm text-gray-500"},Vt={class:"overflow-x-auto"},Mt={class:"min-w-full divide-y divide-gray-200"},At={class:"bg-white divide-y divide-gray-200"},qt={class:"px-6 py-4 whitespace-nowrap"},Nt={class:"text-sm font-medium text-gray-900"},Tt={class:"text-sm text-gray-500"},Dt={class:"px-6 py-4 whitespace-nowrap"},Ot={class:"text-sm font-medium text-gray-900 capitalize"},Bt={class:"text-sm text-gray-500"},zt={class:"px-6 py-4 whitespace-nowrap"},$t={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},Ft={key:0,class:"text-center py-12"},Lt={key:1,class:"bg-white shadow-sm rounded-lg overflow-hidden border border-gray-200 max-w-screen-xl mx-auto"},Ut={class:"px-4 py-5 sm:px-6 border-b border-gray-200"},Et={class:"flex justify-between items-center"},Ht={class:"text-sm text-gray-500"},It={class:"overflow-x-auto"},Gt={class:"min-w-full divide-y divide-gray-200"},Kt={class:"bg-white divide-y divide-gray-200"},Wt={class:"px-6 py-4 whitespace-nowrap"},Qt={class:"text-sm font-medium text-gray-900"},Jt={class:"text-sm text-gray-500"},Xt={class:"px-6 py-4 whitespace-nowrap"},Yt={class:"text-sm font-medium text-gray-900"},Zt={class:"px-6 py-4 whitespace-nowrap"},es={class:"text-sm text-gray-900"},ts={class:"text-sm text-gray-500"},ss={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},as={key:1,class:"text-xs text-gray-500"},os={key:0,class:"text-center py-12"},is={key:2},rs={class:"bg-white shadow-sm rounded-lg overflow-hidden border border-gray-200 max-w-screen-xl mx-auto"},ns={class:"overflow-x-auto"},ls={class:"min-w-full divide-y divide-gray-200"},ds={class:"bg-white divide-y divide-gray-200"},cs={class:"px-6 py-4 whitespace-nowrap"},us={class:"text-sm font-medium text-gray-900"},ps={class:"text-sm text-gray-500"},ms={class:"px-6 py-4 whitespace-nowrap"},ys={class:"text-sm text-gray-900 capitalize"},xs={class:"text-sm text-gray-500"},fs={class:"px-6 py-4 whitespace-nowrap"},vs={class:"text-sm text-gray-500 mt-1"},gs={class:"px-6 py-4 whitespace-nowrap"},hs={class:"text-sm text-gray-900"},_s={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},bs={key:0,class:"text-center py-12"},ws={class:"p-4"},ks={class:"bg-gray-50 rounded-md p-3 mb-4"},Cs={class:"grid grid-cols-2 gap-2 text-xs"},js={class:"font-medium truncate"},Ps={class:"font-medium truncate"},Ss={class:"font-medium"},Rs={class:"font-medium capitalize"},Vs={class:"grid grid-cols-2 gap-1 mb-2"},Ms=["onClick"],As={class:"flex justify-end space-x-2 border-t border-gray-200 pt-3"},Ws={__name:"Dashboard",props:{activeTab:{type:String,default:"verification"},verificationPayments:{type:Object,default:()=>({data:[],meta:{}})},prepaidRequests:{type:Object,default:()=>({data:[],meta:{}})},postpaidRequests:{type:Object,default:()=>({data:[],meta:{}})},historyPayments:{type:Object,default:()=>({data:[],meta:{}})},stats:{type:Object,default:()=>({})},filters:{type:Object,default:()=>({})}},setup(l){var G,K,W,Q,J,X,Y;const p=l,u=T(p.activeTab),B=T(!1),C=T(null),i=Ve({search:((G=p.filters)==null?void 0:G.search)||"",payment_method:((K=p.filters)==null?void 0:K.payment_method)||"",payment_source:((W=p.filters)==null?void 0:W.payment_source)||"",collection_type:((Q=p.filters)==null?void 0:Q.collection_type)||"all",payment_status:((J=p.filters)==null?void 0:J.payment_status)||"",history_status:((X=p.filters)==null?void 0:X.history_status)||"",verified_by:((Y=p.filters)==null?void 0:Y.verified_by)||""}),te=P(()=>[{value:"",label:"All Methods"},{value:"cash",label:"Cash"},{value:"gcash",label:"GCash"},{value:"bank",label:"Bank Transfer"}]),se=P(()=>[{value:"",label:"All Sources"},{value:"online",label:"Online"},{value:"branch_staff",label:"Branch Staff"},{value:"collector",label:"Collector"}]),ae=P(()=>[{value:"all",label:"All Types"},{value:"prepaid",label:"Prepaid Deliveries"},{value:"postpaid",label:"Postpaid Deliveries"}]),oe=P(()=>[{value:"",label:"All Statuses"},{value:"unpaid",label:"Unpaid"},{value:"pending",label:"Pending"}]),ie=P(()=>[{value:"",label:"All History"},{value:"verified",label:"Verified"},{value:"rejected",label:"Rejected"}]),re=P(()=>[{value:"",label:"All Verifiers"},{value:"system",label:"System"},{value:"staff",label:"Staff"}]),ne=P(()=>{switch(u.value){case"verification":return"Search by reference, customer, or amount...";case"collection":return"Search by reference, sender, or amount...";case"history":return"Search by reference, customer, or amount...";default:return"Search..."}});Me(()=>p.historyPayments.meta,a=>{console.log("History Payments Meta:",a)},{immediate:!0});const le=T([{value:"insufficient_funds",label:"Insufficient funds"},{value:"invalid_reference",label:"Invalid reference number"},{value:"suspected_fraud",label:"Suspected fraud"},{value:"poor_quality",label:"Unclear proof of payment"},{value:"duplicate_payment",label:"Duplicate payment"},{value:"expired_receipt",label:"Expired receipt"},{value:"other",label:"Other reason"}]),x=Ae({rejection_reason:"",internal_notes:""});function de(a){x.rejection_reason=a}function ce(){switch(u.value){case"verification":return p.verificationPayments.data.length;case"collection":return i.collection_type==="prepaid"?p.prepaidRequests.data.length:i.collection_type==="postpaid"?p.postpaidRequests.data.length:p.prepaidRequests.data.length+p.postpaidRequests.data.length;case"history":return p.historyPayments.data.length;default:return 0}}function ue(){switch(u.value){case"verification":return"payments";case"collection":return i.collection_type==="prepaid"?"prepaid deliveries":i.collection_type==="postpaid"?"postpaid deliveries":"deliveries";case"history":return"payments";default:return"items"}}function z(a){u.value=a,Object.keys(i).forEach(t=>{t!=="collection_type"&&(i[t]="")}),i.collection_type="all",w()}function w(){const a={tab:u.value,...i};Object.keys(a).forEach(t=>{(a[t]===""||a[t]===null)&&delete a[t]}),S.visit(route("staff.payments.dashboard"),{data:a,preserveState:!0,preserveScroll:!0,replace:!0})}function pe(){w()}let E=null;function me(){clearTimeout(E),E=setTimeout(()=>{w()},500)}function ye(){Object.keys(i).forEach(a=>{i[a]=""}),i.collection_type="all",w()}function xe(){S.reload({only:["verificationPayments","prepaidRequests","postpaidRequests","historyPayments","stats"],preserveScroll:!0})}function N(a,t){if(a>=1&&a<=fe(t)){const s={tab:u.value,...i};t==="verification"?s.verification_page=a:t==="prepaid"?s.prepaid_page=a:t==="postpaid"?s.postpaid_page=a:t==="history"&&(s.history_page=a),Object.keys(s).forEach(c=>{(s[c]===""||s[c]===null)&&delete s[c]}),S.visit(route("staff.payments.dashboard"),{data:s,preserveState:!0,preserveScroll:!0})}}function fe(a){var t,s,c,f;switch(a){case"verification":return((t=p.verificationPayments.meta)==null?void 0:t.last_page)||1;case"prepaid":return((s=p.prepaidRequests.meta)==null?void 0:s.last_page)||1;case"postpaid":return((c=p.postpaidRequests.meta)==null?void 0:c.last_page)||1;case"history":return((f=p.historyPayments.meta)==null?void 0:f.last_page)||1;default:return 1}}function $(){B.value=!1,C.value=null,x.clearErrors(),x.reset()}function ve(a){return{cash:"Cash",gcash:"GCash",bank:"Bank Transfer"}[a]||a}function ge(a){return{online:"Online",branch_staff:"Branch Staff",collector:"Collector"}[a]||a}function he(a){return{all:"All Types",prepaid:"Prepaid",postpaid:"Postpaid"}[a]||a}function _e(a){return{unpaid:"Unpaid",pending:"Pending",paid:"Paid"}[a]||a}function be(a){return{verified:"Verified",rejected:"Rejected"}[a]||a}const we=a=>{C.value=a,x.rejection_reason="",x.internal_notes="",B.value=!0},ke=()=>{C.value&&x.post(route("staff.payments.reject",C.value.id),{preserveScroll:!0,onSuccess:()=>{$(),S.reload({only:["verificationPayments","stats"]})}})},Ce=a=>{S.visit(route("staff.payments.verify",a))},je=(a,t)=>{S.visit(route("staff.payments.create",{delivery_id:a}))},H=a=>{S.visit(route("staff.payments.show",a))},F=a=>{var t,s;return((t=a.payment)==null?void 0:t.status)==="verified"?"verified":((s=a.payment)==null?void 0:s.status)==="rejected"?"rejected":a.payment?"pending_verification":a.payment_status||"unpaid"},Pe=a=>{switch(F(a)){case"verified":return"success";case"rejected":return"danger";case"pending_verification":return"warning";default:return"secondary"}},Se=a=>{switch(F(a)){case"verified":return"Verified";case"rejected":return"Rejected";case"pending_verification":return"Pending Verification";default:return"Unpaid"}},I=a=>a?new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A";return(a,t)=>(r(),V(Te,null,{header:v(()=>t[16]||(t[16]=[e("div",{class:"flex flex-wrap justify-between items-center gap-4 px-4 md:px-6 max-w-screen-xl mx-auto w-full"},[e("div",null,[e("h2",{class:"text-xl font-semibold leading-tight text-gray-800"}," Payment Management "),e("p",{class:"text-sm text-gray-600 mt-1"}," Manage all payment activities in one place ")])],-1)])),default:v(()=>[e("div",Fe,[e("div",Le,[e("div",Ue,[e("nav",Ee,[e("button",{onClick:t[0]||(t[0]=s=>z("verification")),class:D(["py-4 px-1 border-b-2 font-medium text-sm transition-colors duration-200 flex items-center",u.value==="verification"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},[t[17]||(t[17]=y(" â³ Verification Queue ")),e("span",He,o(l.stats.pending_verification||0),1)],2),e("button",{onClick:t[1]||(t[1]=s=>z("collection")),class:D(["py-4 px-1 border-b-2 font-medium text-sm transition-colors duration-200 flex items-center",u.value==="collection"?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},[t[18]||(t[18]=y(" ðŸ’° Collection Management ")),e("span",Ie,o(l.stats.needs_collection||0),1)],2),e("button",{onClick:t[2]||(t[2]=s=>z("history")),class:D(["py-4 px-1 border-b-2 font-medium text-sm transition-colors duration-200 flex items-center",u.value==="history"?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},[t[19]||(t[19]=y(" ðŸ“‹ Payment History ")),e("span",Ge,o(l.stats.verified_today||0)+" today ",1)],2)])]),e("div",Ke,[e("div",We,[e("div",Qe,[d(De,{modelValue:i.search,"onUpdate:modelValue":t[3]||(t[3]=s=>i.search=s),placeholder:ne.value,onKeyup:qe(w,["enter"]),onInput:me,class:"w-full"},null,8,["modelValue","placeholder"])]),e("div",Je,[d(A,{onClick:xe},{default:v(()=>t[20]||(t[20]=[e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),y(" Refresh ")])),_:1}),d(A,{onClick:ye},{default:v(()=>t[21]||(t[21]=[y(" Reset ")])),_:1})])]),e("div",Xe,[u.value==="verification"?(r(),n(j,{key:0},[d(M,{modelValue:i.payment_method,"onUpdate:modelValue":t[4]||(t[4]=s=>i.payment_method=s),options:te.value,placeholder:"Payment Method",onChange:w},null,8,["modelValue","options"]),d(M,{modelValue:i.payment_source,"onUpdate:modelValue":t[5]||(t[5]=s=>i.payment_source=s),options:se.value,placeholder:"Payment Source",onChange:w},null,8,["modelValue","options"])],64)):u.value==="collection"?(r(),n(j,{key:1},[d(M,{modelValue:i.collection_type,"onUpdate:modelValue":t[6]||(t[6]=s=>i.collection_type=s),options:ae.value,placeholder:"Collection Type",onChange:pe},null,8,["modelValue","options"]),d(M,{modelValue:i.payment_status,"onUpdate:modelValue":t[7]||(t[7]=s=>i.payment_status=s),options:oe.value,placeholder:"Payment Status",onChange:w},null,8,["modelValue","options"])],64)):u.value==="history"?(r(),n(j,{key:2},[d(M,{modelValue:i.history_status,"onUpdate:modelValue":t[8]||(t[8]=s=>i.history_status=s),options:ie.value,placeholder:"History Status",onChange:w},null,8,["modelValue","options"]),d(M,{modelValue:i.verified_by,"onUpdate:modelValue":t[9]||(t[9]=s=>i.verified_by=s),options:re.value,placeholder:"Verified By",onChange:w},null,8,["modelValue","options"])],64)):m("",!0)]),e("div",Ye,[e("div",Ze,[y(" Showing "+o(ce())+" "+o(ue())+" ",1),i.search?(r(),n("span",et,'â€¢ "'+o(i.search)+'"',1)):m("",!0),i.payment_method&&u.value==="verification"?(r(),n("span",tt," â€¢ "+o(ve(i.payment_method)),1)):m("",!0),i.payment_source&&u.value==="verification"?(r(),n("span",st," â€¢ "+o(ge(i.payment_source)),1)):m("",!0),i.collection_type&&u.value==="collection"?(r(),n("span",at," â€¢ "+o(he(i.collection_type)),1)):m("",!0),i.payment_status&&u.value==="collection"?(r(),n("span",ot," â€¢ "+o(_e(i.payment_status)),1)):m("",!0),i.history_status&&u.value==="history"?(r(),n("span",it," â€¢ "+o(be(i.history_status)),1)):m("",!0)])])])]),u.value==="verification"?(r(),n("div",rt,[e("div",nt,[e("div",lt,[e("table",dt,[t[24]||(t[24]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Reference & Method"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Customer & Amount"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Source & Submitted"),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",ct,[(r(!0),n(j,null,q(l.verificationPayments.data,s=>{var c,f,h,_;return r(),n("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",ut,[e("div",pt,o(((c=s.delivery_request)==null?void 0:c.reference_number)||"N/A"),1),e("div",mt,[y(o(s.method)+" ",1),s.reference_number?(r(),n("span",yt,"#"+o(s.reference_number),1)):m("",!0)])]),e("td",xt,[e("div",ft,o(((h=(f=s.delivery_request)==null?void 0:f.sender)==null?void 0:h.name)||"N/A"),1),e("div",vt," â‚±"+o(parseFloat(s.amount||0).toFixed(2)),1)]),e("td",gt,[e("div",ht,o(((_=s.source)==null?void 0:_.replace(/_/g," "))||"N/A"),1),e("div",_t,o(I(s.created_at)),1)]),e("td",bt,[e("div",wt,[d(A,{onClick:k=>Ce(s.id),size:"xs",class:"flex items-center"},{default:v(()=>t[22]||(t[22]=[e("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1),y(" Review ")])),_:2},1032,["onClick"]),d(ee,{onClick:k=>we(s),size:"xs",class:"flex items-center"},{default:v(()=>t[23]||(t[23]=[e("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),y(" Reject ")])),_:2},1032,["onClick"])])])])}),128))])])]),l.verificationPayments.data.length===0?(r(),n("div",kt,[d(g(U),{class:"h-12 w-12 mx-auto text-gray-400"}),t[25]||(t[25]=e("p",{class:"text-gray-500 mt-2"},"No payments pending verification",-1))])):m("",!0)]),l.verificationPayments.meta&&l.verificationPayments.meta.last_page>1?(r(),V(O,{key:0,pagination:l.verificationPayments.meta,onPageChanged:t[10]||(t[10]=s=>N(s,"verification")),class:"mt-6"},null,8,["pagination"])):m("",!0)])):u.value==="collection"?(r(),n("div",Ct,[i.collection_type==="all"||i.collection_type==="prepaid"?(r(),n("div",jt,[e("div",Pt,[e("div",St,[t[26]||(t[26]=e("div",null,[e("h3",{class:"text-lg font-medium text-gray-900"}," Prepaid Deliveries Needing Payment "),e("p",{class:"mt-1 text-sm text-gray-500"}," Record cash payments or track online payment status for prepaid deliveries. ")],-1)),e("div",Rt," Showing "+o(l.prepaidRequests.data.length)+" deliveries ",1)])]),e("div",Vt,[e("table",Mt,[t[28]||(t[28]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Reference & Sender"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Payment Method & Amount"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",At,[(r(!0),n(j,null,q(l.prepaidRequests.data,s=>{var c;return r(),n("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",qt,[e("div",Nt,o(s.reference_number||`DR-${String(s.id).padStart(6,"0")}`),1),e("div",Tt,o(((c=s.sender)==null?void 0:c.name)||"N/A"),1)]),e("td",Dt,[e("div",Ot,o(s.payment_method),1),e("div",Bt," â‚±"+o(parseFloat(s.total_price||0).toFixed(2)),1)]),e("td",zt,[d(L,{status:F(s),variant:Pe(s)},{default:v(()=>[y(o(Se(s)),1)]),_:2},1032,["status","variant"])]),e("td",$t,[d(Oe,{onClick:f=>je(s.id,"prepaid"),size:"xs",class:"flex items-center"},{default:v(()=>t[27]||(t[27]=[e("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),y(" Record Payment ")])),_:2},1032,["onClick"])])])}),128))])])]),l.prepaidRequests.data.length===0?(r(),n("div",Ft,[d(g(U),{class:"h-12 w-12 mx-auto text-gray-400"}),t[29]||(t[29]=e("p",{class:"text-gray-500 mt-2"},"No prepaid deliveries needing payment",-1))])):m("",!0),l.prepaidRequests.meta&&l.prepaidRequests.meta.last_page>1?(r(),V(O,{key:1,pagination:l.prepaidRequests.meta,onPageChanged:t[11]||(t[11]=s=>N(s,"prepaid")),class:"mt-6"},null,8,["pagination"])):m("",!0)])):m("",!0),i.collection_type==="all"||i.collection_type==="postpaid"?(r(),n("div",Lt,[e("div",Ut,[e("div",Et,[t[30]||(t[30]=e("div",null,[e("h3",{class:"text-lg font-medium text-gray-900"}," Postpaid Deliveries Needing Collection "),e("p",{class:"mt-1 text-sm text-gray-500"}," Track postpaid deliveries that require payment collection. ")],-1)),e("div",Ht," Showing "+o(l.postpaidRequests.data.length)+" deliveries ",1)])]),e("div",It,[e("table",Gt,[t[32]||(t[32]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Order & Sender"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Amount & Status"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Delivery Info"),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",Kt,[(r(!0),n(j,null,q(l.postpaidRequests.data,s=>{var c,f,h,_,k,R,b;return r(),n("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",Wt,[e("div",Qt,o(((c=s.delivery_request)==null?void 0:c.reference_number)||`DR-${String((f=s.delivery_request)==null?void 0:f.id).padStart(6,"0")}`),1),e("div",Jt,o(((_=(h=s.delivery_request)==null?void 0:h.sender)==null?void 0:_.name)||"N/A"),1)]),e("td",Xt,[e("div",Yt," â‚±"+o(parseFloat(((k=s.delivery_request)==null?void 0:k.total_price)||0).toFixed(2)),1),d(L,{status:s.payment_status,variant:s.payment_status==="collected"?"info":"warning",class:"mt-1"},{default:v(()=>[y(o(s.payment_status==="collected"?"Collected":"Uncollected"),1)]),_:2},1032,["status","variant"])]),e("td",Zt,[e("div",es,o(s.status),1),e("div",ts,o(((R=s.driver)==null?void 0:R.name)||"No driver"),1)]),e("td",ss,[s.payment_status==="collected"&&((b=s.delivery_request)!=null&&b.payment)?(r(),V(A,{key:0,onClick:Re=>H(s.delivery_request.payment.id),size:"xs",class:"flex items-center"},{default:v(()=>t[31]||(t[31]=[e("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1),y(" View Payment ")])),_:2},1032,["onClick"])):(r(),n("span",as," Awaiting collection "))])])}),128))])])]),l.postpaidRequests.data.length===0?(r(),n("div",os,[d(g(U),{class:"h-12 w-12 mx-auto text-gray-400"}),t[33]||(t[33]=e("p",{class:"text-gray-500 mt-2"},"No postpaid deliveries needing collection",-1))])):m("",!0),l.postpaidRequests.meta&&l.postpaidRequests.meta.last_page>1?(r(),V(O,{key:1,pagination:l.postpaidRequests.meta,onPageChanged:t[12]||(t[12]=s=>N(s,"postpaid")),class:"mt-6"},null,8,["pagination"])):m("",!0)])):m("",!0)])):u.value==="history"?(r(),n("div",is,[e("div",rs,[e("div",ns,[e("table",ls,[t[35]||(t[35]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Reference & Customer"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Method & Amount"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status & Verifier"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date Processed"),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",ds,[(r(!0),n(j,null,q(l.historyPayments.data,s=>{var c,f,h,_,k;return r(),n("tr",{key:s.id,class:"hover:bg-gray-50"},[e("td",cs,[e("div",us,o(((c=s.delivery_request)==null?void 0:c.reference_number)||"N/A"),1),e("div",ps,o(((h=(f=s.delivery_request)==null?void 0:f.sender)==null?void 0:h.name)||"N/A"),1)]),e("td",ms,[e("div",ys,o(s.method),1),e("div",xs," â‚±"+o(parseFloat(s.amount||0).toFixed(2)),1)]),e("td",fs,[d(L,{status:s.status,variant:s.status==="verified"?"success":"danger"},{default:v(()=>[y(o(s.status==="verified"?"Verified":"Rejected"),1)]),_:2},1032,["status","variant"]),e("div",vs," by "+o(((_=s.verified_by)==null?void 0:_.name)||((k=s.rejected_by)==null?void 0:k.name)||"System"),1)]),e("td",gs,[e("div",hs,o(I(s.verified_at||s.rejected_at||s.updated_at)),1)]),e("td",_s,[d(A,{onClick:R=>H(s.id),size:"xs",class:"flex items-center"},{default:v(()=>t[34]||(t[34]=[e("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1),y(" View Payment ")])),_:2},1032,["onClick"])])])}),128))])])]),l.historyPayments.data.length===0?(r(),n("div",bs,[d(g($e),{class:"h-12 w-12 mx-auto text-gray-400"}),t[36]||(t[36]=e("p",{class:"text-gray-500 mt-2"},"No payment history found",-1))])):m("",!0)]),l.historyPayments.meta&&l.historyPayments.meta.last_page>1&&l.historyPayments.data.length>0?(r(),V(O,{key:0,pagination:l.historyPayments.meta,onPageChanged:t[13]||(t[13]=s=>N(s,"history")),class:"mt-6"},null,8,["pagination"])):m("",!0)])):m("",!0)]),d(Be,{show:B.value,onClose:$,"max-width":"lg"},{default:v(()=>{var s,c,f,h,_,k,R;return[e("div",ws,[t[48]||(t[48]=e("div",{class:"flex items-center mb-3"},[e("div",{class:"h-8 w-8 bg-red-100 rounded-full flex items-center justify-center"},[e("svg",{class:"h-5 w-5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.35 16.5c-.77.833.192 2.5 1.732 2.5z"})])]),e("div",{class:"ml-2"},[e("h2",{class:"text-base font-semibold text-gray-900"},"Reject Payment"),e("p",{class:"text-xs text-gray-500"},"This action cannot be undone")])],-1)),e("div",ks,[t[41]||(t[41]=e("h3",{class:"text-xs font-medium text-gray-900 mb-2"},"Payment Details",-1)),e("div",Cs,[e("div",null,[t[37]||(t[37]=e("span",{class:"text-gray-500"},"Reference:",-1)),e("p",js,o(((c=(s=C.value)==null?void 0:s.delivery_request)==null?void 0:c.reference_number)||"N/A"),1)]),e("div",null,[t[38]||(t[38]=e("span",{class:"text-gray-500"},"Customer:",-1)),e("p",Ps,o(((_=(h=(f=C.value)==null?void 0:f.delivery_request)==null?void 0:h.sender)==null?void 0:_.name)||"N/A"),1)]),e("div",null,[t[39]||(t[39]=e("span",{class:"text-gray-500"},"Amount:",-1)),e("p",Ss,"â‚±"+o((k=C.value)!=null&&k.amount?parseFloat(C.value.amount).toFixed(2):"0.00"),1)]),e("div",null,[t[40]||(t[40]=e("span",{class:"text-gray-500"},"Method:",-1)),e("p",Rs,o(((R=C.value)==null?void 0:R.method)||"N/A"),1)])])]),e("form",{onSubmit:Ne(ke,["prevent"]),class:"space-y-4"},[e("div",null,[t[42]||(t[42]=e("label",{class:"block text-xs font-medium text-gray-700 mb-2"},[y(" Rejection Reason "),e("span",{class:"text-red-500"},"*")],-1)),e("div",Vs,[(r(!0),n(j,null,q(le.value,b=>(r(),n("button",{key:b.value,type:"button",onClick:Re=>de(b.value),class:D(["text-xs px-2 py-1.5 rounded border transition-colors text-left",g(x).rejection_reason===b.value?"bg-red-100 border-red-300 text-red-700":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50"])},o(b.label),11,Ms))),128))]),d(Z,{modelValue:g(x).rejection_reason,"onUpdate:modelValue":t[14]||(t[14]=b=>g(x).rejection_reason=b),placeholder:"Reason for rejection...",rows:"2",class:"w-full text-sm",required:""},null,8,["modelValue"]),d(ze,{message:g(x).errors.rejection_reason,class:"mt-1 text-xs"},null,8,["message"]),t[43]||(t[43]=e("p",{class:"text-xs text-gray-500 mt-1"},"Visible to the customer.",-1))]),e("div",null,[t[44]||(t[44]=e("label",{class:"block text-xs font-medium text-gray-700 mb-1"}," Internal Notes (Optional) ",-1)),d(Z,{modelValue:g(x).internal_notes,"onUpdate:modelValue":t[15]||(t[15]=b=>g(x).internal_notes=b),placeholder:"For internal staff reference...",rows:"2",class:"w-full text-sm"},null,8,["modelValue"])]),t[47]||(t[47]=e("div",{class:"bg-yellow-50 border border-yellow-200 rounded-md p-3"},[e("div",{class:"flex"},[e("svg",{class:"h-4 w-4 text-yellow-400 mr-2 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.35 16.5c-.77.833.192 2.5 1.732 2.5z"})]),e("div",{class:"text-xs text-yellow-700"},[e("p",{class:"font-medium"},"Confirm this rejection"),e("p",null,"This will mark it as rejected and notify the customer.")])])],-1)),e("div",As,[d(A,{type:"button",onClick:$,disabled:g(x).processing,class:"text-xs px-3 py-1.5"},{default:v(()=>t[45]||(t[45]=[y(" Cancel ")])),_:1},8,["disabled"]),d(ee,{type:"submit",disabled:g(x).processing||!g(x).rejection_reason,loading:g(x).processing,class:"text-xs px-3 py-1.5"},{default:v(()=>t[46]||(t[46]=[e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),y(" Reject ")])),_:1},8,["disabled","loading"])])],32)])]}),_:1},8,["show"])]),_:1}))}};export{Ws as default};
