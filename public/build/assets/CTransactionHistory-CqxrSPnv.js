import{E as W}from"./EmployeeLayout-BQLa5PLV.js";import{_ as J}from"./PrimaryButton-z6gddSkS.js";import{_ as L}from"./SecondaryButton-BDpVYXxA.js";import{D as S}from"./DangerButton-DlTel5kP.js";import{_ as R}from"./SearchInput-BHbkz-wy.js";import{S as q}from"./SelectInput-f4kpY-DU.js";import{_ as z}from"./DataTable-C_2NMP2T.js";import{M as G}from"./Modal-Oa0ozw3w.js";import{g as n,i as K,d as Q,o as C,w as s,b as o,a as l,f as r,t as b,c as F}from"./app-B0R_bMJi.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./NavLink-BchASNUp.js";/* empty css                                                                    */const X={class:"py-6"},Y={class:"mx-auto sm:px-6 lg:px-8"},Z={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},ee={class:"p-6 bg-white border-b border-gray-200"},te={class:"mb-6 flex justify-between items-center"},ae={class:"flex space-x-2"},oe={class:"flex flex-wrap gap-2"},se={class:"p-6"},le={class:"mt-1 text-sm text-gray-600"},ne={class:"mt-6 flex justify-end space-x-4"},re={key:0},ie={key:1},ge={__name:"CTransactionHistory",props:{customers:{type:Array,required:!0},status:String,success:String,error:String},setup(P){const g=P,u=n(""),c=n(""),m=n(""),$=[{value:"",label:"All Types"},{value:"individual",label:"Individual"},{value:"company",label:"Company"}],D=[{value:"",label:"All Frequencies"},{value:"regular",label:"Regular"},{value:"occasional",label:"Occasional"}],y=n([{id:1001,name:"Blase Mariano",company_name:"",package_code:100001234,payment_status:"Paid",amount_paid:"10000",payment_type:"cash",total_orders:5,created_at:"2025-05-26"},{id:1002,name:"Jose Pasqual",company_name:"",package_code:100001235,payment_status:"Paid",amount_paid:"10000",payment_type:"cash",total_orders:5,created_at:"2025-05-26"}]),f=n("created_at"),p=n("desc"),_=n(!1),d=n(null),v=n(!1),B=[{field:"id",header:"Transaction ID",sortable:!0},{field:"name",header:"Name",sortable:!0},{field:"company_name",header:"Company",sortable:!0},{field:"package_code",header:"Package code",sortable:!0},{field:"payment_status",header:"Payment Status",sortable:!0},{field:"amount_paid",header:"Amount Paid",sortable:!0},{field:"payment_type",header:"Payment",sortable:!0},{field:"created_at",header:"Created",sortable:!0},{field:"actions",header:"Actions",sortable:!1}];function E(a){f.value===a?p.value=p.value==="asc"?"desc":"asc":(f.value=a,p.value="asc")}function N(a){alert(`Would view customer with ID: ${a}`)}function I(a){alert(`Would edit customer with ID: ${a}`)}function M(a){d.value=a,_.value=!0}function h(){_.value=!1,d.value=null,v.value=!1}function j(){d.value&&(v.value=!0,setTimeout(()=>{y.value=y.value.filter(a=>a.id!==d.value.id),h()},800))}const O=K(()=>g.customers?g.customers.filter(a=>{var w,x,k,T,A,V;const e=((w=a.name)==null?void 0:w.toLowerCase().includes(u.value.toLowerCase()))||((x=a.company_name)==null?void 0:x.toLowerCase().includes(u.value.toLowerCase()))||((k=a.email)==null?void 0:k.toLowerCase().includes(u.value.toLowerCase()))||((T=a.mobile)==null?void 0:T.toLowerCase().includes(u.value.toLowerCase())),t=(A=a.entity_type)==null?void 0:A.toLowerCase(),i=!c.value||t===c.value.toLowerCase(),U=(V=a.frequency_type)==null?void 0:V.toLowerCase(),H=!m.value||U===m.value.toLowerCase();return e&&i&&H}):[]);return console.log("Entity Type Filter:",c.value),console.log("Frequency Type Filter:",m.value),console.log("Filtered Customers:",O.value),(a,e)=>(C(),Q(W,null,{header:s(()=>e[3]||(e[3]=[o("div",{class:"flex justify-between items-center"},[o("h2",{class:"text-xl font-semibold leading-tight text-gray-800"},"Transaction History")],-1)])),default:s(()=>[o("div",X,[o("div",Y,[o("div",Z,[o("div",ee,[o("div",te,[l(R,{modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=t=>u.value=t),placeholder:"Search customers..."},null,8,["modelValue"]),o("div",ae,[l(q,{modelValue:c.value,"onUpdate:modelValue":e[1]||(e[1]=t=>c.value=t),options:$,placeholder:"Filter by type"},null,8,["modelValue"]),l(q,{modelValue:m.value,"onUpdate:modelValue":e[2]||(e[2]=t=>m.value=t),options:D,placeholder:"Filter by frequency"},null,8,["modelValue"])])]),l(z,{columns:B,data:y.value,"sort-field":f.value,"sort-direction":p.value,onSort:E},{name:s(({row:t})=>[r(b(t.name||t.company_name||"N/A"),1)]),company_name:s(({row:t})=>[r(b(t.company_name||"N/A"),1)]),actions:s(({row:t})=>[o("div",oe,[l(L,{onClick:i=>N(t.id)},{default:s(()=>e[4]||(e[4]=[r("View")])),_:2},1032,["onClick"]),l(J,{onClick:i=>I(t.id)},{default:s(()=>e[5]||(e[5]=[r("Edit")])),_:2},1032,["onClick"]),l(S,{onClick:i=>M(t)},{default:s(()=>e[6]||(e[6]=[r(" Archive ")])),_:2},1032,["onClick"])])]),_:1},8,["data","sort-field","sort-direction"]),l(G,{show:_.value,onClose:h},{default:s(()=>{var t,i;return[o("div",se,[e[10]||(e[10]=o("h2",{class:"text-lg font-medium text-gray-900"},"Archive Customer?",-1)),o("p",le,[e[7]||(e[7]=r(" Are you sure you want to archive ")),o("strong",null,b(((t=d.value)==null?void 0:t.name)||((i=d.value)==null?void 0:i.company_name)),1),e[8]||(e[8]=r("? "))]),o("div",ne,[l(L,{onClick:h},{default:s(()=>e[9]||(e[9]=[r("Cancel")])),_:1}),l(S,{onClick:j,disabled:v.value},{default:s(()=>[v.value?(C(),F("span",re,"Processing...")):(C(),F("span",ie,"Archive"))]),_:1},8,["disabled"])])])]}),_:1},8,["show"])])])])])]),_:1}))}};export{ge as default};
