import{g as f,i as x,h as E,W as b,d as I,o as _,w as l,b as s,c as v,e as g,t as r,a as i,f as d,k as P,n as W}from"./app-Xu1-QTPS.js";import{E as G}from"./EmployeeLayout-HD3iRf9t.js";import{_ as Y}from"./PrimaryButton-CQvisOOW.js";import{_ as V}from"./SecondaryButton-B4_LijSy.js";import{P as H}from"./Pagination-BAEaYyIT.js";import{_ as J}from"./SearchInput-CS47I9fw.js";import{S as k}from"./SelectInput-C0-STkNZ.js";import{_ as K}from"./DataTable-3JX1dhV3.js";import{_ as Q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./NavLink-Dma88ZBl.js";import"./DangerButton-B9GvHwCg.js";const X={class:"flex justify-between items-center w-full px-6 md:px-8"},Z={class:"flex gap-2"},ee={class:"zoom-content"},te={class:"px-6 py-4"},ae={key:0,class:"mb-6"},se={key:0,class:"p-4 bg-blue-100 text-blue-800 rounded"},le={key:1,class:"p-4 bg-green-100 text-green-800 rounded"},re={key:2,class:"p-4 bg-red-100 text-red-800 rounded"},oe={class:"mb-6 flex flex-col md:flex-row justify-between items-start md:items-center gap-4"},ne={class:"flex flex-wrap gap-2 w-full md:w-auto"},ie={class:"bg-white shadow-sm sm:rounded-lg"},de={class:"p-4 bg-white border-b border-gray-200"},ue={class:"font-mono text-sm text-gray-600"},ce={class:"flex items-center"},pe={class:"text-gray-700"},me={class:"flex items-center"},_e={class:"text-gray-700"},fe={class:"capitalize"},ve={class:"max-w-xs truncate"},ge={class:"flex space-x-2"},ye={class:"mt-4 flex justify-center"},he={__name:"RejectedRequests",props:{requests:{type:Array,required:!0,default:()=>[]},pagination:{type:Object,default:()=>({current_page:1,last_page:1,links:[]})},filters:{type:Object,default:()=>({search:"",payment_method:"",payment_type:"",date_range:"all"})},status:String,success:String,error:String},setup(o){const u=o,n=f(u.filters.search||""),p=f(u.filters.payment_method||""),m=f(u.filters.payment_type||""),y=f(u.filters.date_range||"all"),c=f("rejected_at"),h=f("desc"),w=x(()=>{var t;return Number((t=u.pagination)==null?void 0:t.current_page)||1}),j=x(()=>{var t;return Number((t=u.pagination)==null?void 0:t.last_page)||1}),N=x(()=>{var t;return{current_page:w.value,last_page:j.value,links:((t=u.pagination)==null?void 0:t.links)||[]}}),T=[{value:"",text:"All Payment Types"},{value:"prepaid",text:"Prepaid"},{value:"postpaid",text:"Postpaid"}],q=[{value:"",text:"All Methods"},{value:"cash",text:"Cash"},{value:"gcash",text:"GCash"},{value:"bank",text:"Bank Transfer"}],D=[{value:"all",text:"All Time"},{value:"today",text:"Today"},{value:"week",text:"This Week"},{value:"month",text:"This Month"},{value:"year",text:"This Year"}],L=[{field:"id",header:"Request ID",sortable:!0},{field:"sender",header:"Sender",sortable:!0},{field:"receiver",header:"Receiver",sortable:!0},{field:"pick_up_region",header:"Pick-up",sortable:!0},{field:"drop_off_region",header:"Drop-off",sortable:!0},{field:"status",header:"Status",sortable:!0},{field:"total_price",header:"Amount",sortable:!0},{field:"payment_method",header:"Payment Method",sortable:!0},{field:"payment_type",header:"Payment Type",sortable:!0},{field:"created_at",header:"Request Date",sortable:!0},{field:"rejected_at",header:"Rejected At",sortable:!0},{field:"rejected_by",header:"Rejected By",sortable:!0},{field:"rejection_reason",header:"Rejection Reason",sortable:!1},{field:"actions",header:"Actions",sortable:!1}];function B(t){switch(t){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}}const A=x(()=>(u.requests||[]).map(t=>({...t,payment_type:t.payment_type??(["cash","gcash","bank"].includes(t.payment_method)?"prepaid":"postpaid")}))),F=x(()=>A.value?A.value.filter(t=>{var S,C;const a=n.value===""||((S=t.sender)==null?void 0:S.toLowerCase().includes(n.value.toLowerCase()))||((C=t.receiver)==null?void 0:C.toLowerCase().includes(n.value.toLowerCase()))||t.id.toString().includes(n.value),e=p.value===""||t.payment_method===p.value,R=m.value===""||t.payment_type===m.value;return a&&e&&R}).sort((t,a)=>{if(!c.value)return 0;const e=h.value==="asc"?1:-1;return t[c.value]<a[c.value]?-1*e:t[c.value]>a[c.value]?1*e:0}):[]);E([n,p,y,m],()=>{b.get(route("deliveries.rejected"),{search:n.value,payment_method:p.value,payment_type:m.value,date_range:y.value,page:1},{preserveState:!0,replace:!0})});function M(t){c.value===t?h.value=h.value==="asc"?"desc":"asc":(c.value=t,h.value="asc")}function U(t){b.get(route("deliveries.rejected"),{page:t,search:n.value,payment_method:p.value,payment_type:m.value,date_range:y.value},{preserveState:!0})}function O(t){b.get(route("deliveries.show",t))}function $(){b.get(route("deliveries.pending"))}function z(){b.get(route("deliveries.index"))}return(t,a)=>(_(),I(G,null,{header:l(()=>[s("div",X,[a[6]||(a[6]=s("div",null,[s("h2",{class:"text-xl font-semibold leading-tight text-gray-800"},"Rejected Delivery Requests"),s("p",{class:"mt-1 text-sm text-gray-500"}," Review rejected delivery requests ")],-1)),s("div",Z,[i(Y,{onClick:$},{default:l(()=>a[4]||(a[4]=[d(" Pending Requests ")])),_:1}),i(V,{onClick:z},{default:l(()=>a[5]||(a[5]=[d(" Approved Requests ")])),_:1})])])]),default:l(()=>[s("div",ee,[s("div",te,[o.status||o.success||o.error?(_(),v("div",ae,[o.status?(_(),v("div",se,r(o.status),1)):g("",!0),o.success?(_(),v("div",le,r(o.success),1)):g("",!0),o.error?(_(),v("div",re,r(o.error),1)):g("",!0)])):g("",!0),s("div",oe,[i(J,{modelValue:n.value,"onUpdate:modelValue":a[0]||(a[0]=e=>n.value=e),placeholder:"Search requests...",class:"w-full max-w-md"},null,8,["modelValue"]),s("div",ne,[i(k,{modelValue:m.value,"onUpdate:modelValue":a[1]||(a[1]=e=>m.value=e),options:T,"option-value":"value","option-label":"text",placeholder:"All Payment Types",class:"w-full md:w-48"},null,8,["modelValue"]),i(k,{modelValue:p.value,"onUpdate:modelValue":a[2]||(a[2]=e=>p.value=e),options:q,"option-value":"value","option-label":"text",placeholder:"All Payment Methods",class:"w-full md:w-48"},null,8,["modelValue"]),i(k,{modelValue:y.value,"onUpdate:modelValue":a[3]||(a[3]=e=>y.value=e),options:D,"option-value":"value","option-label":"text",placeholder:"Filter by date",class:"w-full md:w-48"},null,8,["modelValue"])])]),s("div",ie,[s("div",de,[i(K,{columns:L,data:F.value,"sort-field":c.value,"sort-direction":h.value,onSort:M,class:"w-full"},{id:l(({row:e})=>[s("span",ue,"DR-"+r(String(e.id).padStart(6,"0")),1)]),status:l(({row:e})=>[s("span",{class:W([B(e.status),"px-2 inline-flex text-xs leading-5 font-semibold rounded-full"])},r(e.status.charAt(0).toUpperCase()+e.status.slice(1)),3)]),sender:l(({row:e})=>[d(r(e.sender||"N/A"),1)]),receiver:l(({row:e})=>[d(r(e.receiver||"N/A"),1)]),pick_up_region:l(({row:e})=>[s("div",ce,[e.pick_up_region&&e.pick_up_region_color?(_(),v("div",{key:0,class:"w-3 h-3 rounded-full mr-2 border border-gray-300",style:P({backgroundColor:e.pick_up_region_color})},null,4)):g("",!0),s("span",pe,r(e.pick_up_region||"N/A"),1)])]),drop_off_region:l(({row:e})=>[s("div",me,[e.drop_off_region&&e.drop_off_region_color?(_(),v("div",{key:0,class:"w-3 h-3 rounded-full mr-2 border border-gray-300",style:P({backgroundColor:e.drop_off_region_color})},null,4)):g("",!0),s("span",_e,r(e.drop_off_region||"N/A"),1)])]),total_price:l(({row:e})=>[d(" â‚±"+r(e.total_price||"0.00"),1)]),payment_method:l(({row:e})=>[s("span",fe,r(e.payment_method||"N/A"),1)]),payment_type:l(({row:e})=>[d(r(e.payment_type?e.payment_type.charAt(0).toUpperCase()+e.payment_type.slice(1):"N/A"),1)]),created_at:l(({row:e})=>[d(r(e.created_at?new Date(e.created_at).toLocaleDateString():"N/A"),1)]),rejected_at:l(({row:e})=>[d(r(e.rejected_at?new Date(e.rejected_at).toLocaleDateString():"N/A"),1)]),rejection_reason:l(({row:e})=>[s("span",ve,r(e.rejection_reason||"N/A"),1)]),actions:l(({row:e})=>[s("div",ge,[i(V,{onClick:R=>O(e.id)},{default:l(()=>a[7]||(a[7]=[d(" View ")])),_:2},1032,["onClick"])])]),_:1},8,["data","sort-field","sort-direction"])])]),s("div",ye,[i(H,{"current-page":w.value,"total-pages":j.value,pagination:N.value,onPageChanged:U},null,8,["current-page","total-pages","pagination"])])])])]),_:1}))}},Ne=Q(he,[["__scopeId","data-v-2fa40ea9"]]);export{Ne as default};
