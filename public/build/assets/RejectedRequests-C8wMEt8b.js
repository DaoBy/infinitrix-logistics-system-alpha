import{E as B}from"./EmployeeLayout-BQLa5PLV.js";import{_ as T}from"./PrimaryButton-z6gddSkS.js";import{_ as S}from"./SecondaryButton-BDpVYXxA.js";import{_ as O}from"./SearchInput-BHbkz-wy.js";import{S as k}from"./SelectInput-f4kpY-DU.js";import{_ as P}from"./DataTable-C_2NMP2T.js";import{g,i as W,d as Y,o as x,w as s,c as w,e as y,b as d,t as o,a as i,f as u,n as $,W as b}from"./app-B0R_bMJi.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./NavLink-BchASNUp.js";import"./DangerButton-DlTel5kP.js";/* empty css                                                                    */const E={class:"flex justify-between items-center"},U={class:"flex space-x-2"},z={key:0,class:"mb-6 mx-4 sm:mx-0"},I={key:0,class:"p-4 bg-blue-100 text-blue-800 rounded"},G={key:1,class:"p-4 bg-green-100 text-green-800 rounded"},H={key:2,class:"p-4 bg-red-100 text-red-800 rounded"},J={class:"mb-6 mx-4 sm:mx-0 flex flex-col md:flex-row justify-between items-start md:items-center gap-4"},K={class:"flex flex-wrap gap-2 w-full md:w-auto"},Q={class:"mx-4 sm:mx-0"},X={class:"flex space-x-2"},ie={__name:"RejectedRequests",props:{requests:{type:Array,required:!0,default:()=>[]},status:String,success:String,error:String},setup(r){const _=r,c=g(""),p=g(""),h=g("all"),n=g("rejected_at"),f=g("desc"),C=[{value:"",text:"All Methods"},{value:"cash",text:"Cash"},{value:"card",text:"Card"}],j=[{value:"all",text:"All Time"},{value:"today",text:"Today"},{value:"week",text:"This Week"},{value:"month",text:"This Month"},{value:"year",text:"This Year"}],R=[{field:"order_number",header:"Order #",sortable:!0},{field:"sender",header:"Sender",sortable:!0},{field:"receiver",header:"Receiver",sortable:!0},{field:"status",header:"Status",sortable:!0},{field:"total_price",header:"Amount",sortable:!0},{field:"payment_method",header:"Payment",sortable:!0},{field:"created_at",header:"Request Date",sortable:!0},{field:"rejected_at",header:"Rejected At",sortable:!0},{field:"rejected_by",header:"Rejected By",sortable:!0},{field:"actions",header:"Actions",sortable:!1}];function V(a){switch(a){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}}const A=W(()=>_.requests?_.requests.filter(a=>{var m,v,D;const t=c.value===""||((m=a.sender)==null?void 0:m.toLowerCase().includes(c.value.toLowerCase()))||((v=a.receiver)==null?void 0:v.toLowerCase().includes(c.value.toLowerCase()))||((D=a.order_number)==null?void 0:D.toLowerCase().includes(c.value.toLowerCase())),e=p.value===""||a.payment_method===p.value,l=h.value==="all"||q(a.rejected_at,h.value);return t&&e&&l}).sort((a,t)=>{if(!n.value)return 0;const e=f.value==="asc"?1:-1;return a[n.value]<t[n.value]?-1*e:a[n.value]>t[n.value]?1*e:0}):[]);function q(a,t){if(!a)return!1;const e=new Date(a),l=new Date;switch(t){case"today":return e.toDateString()===l.toDateString();case"week":const m=new Date(l.setDate(l.getDate()-l.getDay())),v=new Date(m);return v.setDate(m.getDate()+6),e>=m&&e<=v;case"month":return e.getMonth()===l.getMonth()&&e.getFullYear()===l.getFullYear();case"year":return e.getFullYear()===l.getFullYear();default:return!0}}function F(a){n.value===a?f.value=f.value==="asc"?"desc":"asc":(n.value=a,f.value="asc")}function L(a){b.get(route("deliveries.show",a))}function N(){b.get(route("deliveries.pending"))}function M(){b.get(route("deliveries.index"))}return(a,t)=>(x(),Y(B,null,{header:s(()=>[d("div",E,[t[5]||(t[5]=d("h2",{class:"text-xl font-semibold leading-tight text-gray-800"}," Rejected Delivery Requests ",-1)),d("div",U,[i(T,{onClick:N},{default:s(()=>t[3]||(t[3]=[u(" Pending Requests ")])),_:1}),i(S,{onClick:M},{default:s(()=>t[4]||(t[4]=[u(" Approved Requests ")])),_:1})])])]),default:s(()=>[r.status||r.success||r.error?(x(),w("div",z,[r.status?(x(),w("div",I,o(r.status),1)):y("",!0),r.success?(x(),w("div",G,o(r.success),1)):y("",!0),r.error?(x(),w("div",H,o(r.error),1)):y("",!0)])):y("",!0),d("div",J,[i(O,{modelValue:c.value,"onUpdate:modelValue":t[0]||(t[0]=e=>c.value=e),placeholder:"Search requests...",class:"w-full md:w-64"},null,8,["modelValue"]),d("div",K,[i(k,{modelValue:p.value,"onUpdate:modelValue":t[1]||(t[1]=e=>p.value=e),options:C,"option-value":"value","option-label":"text",placeholder:"All Payment Methods",class:"w-full md:w-48"},null,8,["modelValue"]),i(k,{modelValue:h.value,"onUpdate:modelValue":t[2]||(t[2]=e=>h.value=e),options:j,"option-value":"value","option-label":"text",placeholder:"Filter by date",class:"w-full md:w-48"},null,8,["modelValue"])])]),d("div",Q,[i(P,{columns:R,data:A.value,"sort-field":n.value,"sort-direction":f.value,onSort:F},{status:s(({row:e})=>[d("span",{class:$([V(e.status),"px-2 inline-flex text-xs leading-5 font-semibold rounded-full"])},o(e.status),3)]),sender:s(({row:e})=>[u(o(e.sender||"N/A"),1)]),receiver:s(({row:e})=>[u(o(e.receiver||"N/A"),1)]),total_price:s(({row:e})=>[u(" â‚±"+o(e.total_price||"0.00"),1)]),created_at:s(({row:e})=>[u(o(e.created_at?new Date(e.created_at).toLocaleDateString():"N/A"),1)]),rejected_at:s(({row:e})=>[u(o(e.rejected_at?new Date(e.rejected_at).toLocaleDateString():"N/A"),1)]),actions:s(({row:e})=>[d("div",X,[i(S,{onClick:l=>L(e.id)},{default:s(()=>t[6]||(t[6]=[u(" View Details ")])),_:2},1032,["onClick"])])]),_:1},8,["data","sort-field","sort-direction"])])]),_:1}))}};export{ie as default};
