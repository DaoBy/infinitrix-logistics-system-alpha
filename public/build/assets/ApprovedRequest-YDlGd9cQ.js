import{E as P}from"./EmployeeLayout-CgMY_n5V.js";import{_ as k}from"./PrimaryButton-eC2eu5yQ.js";import{_ as T}from"./SecondaryButton-f4DzqSLc.js";import{D as $}from"./DangerButton-B7_oj2jq.js";import{_ as W}from"./SearchInput-BSEud9IK.js";import{S as A}from"./SelectInput-BACJkmZB.js";import{_ as Y}from"./DataTable-BArupUOg.js";import{g,i as E,d as C,o as f,w as r,c as w,e as x,b as u,t as l,a as d,f as n,n as U,W as b}from"./app-BllHWhcy.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./NavLink-BG8uMyS8.js";/* empty css                                                                    */const z={class:"flex justify-between items-center"},I={class:"flex space-x-2"},G={key:0,class:"mb-6 mx-4 sm:mx-0"},H={key:0,class:"p-4 bg-blue-100 text-blue-800 rounded"},J={key:1,class:"p-4 bg-green-100 text-green-800 rounded"},K={key:2,class:"p-4 bg-red-100 text-red-800 rounded"},Q={class:"mb-6 mx-4 sm:mx-0 flex flex-col md:flex-row justify-between items-start md:items-center gap-4"},X={class:"flex flex-wrap gap-2 w-full md:w-auto"},Z={class:"mx-4 sm:mx-0"},ee={class:"flex space-x-2"},me={__name:"ApprovedRequest",props:{deliveries:{type:Array,required:!0,default:()=>[]},status:String,success:String,error:String},setup(o){const y=o,c=g(""),h=g(""),_=g("all"),i=g("approved_at"),v=g("desc"),S=[{value:"",text:"All Methods"},{value:"cash",text:"Cash"},{value:"card",text:"Card"},{value:"online",text:"Online"}],V=[{value:"all",text:"All Time"},{value:"today",text:"Today"},{value:"week",text:"This Week"},{value:"month",text:"This Month"},{value:"year",text:"This Year"}],R=[{field:"order_number",header:"Order #",sortable:!0},{field:"sender",header:"Sender",sortable:!0},{field:"receiver",header:"Receiver",sortable:!0},{field:"pick_up_region",header:"Pick-up",sortable:!0},{field:"drop_off_region",header:"Drop-off",sortable:!0},{field:"status",header:"Status",sortable:!0},{field:"total_price",header:"Amount",sortable:!0},{field:"payment_method",header:"Payment",sortable:!0},{field:"created_at",header:"Request Date",sortable:!0},{field:"approved_at",header:"Approved At",sortable:!0},{field:"approved_by",header:"Approved By",sortable:!0},{field:"actions",header:"Actions",sortable:!1}];function q(a){switch(a){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}}const F=E(()=>y.deliveries?y.deliveries.filter(a=>{var m,p,D;const t=c.value===""||((m=a.sender)==null?void 0:m.toLowerCase().includes(c.value.toLowerCase()))||((p=a.receiver)==null?void 0:p.toLowerCase().includes(c.value.toLowerCase()))||((D=a.order_number)==null?void 0:D.toLowerCase().includes(c.value.toLowerCase())),e=h.value===""||a.payment_method===h.value,s=_.value==="all"||N(a.approved_at,_.value);return t&&e&&s}).sort((a,t)=>{if(!i.value)return 0;const e=v.value==="asc"?1:-1;return a[i.value]<t[i.value]?-1*e:a[i.value]>t[i.value]?1*e:0}):[]);function N(a,t){if(!a)return!1;const e=new Date(a),s=new Date;switch(t){case"today":return e.toDateString()===s.toDateString();case"week":const m=new Date(s.setDate(s.getDate()-s.getDay())),p=new Date(m);return p.setDate(m.getDate()+6),e>=m&&e<=p;case"month":return e.getMonth()===s.getMonth()&&e.getFullYear()===s.getFullYear();case"year":return e.getFullYear()===s.getFullYear();default:return!0}}function L(a){i.value===a?v.value=v.value==="asc"?"desc":"asc":(i.value=a,v.value="asc")}function B(a){b.get(route("deliveries.show",a))}function M(a){b.get(route("cargo-assignment.show",a))}function O(){b.get(route("deliveries.pending"))}function j(){b.get(route("deliveries.rejected"))}return(a,t)=>(f(),C(P,null,{header:r(()=>[u("div",z,[t[5]||(t[5]=u("h2",{class:"text-xl font-semibold leading-tight text-gray-800"}," Approved Delivery Requests ",-1)),u("div",I,[d(k,{onClick:O},{default:r(()=>t[3]||(t[3]=[n(" Pending Requests ")])),_:1}),d($,{onClick:j},{default:r(()=>t[4]||(t[4]=[n(" Rejected Requests ")])),_:1})])])]),default:r(()=>[o.status||o.success||o.error?(f(),w("div",G,[o.status?(f(),w("div",H,l(o.status),1)):x("",!0),o.success?(f(),w("div",J,l(o.success),1)):x("",!0),o.error?(f(),w("div",K,l(o.error),1)):x("",!0)])):x("",!0),u("div",Q,[d(W,{modelValue:c.value,"onUpdate:modelValue":t[0]||(t[0]=e=>c.value=e),placeholder:"Search requests...",class:"w-full md:w-64"},null,8,["modelValue"]),u("div",X,[d(A,{modelValue:h.value,"onUpdate:modelValue":t[1]||(t[1]=e=>h.value=e),options:S,"option-value":"value","option-label":"text",placeholder:"All Payment Methods",class:"w-full md:w-48"},null,8,["modelValue"]),d(A,{modelValue:_.value,"onUpdate:modelValue":t[2]||(t[2]=e=>_.value=e),options:V,"option-value":"value","option-label":"text",placeholder:"Filter by date",class:"w-full md:w-48"},null,8,["modelValue"])])]),u("div",Z,[d(Y,{columns:R,data:F.value,"sort-field":i.value,"sort-direction":v.value,onSort:L},{status:r(({row:e})=>[u("span",{class:U([q(e.status),"px-2 inline-flex text-xs leading-5 font-semibold rounded-full"])},l(e.status),3)]),sender:r(({row:e})=>[n(l(e.sender||"N/A"),1)]),receiver:r(({row:e})=>[n(l(e.receiver||"N/A"),1)]),pick_up_region:r(({row:e})=>[n(l(e.pick_up_region||"N/A"),1)]),drop_off_region:r(({row:e})=>[n(l(e.drop_off_region||"N/A"),1)]),total_price:r(({row:e})=>[n(" â‚±"+l(e.total_price||"0.00"),1)]),approved_at:r(({row:e})=>[n(l(e.approved_at?new Date(e.approved_at).toLocaleDateString():"N/A"),1)]),actions:r(({row:e})=>[u("div",ee,[d(T,{onClick:s=>B(e.id)},{default:r(()=>t[6]||(t[6]=[n(" View Details ")])),_:2},1032,["onClick"]),e.has_order?(f(),C(k,{key:0,onClick:s=>M(e.deliveryOrder.id)},{default:r(()=>t[7]||(t[7]=[n(" View Assignment ")])),_:2},1032,["onClick"])):x("",!0)])]),_:1},8,["data","sort-field","sort-direction"])])]),_:1}))}};export{me as default};
