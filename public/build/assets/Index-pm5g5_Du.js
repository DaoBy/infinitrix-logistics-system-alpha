import{E}from"./EmployeeLayout-CgMY_n5V.js";import{_ as F}from"./SearchInput-BSEud9IK.js";import{S as I}from"./SelectInput-BACJkmZB.js";import{_ as O}from"./StatusBadge-R9GU_yEO.js";import{_ as R}from"./PrimaryButton-eC2eu5yQ.js";import{D as T}from"./DangerButton-B7_oj2jq.js";import{g as $,h as W,W as m,d as q,o as i,w as l,b as e,c as o,e as c,t as d,F as A,r as L,a as y,f as G,u as H,n as J}from"./app-BllHWhcy.js";import{d as K}from"./debounce-Bw3YwbKH.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./NavLink-BG8uMyS8.js";/* empty css                                                                    */const Q={class:"flex flex-col md:flex-row justify-between items-start md:items-center px-2 md:px-8 py-4 max-w-7xl mx-auto w-full"},X={class:"flex flex-col md:flex-row gap-2 w-full md:w-auto"},Y={class:"px-1 md:px-8 py-4 flex justify-center"},Z={class:"bg-white dark:bg-gray-800 shadow-sm rounded-lg border border-gray-200 dark:border-gray-700 w-full max-w-7xl"},ee={class:"p-2 bg-gray-50 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center"},te={class:"text-xs text-gray-500 dark:text-gray-400"},re={class:"overflow-x-auto"},ae={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},se={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},ie={class:"px-3 py-2 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-gray-100"},de={class:"flex flex-col"},oe={class:"flex items-center gap-2"},ne={class:"font-bold text-indigo-900 dark:text-indigo-100 tracking-wide"},le={class:"mt-1 flex flex-wrap items-center gap-2 text-xs text-gray-500 dark:text-gray-300"},ce={key:0},xe={key:1,class:"flex items-center gap-1"},ue={class:"px-3 py-2 whitespace-nowrap text-gray-900 dark:text-gray-100"},ye={class:"px-3 py-2 whitespace-nowrap text-gray-900 dark:text-gray-100"},ge={class:"px-3 py-2 whitespace-nowrap"},pe={class:"capitalize"},me={class:"px-3 py-2 whitespace-nowrap"},fe={class:"px-3 py-2 whitespace-nowrap"},ke={key:0,class:"text-sm text-gray-500 dark:text-gray-400"},ve={key:1,class:"text-sm text-gray-400 dark:text-gray-500"},we={class:"px-3 py-2 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},he={class:"px-3 py-2 whitespace-nowrap flex gap-2"},be={key:0},_e={key:0,class:"flex justify-center items-center gap-2 p-2 border-t border-gray-200 dark:border-gray-700"},Ce=["disabled"],Se=["onClick"],Ve=["disabled"],Ue={__name:"Index",props:{payments:{type:Object,default:()=>({data:[]})},filters:{type:Object,default:()=>({})}},setup(a){const f=a,x=$(f.filters.search??""),u=$(f.filters.status??"");function g(s){m.get(route("collector.payments.index",{page:s,search:x.value,status:u.value}),{preserveState:!0,preserveScroll:!0,only:["payments","filters"]})}W([x,u],K(([s,r])=>{m.get(route("collector.payments.index"),{search:s,status:r},{preserveState:!0,preserveScroll:!0,replace:!0,only:["payments","filters"]})},300));function z(s){return s?new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A"}function M(s){return s?new Date(s).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}return(s,r)=>(i(),q(E,null,{header:l(()=>[e("div",Q,[r[4]||(r[4]=e("h2",{class:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200 mb-2 md:mb-0"}," Postpaid Collections ",-1)),e("div",X,[y(F,{modelValue:x.value,"onUpdate:modelValue":r[0]||(r[0]=n=>x.value=n),placeholder:"Search by reference...",class:"w-full md:w-64"},null,8,["modelValue"]),y(I,{modelValue:u.value,"onUpdate:modelValue":r[1]||(r[1]=n=>u.value=n),options:[{value:"",label:"All Statuses"},{value:"pending",label:"Pending Verification"},{value:"verified",label:"Verified"}],class:"w-full md:w-44"},null,8,["modelValue"])])])]),default:l(()=>{var n,k,v,w,h,b;return[e("div",Y,[e("div",Z,[e("div",ee,[r[5]||(r[5]=e("div",null,[e("h3",{class:"text-base font-medium leading-6 text-gray-900 dark:text-gray-100"}," Postpaid Collections "),e("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"}," Payments collected from customers for completed deliveries. ")],-1)),e("div",te," Showing "+d(((k=(n=a.payments)==null?void 0:n.data)==null?void 0:k.length)??0)+" of "+d(((v=a.payments)==null?void 0:v.total)??0)+" entries ",1)]),e("div",re,[e("table",ae,[r[10]||(r[10]=e("thead",{class:"bg-gray-50 dark:bg-gray-700"},[e("tr",null,[e("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Reference #"),e("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Customer"),e("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Amount"),e("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Method"),e("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Status"),e("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Verified By"),e("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Paid At"),e("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",se,[(i(!0),o(A,null,L(((w=a.payments)==null?void 0:w.data)||[],t=>{var p,_,C,S,V,D,N,j,P,B;return i(),o("tr",{key:t.id},[e("td",ie,[e("div",de,[e("div",oe,[r[6]||(r[6]=e("span",{class:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-semibold bg-indigo-100 text-indigo-800 dark:bg-indigo-800 dark:text-indigo-100"}," Reference # ",-1)),e("span",ne,d(((p=t.delivery_request)==null?void 0:p.reference_number)||"DR-"+String(t.delivery_request_id).padStart(6,"0")),1)]),e("div",le,[e("span",null," Delivery ID: DO-"+d(String(t.delivery_request_id).padStart(6,"0")),1),t.created_at?(i(),o("span",ce," | Created: "+d(z(t.created_at)),1)):c("",!0),t.verified_by?(i(),o("span",xe)):c("",!0)])])]),e("td",ue,d(((C=(_=t.delivery_request)==null?void 0:_.sender)==null?void 0:C.name)||((V=(S=t.delivery_request)==null?void 0:S.sender)==null?void 0:V.company_name)||((N=(D=t.delivery_request)==null?void 0:D.receiver)==null?void 0:N.name)||((P=(j=t.delivery_request)==null?void 0:j.receiver)==null?void 0:P.company_name)||"N/A"),1),e("td",ye," â‚±"+d(Number(t.amount).toFixed(2)),1),e("td",ge,[e("span",pe,d(t.method),1)]),e("td",me,[y(O,{status:t.verified_by?"verified":"pending",variant:t.verified_by?"success":"warning"},{default:l(()=>[G(d(t.verified_by?"Verified":"Pending"),1)]),_:2},1032,["status","variant"])]),e("td",fe,[t.verified_by?(i(),o("div",ke,d((B=t.verified_by)==null?void 0:B.name),1)):(i(),o("div",ve," Not verified "))]),e("td",we,d(t.paid_at?M(t.paid_at):"Not paid"),1),e("td",he,[y(R,{type:"button",onClick:U=>H(m).visit(s.route("collector.payments.show",t.id)),class:"!px-2 !py-1.5 !text-xs flex items-center justify-center",title:"View Details"},{default:l(()=>r[7]||(r[7]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0zm6 0a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)])),_:2},1032,["onClick"]),t.can_delete?(i(),q(T,{key:0,type:"button",onClick:U=>s.deletePayment(t.id),class:"!px-2 !py-1.5 !text-xs flex items-center justify-center",title:"Delete Payment"},{default:l(()=>r[8]||(r[8]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),_:2},1032,["onClick"])):c("",!0)])])}),128)),!((h=a.payments)!=null&&h.data)||a.payments.data.length===0?(i(),o("tr",be,r[9]||(r[9]=[e("td",{colspan:"8",class:"px-3 py-2 text-center text-sm text-gray-500 dark:text-gray-400"}," No postpaid collections found ",-1)]))):c("",!0)])])]),((b=a.payments)==null?void 0:b.last_page)>1?(i(),o("div",_e,[e("button",{class:"px-3 py-1 rounded bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200",disabled:a.payments.current_page===1,onClick:r[2]||(r[2]=t=>g(a.payments.current_page-1))}," Prev ",8,Ce),(i(!0),o(A,null,L(a.payments.last_page,t=>(i(),o("button",{key:t,class:J(["px-3 py-1 rounded",{"bg-indigo-600 text-white":a.payments.current_page===t,"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200":a.payments.current_page!==t}]),onClick:p=>g(t)},d(t),11,Se))),128)),e("button",{class:"px-3 py-1 rounded bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200",disabled:a.payments.current_page===a.payments.last_page,onClick:r[3]||(r[3]=t=>g(a.payments.current_page+1))}," Next ",8,Ve)])):c("",!0)])])]}),_:1}))}};export{Ue as default};
