import{C as X,g as Y,i as c,j as Z,d as ee,o as a,w as v,b as e,c as o,e as m,t as s,f as x,s as te,v as p,u as l,x as M,F as h,r as _,L as se,a1 as S,a as A,n as C}from"./app-B0MxlU5m.js";import{E as re}from"./EmployeeLayout-CfA_UWXy.js";import{_ as de}from"./PrimaryButton-Cvq5q4eC.js";import{_ as O}from"./SecondaryButton-BRyA478y.js";import{L as ae}from"./LoadingSpinner-DIQ3eQpu.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./NavLink-RNmN4-k9.js";import"./DangerButton-CMc3f1cK.js";const oe={class:"flex justify-between items-center px-4 sm:px-6"},ne={class:"min-w-0 flex-1"},ie={class:"text-lg sm:text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200 truncate"},le={class:"mt-1 text-sm text-gray-600 dark:text-gray-400 hidden sm:block"},ue={class:"px-4 md:px-6 py-4 max-w-7xl mx-auto"},ce={key:0,class:"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg"},ge={class:"text-xs mt-2"},me={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},xe={class:"lg:col-span-2 space-y-6"},ye={class:"bg-white dark:bg-gray-800 shadow-sm rounded-lg border border-gray-200 dark:border-gray-700"},be={class:"flex flex-col md:flex-row md:items-center md:justify-between p-4 bg-indigo-50 dark:bg-indigo-900/20 border-b border-indigo-200 dark:border-indigo-800"},fe={class:"flex-1"},ke={class:"flex flex-wrap items-center gap-2 mb-2"},pe={class:"text-lg font-bold text-indigo-600 dark:text-indigo-400 tracking-wide"},ve={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-800 dark:text-yellow-100"},he={class:"flex flex-wrap items-center gap-4 text-xs text-gray-600 dark:text-gray-300"},_e={class:"mt-3 md:mt-0"},we={class:"text-2xl font-bold text-indigo-900 dark:text-indigo-100 text-center md:text-right"},je={class:"p-4 md:p-6"},Ae={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6"},Me={class:"bg-gray-50 dark:bg-gray-700/50 p-3 rounded-lg"},Ce={class:"space-y-2 text-sm"},Pe={class:"flex justify-between"},Re={class:"capitalize font-medium text-gray-900 dark:text-gray-100"},Ve={class:"flex justify-between"},De={class:"font-medium text-gray-900 dark:text-gray-100"},Ne={class:"flex justify-between"},Be={class:"font-medium text-gray-900 dark:text-gray-100"},Le={class:"bg-gray-50 dark:bg-gray-700/50 p-3 rounded-lg"},Fe={class:"space-y-2 text-sm"},$e={class:"flex justify-between"},Ie={class:"font-medium text-gray-900 dark:text-gray-100"},Ue={class:"flex justify-between"},Ee={class:"font-medium text-gray-900 dark:text-gray-100"},ze={class:"flex justify-between"},Se={class:"font-medium text-gray-500 dark:text-gray-400 text-xs"},Oe={class:"flex justify-between border-t border-gray-200 dark:border-gray-600 pt-2"},qe={class:"text-gray-600 dark:text-gray-400 font-semibold"},Te={class:"font-bold text-green-600 dark:text-green-400"},He={key:0,class:"flex justify-between"},We={class:"font-medium text-blue-600 dark:text-blue-400"},Ke={class:"bg-white dark:bg-gray-800 shadow-sm rounded-lg border border-gray-200 dark:border-gray-700"},Qe={class:"p-4 bg-blue-50 dark:bg-blue-900/20 border-b border-blue-200 dark:border-blue-800"},Ge={class:"font-medium text-blue-900 dark:text-blue-100 flex items-center gap-2"},Je={class:"p-4 md:p-6"},Xe={class:"mb-6"},Ye={for:"refund_amount",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},Ze={class:"mt-1 relative rounded-md shadow-sm"},et=["max"],tt={class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},st={class:"text-xs text-gray-400"},rt={key:0,class:"mt-1 text-sm text-blue-600 dark:text-blue-400"},dt={key:1,class:"mt-1 text-sm text-red-600 dark:text-red-400"},at={class:"mb-6"},ot=["value"],nt={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},it={class:"mb-6"},lt=["placeholder"],ut={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},ct={class:"mb-6"},gt=["placeholder"],mt={class:"mb-6"},xt={class:"space-y-2"},yt={class:"flex items-center"},bt={class:"flex items-center"},ft={for:"process",class:"ml-3 block text-sm font-medium text-gray-700 dark:text-gray-300"},kt={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},pt={class:"flex justify-end space-x-3 mt-6"},vt={key:0},ht={key:1},_t={class:"lg:col-span-1 space-y-6"},wt={class:"bg-white dark:bg-gray-800 shadow-sm rounded-lg border border-gray-200 dark:border-gray-700"},jt={class:"p-4"},At={class:"mb-4"},Mt={key:0,class:"grid grid-cols-2 gap-2"},Ct=["src","alt","onClick"],Pt={key:1,class:"text-center py-4 bg-gray-50 dark:bg-gray-700/50 rounded"},Rt={key:0,class:"grid grid-cols-2 gap-2"},Vt=["src","alt","onClick"],Dt={key:1,class:"text-center py-4 bg-gray-50 dark:bg-gray-700/50 rounded"},Nt={key:0,class:"mt-4 p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded border border-yellow-200 dark:border-yellow-800"},Bt={class:"text-xs text-yellow-700 dark:text-yellow-300 mb-2"},Lt={class:"text-xs text-yellow-600 dark:text-yellow-400"},Ft={key:0,class:"bg-white dark:bg-gray-800 shadow-sm rounded-lg border border-gray-200 dark:border-gray-700"},$t={class:"p-4 bg-gray-50 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-700"},It={class:"font-medium text-gray-900 dark:text-gray-100 flex items-center gap-2"},Ut={class:"p-4"},Et={class:"space-y-3"},zt={class:"flex justify-between items-start mb-2"},St={class:"text-sm font-medium text-gray-900 dark:text-gray-100 truncate"},Ot={class:"text-xs text-gray-600 dark:text-gray-400 space-y-1"},qt={class:"flex justify-between"},Tt={class:"font-medium"},Ht={class:"flex justify-between"},Wt={key:0,class:"text-red-600 dark:text-red-400 text-xs mt-1"},Kt={key:1,class:"bg-white dark:bg-gray-800 shadow-sm rounded-lg border border-gray-200 dark:border-gray-700"},Qt={class:"p-4 bg-gray-50 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-700"},Gt={class:"font-medium text-gray-900 dark:text-gray-100 flex items-center gap-2"},Jt={class:"p-4"},Xt={class:"space-y-2"},Yt={class:"flex justify-between"},Zt={class:"font-medium"},es={class:"flex justify-between text-xs"},ts={key:0,class:"text-red-600 dark:text-red-400"},ss={key:1,class:"text-green-600 dark:text-green-400"},rs={class:"bg-white dark:bg-gray-800 shadow-sm rounded-lg border border-gray-200 dark:border-gray-700"},ds={class:"p-4"},as={class:"space-y-2"},os=["disabled"],ys={__name:"Edit",props:{refund:Object,maxRefundable:Number,reasonOptions:Object},setup(n){const u=n,i=X({refund_amount:u.refund.refund_amount,reason:u.refund.reason,description:u.refund.description,notes:u.refund.notes,action:"process"}),q=Y(!0),w=c(()=>u.refund.original_amount||0),f=c(()=>{var r;return(r=u.refund.delivery_request)!=null&&r.packages?u.refund.delivery_request.packages.map(t=>{var y;return{...t,isAffected:((y=u.refund.refunded_packages)==null?void 0:y.includes(t.id))||!1}}):[]}),g=c(()=>f.value.filter(r=>r.isAffected)),j=c(()=>g.value.reduce((r,t)=>r+(parseFloat(t.value)||0),0)),P=c(()=>f.value.reduce((r,t)=>r+(parseFloat(t.value)||0),0)),R=c(()=>{if(u.refund.type==="adjustment"){const r=Number(i.refund_amount)||0;return Math.max(0,u.refund.original_amount-r)}return 0}),V=c(()=>{const r=[];return g.value.forEach(t=>{t.photo_url&&Array.isArray(t.photo_url)&&r.push(...t.photo_url)}),r.slice(0,4)}),D=c(()=>{const r=[];return g.value.forEach(t=>{if(t.incident_evidence&&Array.isArray(t.incident_evidence)){const y=t.incident_evidence.map(k=>k.startsWith("http")?k:`/storage/${k}`);r.push(...y)}}),r.slice(0,4)}),T=c(()=>g.value.some(r=>r.incident_description||r.incident_reported_at)),H=c(()=>{const r=g.value.find(t=>t.incident_description);return(r==null?void 0:r.incident_description)||"No incident description provided"}),W=c(()=>{const r=g.value.find(t=>t.incident_reported_at);return r==null?void 0:r.incident_reported_at}),N=c(()=>({refund_id:u.refund.id,original_amount:u.refund.original_amount,maxRefundable_from_props:u.maxRefundable,delivery_fee:w.value,affected_package_values:j.value,total_package_values:P.value,calculated_total:w.value+j.value,refunded_packages:u.refund.refunded_packages,affected_packages_count:g.value.length,all_packages_count:f.value.length}));function K(){}function B(){i.put(route("refunds.update",{refund:u.refund.id}))}function L(r){window.open(r,"_blank")}function Q(r){return r?new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}function G(r){return{damaged_in_transit:"bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-100",lost_in_transit:"bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-100",delivered:"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100",completed:"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100"}[r]||"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-100"}return Z(()=>{console.log("Refund Edit Debug:",N.value),console.log("Affected Packages:",g.value),console.log("All Packages:",f.value)}),(r,t)=>(a(),ee(re,null,{header:v(()=>[e("div",oe,[e("div",ne,[e("h2",ie,s(n.refund.type==="adjustment"?"Process Invoice Adjustment":"Process Refund"),1),e("p",le,s(n.refund.type==="adjustment"?"Negotiate and apply invoice adjustment.":"Negotiate and process refund with customer."),1)]),A(O,{onClick:t[0]||(t[0]=y=>r.$inertia.visit(r.route("refunds.index"))),class:"inline-flex items-center text-sm whitespace-nowrap shrink-0 ml-2"},{default:v(()=>t[10]||(t[10]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1 sm:mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),e("span",{class:"hidden sm:inline"},"Back to Refunds",-1),e("span",{class:"sm:hidden"},"Back",-1)])),_:1})])]),default:v(()=>{var y,k,F,$,I,U,E,z;return[e("div",ue,[q.value?(a(),o("div",ce,[t[11]||(t[11]=e("h3",{class:"text-sm font-medium text-yellow-800"},"Debug Information",-1)),e("pre",ge,s(N.value),1)])):m("",!0),e("div",me,[e("div",xe,[e("div",ye,[e("div",be,[e("div",fe,[e("div",ke,[t[12]||(t[12]=e("span",{class:"inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-indigo-100 text-indigo-800 dark:bg-indigo-800 dark:text-indigo-100 border border-indigo-200 dark:border-indigo-700"}," Reference# ",-1)),e("span",pe,s((y=n.refund.delivery_request)==null?void 0:y.reference_number),1),e("span",ve,s(n.refund.type==="adjustment"?"Pending Adjustment":"Pending Refund"),1)]),e("div",he,[e("span",null,"Type: "+s(n.refund.type_label),1),e("span",null,"Sender: "+s((F=(k=n.refund.delivery_request)==null?void 0:k.sender)==null?void 0:F.name),1)])]),e("div",_e,[e("div",we," ₱"+s(Number(n.refund.original_amount).toFixed(2)),1),t[13]||(t[13]=e("div",{class:"text-xs text-gray-600 dark:text-gray-300 text-center md:text-right"}," Original Amount ",-1))])]),e("div",je,[e("div",Ae,[e("div",Me,[t[17]||(t[17]=e("h4",{class:"text-sm font-medium text-gray-900 dark:text-gray-100 mb-3 flex items-center gap-2"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]),x(" Delivery Information ")],-1)),e("div",Ce,[e("div",Pe,[t[14]||(t[14]=e("span",{class:"text-gray-600 dark:text-gray-400"},"Payment Type:",-1)),e("span",Re,s(($=n.refund.delivery_request)==null?void 0:$.payment_type),1)]),e("div",Ve,[t[15]||(t[15]=e("span",{class:"text-gray-600 dark:text-gray-400"},"Sender:",-1)),e("span",De,s((U=(I=n.refund.delivery_request)==null?void 0:I.sender)==null?void 0:U.name),1)]),e("div",Ne,[t[16]||(t[16]=e("span",{class:"text-gray-600 dark:text-gray-400"},"Receiver:",-1)),e("span",Be,s((z=(E=n.refund.delivery_request)==null?void 0:E.receiver)==null?void 0:z.name),1)])])]),e("div",Le,[t[22]||(t[22]=e("h4",{class:"text-sm font-medium text-gray-900 dark:text-gray-100 mb-3 flex items-center gap-2"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})]),x(" Financial Details ")],-1)),e("div",Fe,[e("div",$e,[t[18]||(t[18]=e("span",{class:"text-gray-600 dark:text-gray-400"},"Delivery Fee:",-1)),e("span",Ie,"₱"+s(w.value),1)]),e("div",Ue,[t[19]||(t[19]=e("span",{class:"text-gray-600 dark:text-gray-400"},"Affected Package Values:",-1)),e("span",Ee,"₱"+s(j.value.toFixed(2)),1)]),e("div",ze,[t[20]||(t[20]=e("span",{class:"text-gray-600 dark:text-gray-400"},"Total Package Values:",-1)),e("span",Se,"₱"+s(P.value.toFixed(2)),1)]),e("div",Oe,[e("span",qe,"Max "+s(n.refund.type==="adjustment"?"Adjustable":"Refundable")+":",1),e("span",Te,"₱"+s(n.maxRefundable),1)]),n.refund.type==="adjustment"?(a(),o("div",He,[t[21]||(t[21]=e("span",{class:"text-gray-600 dark:text-gray-400"},"New Amount Due:",-1)),e("span",We,"₱"+s(R.value),1)])):m("",!0)])])])])]),e("form",{onSubmit:te(B,["prevent"])},[e("div",Ke,[e("div",Qe,[e("h3",Ge,[t[23]||(t[23]=e("svg",{class:"w-5 h-5 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})],-1)),x(" "+s(n.refund.type==="adjustment"?"Adjustment Negotiation":"Refund Negotiation"),1)])]),e("div",Je,[e("div",Xe,[e("label",Ye,s(n.refund.type==="adjustment"?"Adjustment Amount *":"Refund Amount *"),1),e("div",Ze,[t[24]||(t[24]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("span",{class:"text-gray-500 sm:text-sm"},"₱")],-1)),p(e("input",{"onUpdate:modelValue":t[1]||(t[1]=d=>l(i).refund_amount=d),type:"number",step:"0.01",min:"0",max:n.maxRefundable,id:"refund_amount",class:"block w-full pl-7 pr-12 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white sm:text-sm",placeholder:"0.00",onInput:K},null,40,et),[[M,l(i).refund_amount]])]),e("p",tt,[x(" Maximum "+s(n.refund.type==="adjustment"?"adjustable":"refundable")+" amount: ₱"+s(n.maxRefundable)+" ",1),e("span",st,"(Delivery Fee: ₱"+s(w.value)+" + Affected Packages: ₱"+s(j.value.toFixed(2))+")",1)]),n.refund.type==="adjustment"?(a(),o("p",rt," New amount due: ₱"+s(R.value),1)):m("",!0),l(i).errors.refund_amount?(a(),o("p",dt,s(l(i).errors.refund_amount),1)):m("",!0)]),e("div",at,[t[26]||(t[26]=e("label",{for:"reason",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Reason * ",-1)),p(e("select",{"onUpdate:modelValue":t[2]||(t[2]=d=>l(i).reason=d),id:"reason",class:"mt-1 block w-full border border-gray-300 dark:border-gray-600 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white sm:text-sm"},[t[25]||(t[25]=e("option",{value:""},"Select a reason",-1)),(a(!0),o(h,null,_(n.reasonOptions,(d,b)=>(a(),o("option",{key:b,value:b},s(d),9,ot))),128))],512),[[se,l(i).reason]]),l(i).errors.reason?(a(),o("p",nt,s(l(i).errors.reason),1)):m("",!0)]),e("div",it,[t[27]||(t[27]=e("label",{for:"description",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Description * ",-1)),p(e("textarea",{"onUpdate:modelValue":t[3]||(t[3]=d=>l(i).description=d),id:"description",rows:"3",class:"mt-1 block w-full border border-gray-300 dark:border-gray-600 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white sm:text-sm",placeholder:n.refund.type==="adjustment"?"Describe the adjustment reason and negotiation details...":"Describe the refund reason and negotiation details..."},null,8,lt),[[M,l(i).description]]),l(i).errors.description?(a(),o("p",ut,s(l(i).errors.description),1)):m("",!0)]),e("div",ct,[t[28]||(t[28]=e("label",{for:"notes",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Internal Notes ",-1)),p(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=d=>l(i).notes=d),id:"notes",rows:"2",class:"mt-1 block w-full border border-gray-300 dark:border-gray-600 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white sm:text-sm",placeholder:n.refund.type==="adjustment"?"Internal notes about the adjustment...":"Internal notes about the negotiation..."},null,8,gt),[[M,l(i).notes]])]),e("div",mt,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3"}," Action ",-1)),e("div",xt,[e("div",yt,[p(e("input",{"onUpdate:modelValue":t[5]||(t[5]=d=>l(i).action=d),id:"update_pending",value:"update_pending",type:"radio",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 dark:border-gray-600 dark:bg-gray-700"},null,512),[[S,l(i).action]]),t[29]||(t[29]=e("label",{for:"update_pending",class:"ml-3 block text-sm font-medium text-gray-700 dark:text-gray-300"}," Update negotiation details (keep as pending) ",-1))]),e("div",bt,[p(e("input",{"onUpdate:modelValue":t[6]||(t[6]=d=>l(i).action=d),id:"process",value:"process",type:"radio",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 dark:border-gray-600 dark:bg-gray-700"},null,512),[[S,l(i).action]]),e("label",ft,s(n.refund.type==="adjustment"?"Apply adjustment immediately":"Process refund immediately"),1)])]),l(i).errors.action?(a(),o("p",kt,s(l(i).errors.action),1)):m("",!0)])])]),e("div",pt,[A(O,{onClick:t[7]||(t[7]=d=>r.$inertia.visit(r.route("refunds.show",{refund:n.refund.id}))),class:"inline-flex items-center"},{default:v(()=>t[31]||(t[31]=[x(" Cancel ")])),_:1}),A(de,{type:"submit",disabled:l(i).processing,class:"inline-flex items-center"},{default:v(()=>[l(i).processing?(a(),o("span",vt,[A(ae,{size:"xs",class:"mr-2"}),t[32]||(t[32]=x(" Processing... "))])):(a(),o("span",ht,s(l(i).action==="process"?n.refund.type==="adjustment"?"Apply Adjustment":"Process Refund":"Update Details"),1))]),_:1},8,["disabled"])])],32)]),e("div",_t,[e("div",wt,[t[38]||(t[38]=e("div",{class:"p-4 bg-gray-50 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-700"},[e("h3",{class:"font-medium text-gray-900 dark:text-gray-100 flex items-center gap-2"},[e("svg",{class:"w-5 h-5 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})]),x(" Evidence Comparison ")])],-1)),e("div",jt,[e("div",At,[t[34]||(t[34]=e("h4",{class:"text-sm font-medium text-gray-900 dark:text-gray-100 mb-2"},"Original Package Photos",-1)),V.value.length>0?(a(),o("div",Mt,[(a(!0),o(h,null,_(V.value,(d,b)=>(a(),o("div",{key:b,class:"relative"},[e("img",{src:d,alt:`Original package photo ${b+1}`,class:"w-full h-20 object-cover rounded border border-gray-200 dark:border-gray-600 cursor-pointer hover:opacity-80 transition-opacity",onClick:J=>L(d)},null,8,Ct)]))),128))])):(a(),o("div",Pt,t[33]||(t[33]=[e("svg",{class:"mx-auto h-8 w-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1),e("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},"No original photos",-1)])))]),e("div",null,[t[36]||(t[36]=e("h4",{class:"text-sm font-medium text-gray-900 dark:text-gray-100 mb-2"},"Incident Evidence",-1)),D.value.length>0?(a(),o("div",Rt,[(a(!0),o(h,null,_(D.value,(d,b)=>(a(),o("div",{key:b,class:"relative"},[e("img",{src:d,alt:`Incident evidence ${b+1}`,class:"w-full h-20 object-cover rounded border border-gray-200 dark:border-gray-600 cursor-pointer hover:opacity-80 transition-opacity",onClick:J=>L(d)},null,8,Vt)]))),128))])):(a(),o("div",Dt,t[35]||(t[35]=[e("svg",{class:"mx-auto h-8 w-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1),e("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},"No incident evidence",-1)])))]),T.value?(a(),o("div",Nt,[t[37]||(t[37]=e("h4",{class:"text-sm font-medium text-yellow-800 dark:text-yellow-200 mb-2"},"Incident Report",-1)),e("p",Bt,s(H.value),1),e("div",Lt," Reported: "+s(Q(W.value)),1)])):m("",!0)])]),g.value.length>0?(a(),o("div",Ft,[e("div",$t,[e("h3",It,[t[39]||(t[39]=e("svg",{class:"w-5 h-5 text-orange-600 dark:text-orange-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})],-1)),x(" Affected Packages ("+s(g.value.length)+") ",1)])]),e("div",Ut,[e("div",Et,[(a(!0),o(h,null,_(g.value,d=>(a(),o("div",{key:d.id,class:"bg-gray-50 dark:bg-gray-700/50 p-3 rounded-lg border border-gray-200 dark:border-gray-600"},[e("div",zt,[e("h4",St,s(d.item_name||"Unnamed Package"),1),e("span",{class:C([G(d.status),"inline-flex px-2 text-xs font-semibold leading-5 rounded-full"])},s(d.status),3)]),e("div",Ot,[e("div",qt,[t[40]||(t[40]=e("span",null,"Value:",-1)),e("span",Tt,"₱"+s(d.value||"0.00"),1)]),e("div",Ht,[t[41]||(t[41]=e("span",null,"Weight:",-1)),e("span",null,s(d.weight)+" kg",1)]),d.incident_description?(a(),o("div",Wt,s(d.incident_description),1)):m("",!0)])]))),128))])])])):m("",!0),f.value.length>0?(a(),o("div",Kt,[e("div",Qt,[e("h3",Gt,[t[42]||(t[42]=e("svg",{class:"w-5 h-5 text-gray-600 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})],-1)),x(" All Packages ("+s(f.value.length)+") ",1)])]),e("div",Jt,[e("div",Xt,[(a(!0),o(h,null,_(f.value,d=>(a(),o("div",{key:d.id,class:C(["text-xs text-gray-600 dark:text-gray-400 p-2 rounded border",d.isAffected?"bg-red-50 border-red-200 dark:bg-red-900/20 dark:border-red-800":"bg-gray-50 border-gray-200 dark:bg-gray-700/50 dark:border-gray-600"])},[e("div",Yt,[e("span",Zt,s(d.item_name),1),e("span",{class:C(d.isAffected?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400")}," ₱"+s(d.value),3)]),e("div",es,[e("span",null,s(d.status),1),d.isAffected?(a(),o("span",ts,"● Affected")):(a(),o("span",ss,"● OK"))])],2))),128))])])])):m("",!0),e("div",rs,[t[43]||(t[43]=e("div",{class:"p-4 bg-gray-50 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-700"},[e("h3",{class:"font-medium text-gray-900 dark:text-gray-100 flex items-center gap-2"},[e("svg",{class:"w-5 h-5 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})]),x(" Quick Actions ")])],-1)),e("div",ds,[e("div",as,[e("button",{type:"button",onClick:t[8]||(t[8]=d=>{l(i).action="process",B()}),disabled:l(i).processing,class:"w-full text-left px-3 py-2 text-sm bg-green-50 hover:bg-green-100 dark:bg-green-900/20 dark:hover:bg-green-900/30 text-green-700 dark:text-green-300 rounded border border-green-200 dark:border-green-800 transition-colors"},s(n.refund.type==="adjustment"?"Apply Full Adjustment":"Process Full Refund"),9,os),e("button",{type:"button",onClick:t[9]||(t[9]=d=>r.$inertia.visit(r.route("refunds.show",{refund:n.refund.id}))),class:"w-full text-left px-3 py-2 text-sm bg-blue-50 hover:bg-blue-100 dark:bg-blue-900/20 dark:hover:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded border border-blue-200 dark:border-blue-800 transition-colors"}," View Details ")])])])])])])]}),_:1}))}};export{ys as default};
