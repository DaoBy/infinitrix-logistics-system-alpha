import{M as C,g as v,C as N,i as P,h as U,c as r,o as u,b as t,e as c,t as g,a as i,u as s,w as b,f as d,s as w,v as q,P as B,a0 as T,Y as D,W as I}from"./app-Xu1-QTPS.js";import{_ as x}from"./InputError-D9nXzJOf.js";import{_ as h}from"./InputLabel-BxIgZQZ8.js";import{_ as S}from"./PrimaryButton-CQvisOOW.js";import{T as V}from"./TextInput-42f6rjVr.js";/* empty css                                                                  */import"./_plugin-vue_export-helper-DlAUqK2U.js";const M={key:0,class:"mb-6 p-4 bg-green-50 rounded-lg border border-green-200"},R={class:"text-green-800"},W={key:1,class:"mb-6 p-4 bg-blue-50 rounded-lg border border-blue-200"},Y={class:"flex-1"},F={class:"mt-3 text-sm text-blue-600"},A={key:0,class:"mt-2 text-sm text-amber-600"},j={key:0},z={class:"mt-2 text-sm text-gray-800"},G={class:"mt-2 text-sm font-medium text-green-600"},H={class:"flex items-center gap-4 pt-2"},J={key:0,class:"text-sm text-gray-600"},te={__name:"UpdateProfileInformationForm",props:{mustVerifyEmail:{type:Boolean},status:{type:String}},setup(_){const l=C().props.auth.user,f=v(!1),m=v(!1),y=v(""),p=v(!1),a=N({name:l.name,email:l.email}),k=P(()=>C().props.flash.status);U(()=>a.email,(o,e)=>{o!==e&&o!==l.email?m.value=!0:m.value=!1});const E=()=>{m.value?a.patch(route("profile.update.with-verification"),{onSuccess:()=>{f.value=!0}}):a.patch(route("profile.update"))},$=()=>{p.value=!0,I.post(route("verification.code.verify"),{code:y.value},{onSuccess:()=>{},onError:o=>{o.code&&(a.errors.code=o.code)},onFinish:()=>{p.value=!1}})};return(o,e)=>(u(),r("section",null,[e[10]||(e[10]=t("header",{class:"mb-6"},[t("h2",{class:"text-lg font-medium text-gray-900"}," Profile Information "),t("p",{class:"mt-1 text-sm text-gray-600"}," Update your account's profile information and email address. ")],-1)),k.value?(u(),r("div",M,[t("p",R,g(k.value),1)])):c("",!0),f.value?(u(),r("div",W,[e[6]||(e[6]=t("h3",{class:"font-medium text-blue-800 mb-2"},"Email Verification Required",-1)),e[7]||(e[7]=t("p",{class:"text-sm text-blue-700 mb-3"}," We've sent a verification code to your new email address. Please check your inbox and enter the code below to complete the email change. ",-1)),t("form",{onSubmit:w($,["prevent"]),class:"flex items-end gap-2"},[t("div",Y,[i(h,{for:"verificationCode",value:"Verification Code"}),i(V,{id:"verificationCode",type:"text",class:"mt-1 block w-full",modelValue:y.value,"onUpdate:modelValue":e[0]||(e[0]=n=>y.value=n),maxlength:"6",required:"",autofocus:"",placeholder:"Enter 6-digit code"},null,8,["modelValue"]),i(x,{class:"mt-1",message:s(a).errors.code},null,8,["message"])]),i(S,{type:"submit",disabled:p.value},{default:b(()=>[d(g(p.value?"Verifying...":"Verify"),1)]),_:1},8,["disabled"])],32),t("p",F,[e[5]||(e[5]=d(" Didn't receive the code? ")),t("button",{onClick:e[1]||(e[1]=n=>o.$inertia.post(o.route("verification.send"))),class:"underline ml-1"}," Resend Code ")])])):c("",!0),t("form",{onSubmit:w(E,["prevent"]),class:"space-y-4"},[t("div",null,[i(h,{for:"name",value:"Name *"}),i(V,{id:"name",type:"text",class:"mt-1 block w-full",modelValue:s(a).name,"onUpdate:modelValue":e[2]||(e[2]=n=>s(a).name=n),required:"",autofocus:"",autocomplete:"name"},null,8,["modelValue"]),i(x,{class:"mt-1",message:s(a).errors.name},null,8,["message"])]),t("div",null,[i(h,{for:"email",value:"Email *"}),i(V,{id:"email",type:"email",class:"mt-1 block w-full",modelValue:s(a).email,"onUpdate:modelValue":e[3]||(e[3]=n=>s(a).email=n),required:"",autocomplete:"username",disabled:f.value||s(l).pending_email},null,8,["modelValue","disabled"]),i(x,{class:"mt-1",message:s(a).errors.email},null,8,["message"]),s(l).pending_email?(u(),r("p",A,[d(" You have a pending email change to: "+g(s(l).pending_email)+". ",1),t("button",{onClick:e[4]||(e[4]=n=>o.$inertia.post(o.route("verification.send"))),class:"text-blue-600 underline"}," Resend verification code ")])):c("",!0)]),_.mustVerifyEmail&&s(l).email_verified_at===null&&!m.value?(u(),r("div",j,[t("p",z,[e[9]||(e[9]=d(" Your email address is unverified. ")),i(s(B),{href:o.route("verification.send"),method:"post",as:"button",class:"rounded-md text-sm text-blue-600 underline hover:text-blue-800 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"},{default:b(()=>e[8]||(e[8]=[d(" Click here to re-send the verification email. ")])),_:1},8,["href"])]),q(t("div",G," A new verification link has been sent to your email address. ",512),[[T,_.status==="verification-link-sent"]])])):c("",!0),t("div",H,[i(S,{disabled:s(a).processing||s(l).pending_email&&!f.value},{default:b(()=>[d(g(m.value?"Send Verification Code":"Save Changes"),1)]),_:1},8,["disabled"]),i(D,{"enter-active-class":"transition ease-in-out","enter-from-class":"opacity-0","leave-active-class":"transition ease-in-out","leave-to-class":"opacity-0"},{default:b(()=>[s(a).recentlySuccessful?(u(),r("p",J," Saved. ")):c("",!0)]),_:1})])],32)]))}};export{te as default};
