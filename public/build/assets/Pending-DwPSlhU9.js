import{E as fe}from"./EmployeeLayout-CgMY_n5V.js";import{_ as be}from"./SearchInput-BSEud9IK.js";import{S as ke}from"./SelectInput-BACJkmZB.js";import{_ as _e}from"./PrimaryButton-eC2eu5yQ.js";import{_ as re}from"./SecondaryButton-f4DzqSLc.js";import{D as ae}from"./DangerButton-B7_oj2jq.js";import{_ as B}from"./Checkbox-Dtno7VqR.js";import{_ as z}from"./InputLabel-DydH0wB0.js";import{g as u,h as we,W as P,d as se,o as x,w as l,b as e,a,c as v,e as N,t as s,F as le,r as oe,n as I,ad as de,a4 as ne,a5 as ie,f as i,a6 as ue,a0 as he,a7 as ge,ae as ce}from"./app-BllHWhcy.js";import{d as Ce}from"./debounce-Bw3YwbKH.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./NavLink-BG8uMyS8.js";/* empty css                                                                    */const Ve={class:"flex flex-col md:flex-row justify-between items-start md:items-center px-2 md:px-8 py-4 max-w-7xl mx-auto w-full"},qe={class:"flex flex-col md:flex-row gap-2 w-full md:w-auto"},De={class:"px-1 md:px-8 py-4 flex justify-center"},Se={class:"bg-white dark:bg-gray-800 shadow-sm rounded-lg border border-gray-200 dark:border-gray-700 w-full max-w-7xl"},Me={class:"p-2 bg-gray-50 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center"},Ue={class:"text-xs text-gray-500 dark:text-gray-400"},je={class:"overflow-x-auto"},Pe={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},Ne={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},$e={class:"px-3 py-2 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-gray-100"},Re={class:"flex flex-col"},Ae={class:"flex items-center gap-2"},Be={class:"font-bold text-indigo-900 dark:text-indigo-100 tracking-wide"},ze={class:"mt-1 flex flex-wrap items-center gap-2 text-xs text-gray-500 dark:text-gray-300"},Ie={key:0},Te={class:"px-3 py-2 whitespace-nowrap text-gray-900 dark:text-gray-100"},Fe={class:"px-3 py-2 whitespace-nowrap text-gray-900 dark:text-gray-100"},Le={class:"px-3 py-2 whitespace-nowrap"},Ee={class:"px-3 py-2 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400"},Oe={class:"px-3 py-2 whitespace-nowrap flex gap-2"},We={key:0},Ge={key:0,class:"flex justify-center items-center gap-2 p-2 border-t border-gray-200 dark:border-gray-700"},He=["disabled"],Je=["onClick"],Ke=["disabled"],Qe={class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},Xe={class:"font-bold text-indigo-900 dark:text-indigo-100"},Ye={class:"space-y-4"},Ze={class:"bg-red-50 dark:bg-red-900/30 rounded-lg p-4 border border-red-200 dark:border-red-700"},et={class:"space-y-2 mb-4"},tt={class:"flex items-center space-x-2"},rt={class:"flex items-center space-x-2"},at={class:"flex items-center space-x-2"},st={class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},lt={class:"font-bold text-indigo-900 dark:text-indigo-100"},ot={class:"space-y-6"},dt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},nt={class:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700"},it={class:"text-sm text-gray-900 dark:text-gray-100 font-medium"},ut={class:"text-xs text-gray-600 dark:text-gray-400"},gt={class:"text-xs text-gray-600 dark:text-gray-400 break-words"},ct={class:"bg-gray-50 dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700"},xt={class:"text-sm text-gray-900 dark:text-gray-100 font-medium"},yt={class:"text-xs text-gray-600 dark:text-gray-400"},vt={class:"text-xs text-gray-600 dark:text-gray-400 break-words"},pt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},mt={class:"text-xs text-gray-500 dark:text-gray-400 mb-1"},ft={class:"text-xs text-gray-500 dark:text-gray-400 mb-1"},bt={class:"text-xs text-gray-500 dark:text-gray-400 mb-1"},kt={class:"text-xs text-gray-500 dark:text-gray-400 mb-1"},$t={__name:"Pending",props:{deliveries:Object,filters:Object},setup(n){const T=n,S=u(T.filters.search||""),M=u(T.filters.status||""),$=d=>{P.get(route("collector.payments.pending"),{page:d,search:S.value,status:M.value},{preserveState:!0,preserveScroll:!0})};we([S,M],Ce(([d,t])=>{P.get(route("collector.payments.pending"),{search:d,status:t},{preserveState:!0,preserveScroll:!0,replace:!0})},300));const U=u(!1),p=u(null),m=u(""),b=u({}),k=u(!1),g=u([]);function xe(d){p.value=d,m.value="",b.value={},U.value=!0}function R(){U.value=!1,p.value=null,m.value="",b.value={},g.value=[]}function ye(){if(!p.value)return;k.value=!0,b.value={};const d=[...g.value];m.value.trim()&&d.push(m.value.trim()),P.post(route("collector.payments.mark-uncollectible",p.value.delivery_request_id),{non_payment_reason:d.join("; ")},{preserveScroll:!0,onSuccess:()=>{k.value=!1,R(),g.value=[]},onError:t=>{b.value=t,k.value=!1}})}function ve(d){P.visit(route("collector.payments.create",d))}function A(d){return d?new Date(d).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A"}const j=u(!1),o=u(null);function pe(d){o.value=d,j.value=!0}function me(){j.value=!1,o.value=null}return(d,t)=>(x(),se(fe,null,{header:l(()=>[e("div",Ve,[t[10]||(t[10]=e("h2",{class:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200 mb-2 md:mb-0"}," Pending Collections ",-1)),e("div",qe,[a(be,{modelValue:S.value,"onUpdate:modelValue":t[0]||(t[0]=f=>S.value=f),placeholder:"Search by reference, sender, or receiver...",class:"w-full md:w-64"},null,8,["modelValue"]),a(ke,{modelValue:M.value,"onUpdate:modelValue":t[1]||(t[1]=f=>M.value=f),options:[{value:"",label:"All Statuses"},{value:"pending",label:"Pending"},{value:"pending_payment",label:"Pending Payment"},{value:"collected",label:"Collected"},{value:"uncollectible",label:"Uncollectible"}],class:"w-full md:w-44"},null,8,["modelValue"])])])]),default:l(()=>{var f,F,L,E,O,W;return[e("div",De,[e("div",Se,[e("div",Me,[t[11]||(t[11]=e("div",null,[e("h3",{class:"text-base font-medium leading-6 text-gray-900 dark:text-gray-100"}," Pending Collections "),e("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"}," Deliveries that are awaiting payment collection from customers. ")],-1)),e("div",Ue," Showing "+s(((F=(f=n.deliveries)==null?void 0:f.data)==null?void 0:F.length)??0)+" of "+s(((L=n.deliveries)==null?void 0:L.total)??0)+" entries ",1)]),e("div",je,[e("table",Pe,[t[17]||(t[17]=e("thead",{class:"bg-gray-50 dark:bg-gray-700"},[e("tr",null,[e("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Reference"),e("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Sender"),e("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Receiver"),e("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Amount"),e("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Date"),e("th",{class:"px-3 py-2 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",Ne,[(x(!0),v(le,null,oe(((E=n.deliveries)==null?void 0:E.data)||[],r=>{var c,y,_,w,h,C,V,q;return x(),v("tr",{key:r.id,class:I({"bg-red-100 dark:bg-red-900/30":((c=r.delivery_request)==null?void 0:c.payment_due_date)&&new Date(r.delivery_request.payment_due_date)<new Date&&r.delivery_request.payment_status!=="collected"})},[e("td",$e,[e("div",Re,[e("div",Ae,[t[12]||(t[12]=e("span",{class:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-semibold bg-indigo-100 text-indigo-800 dark:bg-indigo-800 dark:text-indigo-100"}," Reference # ",-1)),e("span",Be,s(((y=r.delivery_request)==null?void 0:y.reference_number)||`DR-${String(r.delivery_request_id).padStart(6,"0")}`),1)]),e("div",ze,[e("span",null," Delivery ID: DO-"+s(String(r.delivery_request_id).padStart(6,"0")),1),r.created_at?(x(),v("span",Ie," | Created: "+s(A(r.created_at)),1)):N("",!0)])])]),e("td",Te,s(((w=(_=r.delivery_request)==null?void 0:_.sender)==null?void 0:w.name)||"N/A"),1),e("td",Fe,s(((C=(h=r.delivery_request)==null?void 0:h.receiver)==null?void 0:C.name)||"N/A"),1),e("td",Le," â‚±"+s(((V=r.delivery_request)==null?void 0:V.total_price)!==void 0&&((q=r.delivery_request)==null?void 0:q.total_price)!==null?(parseFloat(r.delivery_request.total_price)||0).toFixed(2):"0.00"),1),e("td",Ee,s(r.created_at?A(r.created_at):""),1),e("td",Oe,[a(_e,{type:"button",onClick:D=>ve(r.delivery_request_id),class:"!px-2 !py-1.5 !text-xs flex items-center justify-center",title:"Collect Payment"},{default:l(()=>t[13]||(t[13]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)])),_:2},1032,["onClick"]),a(re,{type:"button",onClick:D=>pe(r),class:"!px-2 !py-1.5 !text-xs flex items-center justify-center",title:"View Info"},{default:l(()=>t[14]||(t[14]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0zm6 0a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)])),_:2},1032,["onClick"]),a(ae,{type:"button",onClick:D=>xe(r),class:"!px-2 !py-1.5 !text-xs flex items-center justify-center",title:"Mark Uncollectible"},{default:l(()=>t[15]||(t[15]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),_:2},1032,["onClick"])])],2)}),128)),!((O=n.deliveries)!=null&&O.data)||n.deliveries.data.length===0?(x(),v("tr",We,t[16]||(t[16]=[e("td",{colspan:"6",class:"px-3 py-2 text-center text-sm text-gray-500 dark:text-gray-400"}," No pending collections found ",-1)]))):N("",!0)])])]),((W=n.deliveries)==null?void 0:W.last_page)>1?(x(),v("div",Ge,[e("button",{class:"px-3 py-1 rounded bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200",disabled:n.deliveries.current_page===1,onClick:t[2]||(t[2]=r=>$(n.deliveries.current_page-1))}," Prev ",8,He),(x(!0),v(le,null,oe(n.deliveries.last_page,r=>(x(),v("button",{key:r,class:I(["px-3 py-1 rounded",{"bg-indigo-600 text-white":n.deliveries.current_page===r,"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200":n.deliveries.current_page!==r}]),onClick:c=>$(r)},s(r),11,Je))),128)),e("button",{class:"px-3 py-1 rounded bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200",disabled:n.deliveries.current_page===n.deliveries.last_page,onClick:t[3]||(t[3]=r=>$(n.deliveries.current_page+1))}," Next ",8,Ke)])):N("",!0)])]),a(de,{modelValue:U.value,"onUpdate:modelValue":t[8]||(t[8]=r=>U.value=r),"max-width":"500"},{default:l(()=>[a(ne,{class:"border border-gray-200 dark:border-gray-700 rounded-lg"},{default:l(()=>[a(ie,{class:"pb-0 border-b border-gray-100 dark:border-gray-700 relative"},{default:l(()=>{var r,c,y;return[e("div",null,[t[19]||(t[19]=e("span",{class:"text-lg font-semibold text-red-700 dark:text-red-300"},"Mark as Uncollectible",-1)),e("div",Qe,[t[18]||(t[18]=i(" Reference: ")),e("span",Xe,s(((c=(r=p.value)==null?void 0:r.delivery_request)==null?void 0:c.reference_number)||`DR-${String((y=p.value)==null?void 0:y.delivery_request_id).padStart(6,"0")}`),1)])]),e("button",{type:"button",onClick:R,class:"absolute top-3 right-3 text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 focus:outline-none","aria-label":"Close"},t[20]||(t[20]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)]))]}),_:1}),a(ue,{class:"p-6"},{default:l(()=>[e("div",Ye,[e("div",Ze,[t[24]||(t[24]=e("div",{class:"text-sm text-gray-900 dark:text-gray-100 font-medium mb-2"}," Please select the reason(s) why this delivery cannot be collected. ",-1)),e("div",et,[e("div",tt,[a(B,{value:"Unavailable",modelValue:g.value,"onUpdate:modelValue":t[4]||(t[4]=r=>g.value=r),class:"shadow-black/50"},null,8,["modelValue"]),a(z,null,{default:l(()=>t[21]||(t[21]=[i("Unavailable")])),_:1})]),e("div",rt,[a(B,{value:"Missing Payment Proof",modelValue:g.value,"onUpdate:modelValue":t[5]||(t[5]=r=>g.value=r),class:"shadow-black/50"},null,8,["modelValue"]),a(z,null,{default:l(()=>t[22]||(t[22]=[i("Missing Payment Proof")])),_:1})]),e("div",at,[a(B,{value:"Wrong Transaction Information",modelValue:g.value,"onUpdate:modelValue":t[6]||(t[6]=r=>g.value=r),class:"shadow-black/50"},null,8,["modelValue"]),a(z,null,{default:l(()=>t[23]||(t[23]=[i("Wrong Transaction Information")])),_:1})])]),a(he,{modelValue:m.value,"onUpdate:modelValue":t[7]||(t[7]=r=>m.value=r),label:"Other reason (optional)",rows:"2","error-messages":b.value.non_payment_reason,class:"mt-2"},null,8,["modelValue","error-messages"])])])]),_:1}),a(ge,{class:"px-6 pb-4"},{default:l(()=>[a(ce),a(re,{type:"button",onClick:R},{default:l(()=>t[25]||(t[25]=[i(" Cancel ")])),_:1}),a(ae,{type:"button",disabled:k.value,class:I({"opacity-50":k.value}),onClick:ye},{default:l(()=>t[26]||(t[26]=[i(" Mark as Uncollectible ")])),_:1},8,["disabled","class"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(de,{modelValue:j.value,"onUpdate:modelValue":t[9]||(t[9]=r=>j.value=r),"max-width":"600"},{default:l(()=>[o.value?(x(),se(ne,{key:0,class:"border border-gray-200 dark:border-gray-700 rounded-lg"},{default:l(()=>[a(ie,{class:"pb-0 border-b border-gray-100 dark:border-gray-700 relative"},{default:l(()=>{var r;return[e("div",null,[t[28]||(t[28]=e("span",{class:"text-lg font-semibold text-gray-900 dark:text-gray-100"},"Delivery Request Details",-1)),e("div",st,[t[27]||(t[27]=i(" Reference: ")),e("span",lt,s(((r=o.value.delivery_request)==null?void 0:r.reference_number)||`DR-${String(o.value.delivery_request_id).padStart(6,"0")}`),1)])]),e("button",{type:"button",onClick:me,class:"absolute top-3 right-3 text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 focus:outline-none","aria-label":"Close"},t[29]||(t[29]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)]))]}),_:1}),a(ue,{class:"p-6"},{default:l(()=>{var r,c,y,_,w,h,C,V,q,D,G,H,J,K,Q,X,Y,Z,ee,te;return[e("div",ot,[e("div",dt,[e("div",nt,[t[30]||(t[30]=e("h4",{class:"font-semibold text-indigo-700 dark:text-indigo-200 mb-2 flex items-center gap-1"},[e("svg",{class:"w-4 h-4 text-indigo-400",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})]),i(" Sender ")],-1)),e("div",it,s(((c=(r=o.value.delivery_request)==null?void 0:r.sender)==null?void 0:c.name)||"N/A"),1),e("div",ut,s(((_=(y=o.value.delivery_request)==null?void 0:y.sender)==null?void 0:_.mobile)||"â€”"),1),e("div",gt,s(((h=(w=o.value.delivery_request)==null?void 0:w.sender)==null?void 0:h.address)||"â€”"),1)]),e("div",ct,[t[31]||(t[31]=e("h4",{class:"font-semibold text-indigo-700 dark:text-indigo-200 mb-2 flex items-center gap-1"},[e("svg",{class:"w-4 h-4 text-indigo-400",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})]),i(" Receiver ")],-1)),e("div",xt,s(((V=(C=o.value.delivery_request)==null?void 0:C.receiver)==null?void 0:V.name)||"N/A"),1),e("div",yt,s(((D=(q=o.value.delivery_request)==null?void 0:q.receiver)==null?void 0:D.mobile)||"â€”"),1),e("div",vt,s(((H=(G=o.value.delivery_request)==null?void 0:G.receiver)==null?void 0:H.address)||"â€”"),1)])]),e("div",pt,[e("div",null,[e("div",mt,[t[32]||(t[32]=e("span",{class:"font-semibold"},"Region:",-1)),i(" "+s(((K=(J=o.value.delivery_request)==null?void 0:J.drop_off_region)==null?void 0:K.name)||((X=(Q=o.value.delivery_request)==null?void 0:Q.dropOffRegion)==null?void 0:X.name)||"N/A"),1)]),e("div",ft,[t[33]||(t[33]=e("span",{class:"font-semibold"},"Notes:",-1)),i(" "+s(((Y=o.value.delivery_request)==null?void 0:Y.notes)||"None"),1)])]),e("div",null,[e("div",bt,[t[34]||(t[34]=e("span",{class:"font-semibold"},"Created:",-1)),i(" "+s((Z=o.value.delivery_request)!=null&&Z.created_at?A(o.value.delivery_request.created_at):"N/A"),1)]),e("div",kt,[t[35]||(t[35]=e("span",{class:"font-semibold"},"Amount Due:",-1)),i(" â‚±"+s(((ee=o.value.delivery_request)==null?void 0:ee.total_price)!==void 0&&((te=o.value.delivery_request)==null?void 0:te.total_price)!==null?(parseFloat(o.value.delivery_request.total_price)||0).toFixed(2):"0.00"),1)])])])])]}),_:1}),a(ge,{class:"px-6 pb-4"},{default:l(()=>[a(ce)]),_:1})]),_:1})):N("",!0)]),_:1},8,["modelValue"])]}),_:1}))}};export{$t as default};
