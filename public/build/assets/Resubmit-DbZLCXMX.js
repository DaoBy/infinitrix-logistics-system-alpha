import{C as w,d as P,o as a,w as u,b as e,a as l,u as o,c as n,e as p,t as m,s as k,v as x,F as V,r as j,n as g,a1 as D,a0 as R,f,P as S}from"./app-SYI-8bdC.js";import{_ as C}from"./GuestLayout-CL7Urbya.js";import{T as v}from"./TextInput-BLOXMGwP.js";import{_ as $}from"./TextArea-D6EdXTx9.js";import{_ as c}from"./InputError-BeG_EhdC.js";import{_ as N}from"./PrimaryButton-CBiTPJhk.js";import{_ as F}from"./SecondaryButton-BS-rbRq0.js";import{L as M}from"./LoadingSpinner-D_hFHxow.js";import{r as U}from"./ExclamationTriangleIcon-DMflv1j-.js";import"./NavLink-D6cPZaLM.js";import"./NavBar-CU2t44fW.js";import"./DropdownLink-B9dgTLgn.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./XCircleIcon-CNpqFFGC.js";import"./CheckCircleIcon-m86Ju4G0.js";import"./InformationCircleIcon-BDhf-5Kc.js";import"./TruckIcon-CGlI839r.js";/* empty css                                                                  */const A={class:"flex justify-between items-center"},B={class:"text-xl font-semibold text-gray-800"},L={key:0,class:"text-sm text-red-600 mt-1"},z={class:"max-w-4xl mx-auto py-6 px-4 sm:px-6 lg:px-8"},I={class:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6"},O={class:"flex"},T={class:"bg-white border border-gray-200 rounded-lg shadow-sm p-5 mb-6"},q={class:"divide-y divide-gray-100"},E={class:"py-2 grid grid-cols-2 gap-4 text-sm"},Y={class:"font-medium capitalize text-gray-900"},G={class:"py-2 grid grid-cols-2 gap-4 text-sm"},H={class:"font-medium text-gray-900"},J={key:0,class:"py-2 grid grid-cols-2 gap-4 text-sm"},K={class:"font-medium text-gray-900"},Q={class:"py-2 grid grid-cols-2 gap-4 text-sm"},W={class:"font-medium text-gray-900"},X={class:"bg-white shadow rounded-lg overflow-hidden"},Z={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ee={class:"md:col-span-2"},te={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},se=["onClick"],oe={class:"flex items-center"},re=["id","value","onUpdate:modelValue"],le=["for"],ie={key:0,class:"md:col-span-2"},ae={class:"md:col-span-2"},ne={class:"mt-1 relative rounded-md shadow-sm"},me={class:"md:col-span-2"},de={class:"md:col-span-2"},ue={class:"mt-6 flex justify-end space-x-3"},ce={key:0},ge={key:1},Ne={__name:"Resubmit",props:{delivery:Object,existingPayment:Object,paymentMethods:Array},setup(i){const d=i,s=w({method:d.existingPayment.method,reference_number:d.existingPayment.reference_number,amount:parseFloat(d.existingPayment.amount),receipt_image:null,notes:d.existingPayment.notes||""}),_=y=>new Date(y).toLocaleString(),h=()=>{s.post(route("customer.payments.update",{delivery:d.delivery.id,payment:d.existingPayment.id}),{forceFormData:!0,onSuccess:()=>{s.reset()}})};return(y,t)=>(a(),P(C,null,{header:u(()=>[e("div",A,[e("div",null,[e("h2",B," Resubmit Payment - Delivery #"+m(i.delivery.reference_number),1),t[5]||(t[5]=e("p",{class:"text-sm text-gray-600 mt-1"}," Your previous payment was rejected. Please correct the information and resubmit. ",-1)),i.existingPayment.rejection_reason?(a(),n("p",L,[t[4]||(t[4]=e("strong",null,"Reason for rejection:",-1)),f(" "+m(i.existingPayment.rejection_reason),1)])):p("",!0)]),l(o(S),{href:y.route("customer.delivery-requests.show",i.delivery.id),class:"text-sm text-blue-600 hover:text-blue-800"},{default:u(()=>[l(F,null,{default:u(()=>t[6]||(t[6]=[f(" ← Back to Delivery Details ")])),_:1})]),_:1},8,["href"])])]),default:u(()=>[e("div",z,[e("div",I,[e("div",O,[l(o(U),{class:"h-5 w-5 text-yellow-400 mr-3"}),t[7]||(t[7]=e("div",null,[e("h3",{class:"text-sm font-medium text-yellow-800"},"Payment Requires Correction"),e("p",{class:"text-sm text-yellow-700 mt-1"}," Your previous payment submission was rejected. Please review the rejection reason and correct the information below. ")],-1))])]),e("div",T,[t[12]||(t[12]=e("h4",{class:"font-semibold text-gray-800 mb-4"},"Previous Submission Details",-1)),e("dl",q,[e("div",E,[t[8]||(t[8]=e("dt",{class:"text-gray-600"},"Method",-1)),e("dd",Y,m(i.existingPayment.method),1)]),e("div",G,[t[9]||(t[9]=e("dt",{class:"text-gray-600"},"Amount",-1)),e("dd",H," ₱"+m(parseFloat(i.existingPayment.amount).toFixed(2)),1)]),i.existingPayment.reference_number?(a(),n("div",J,[t[10]||(t[10]=e("dt",{class:"text-gray-600"},"Reference #",-1)),e("dd",K,m(i.existingPayment.reference_number),1)])):p("",!0),e("div",Q,[t[11]||(t[11]=e("dt",{class:"text-gray-600"},"Submitted",-1)),e("dd",W,m(_(i.existingPayment.created_at)),1)])])]),e("div",X,[t[20]||(t[20]=e("div",{class:"px-6 py-4 border-b border-gray-200 bg-gray-50"},[e("h3",{class:"text-lg font-medium text-gray-900"},"Corrected Payment Information")],-1)),e("form",{onSubmit:k(h,["prevent"]),class:"px-6 py-4"},[e("div",Z,[e("div",ee,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Payment Method * ",-1)),e("div",te,[(a(!0),n(V,null,j(i.paymentMethods,r=>(a(),n("div",{key:r,onClick:b=>o(s).method=r,class:g(["border rounded-lg p-4 cursor-pointer transition-colors",o(s).method===r?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"])},[e("div",oe,[x(e("input",{type:"radio",id:`method-${r}`,value:r,"onUpdate:modelValue":b=>o(s).method=b,class:"h-4 w-4 text-blue-600 focus:ring-blue-500"},null,8,re),[[D,o(s).method]]),e("label",{for:`method-${r}`,class:"ml-3 block text-sm font-medium text-gray-700 capitalize"},m(r),9,le)])],10,se))),128))]),l(c,{message:o(s).errors.method,class:"mt-2"},null,8,["message"])]),o(s).method&&o(s).method!=="cash"?(a(),n("div",ie,[t[14]||(t[14]=e("label",{for:"reference_number",class:"block text-sm font-medium text-gray-700"}," Reference Number * ",-1)),l(v,{id:"reference_number",modelValue:o(s).reference_number,"onUpdate:modelValue":t[0]||(t[0]=r=>o(s).reference_number=r),type:"text",class:g(["mt-1 block w-full",{"border-red-500":o(s).errors.reference_number}]),placeholder:"Enter corrected reference number"},null,8,["modelValue","class"]),l(c,{message:o(s).errors.reference_number,class:"mt-2"},null,8,["message"])])):p("",!0),x(e("div",ae,[t[16]||(t[16]=e("label",{for:"amount",class:"block text-sm font-medium text-gray-700"}," Amount Paid * ",-1)),e("div",ne,[t[15]||(t[15]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("span",{class:"text-gray-500 sm:text-sm"},"₱")],-1)),l(v,{id:"amount",modelValue:o(s).amount,"onUpdate:modelValue":t[1]||(t[1]=r=>o(s).amount=r),type:"number",step:"0.01",min:"0",class:g(["block w-full pl-7 pr-12",{"border-red-500":o(s).errors.amount}]),placeholder:"0.00"},null,8,["modelValue","class"])]),l(c,{message:o(s).errors.amount,class:"mt-2"},null,8,["message"])],512),[[R,!1]]),e("div",me,[t[17]||(t[17]=e("label",{for:"receipt_image",class:"block text-sm font-medium text-gray-700"},[f(" New Payment Proof (Screenshot/Photo) * "),e("span",{class:"text-sm text-gray-500 font-normal"},"- Upload a new image")],-1)),e("input",{id:"receipt_image",type:"file",onInput:t[2]||(t[2]=r=>o(s).receipt_image=r.target.files[0]),accept:"image/*",class:g(["mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100",{"border-red-500":o(s).errors.receipt_image}])},null,34),l(c,{message:o(s).errors.receipt_image,class:"mt-2"},null,8,["message"])]),e("div",de,[t[18]||(t[18]=e("label",{for:"notes",class:"block text-sm font-medium text-gray-700"}," Additional Notes (Optional) ",-1)),l($,{id:"notes",modelValue:o(s).notes,"onUpdate:modelValue":t[3]||(t[3]=r=>o(s).notes=r),rows:"3",class:"mt-1 block w-full",placeholder:"Any additional information about your corrected payment..."},null,8,["modelValue"]),l(c,{message:o(s).errors.notes,class:"mt-2"},null,8,["message"])])]),e("div",ue,[l(N,{type:"submit",disabled:o(s).processing},{default:u(()=>[o(s).processing?(a(),n("span",ce,[l(M,{class:"w-4 h-4 mr-2"}),t[19]||(t[19]=f(" Resubmitting Payment... "))])):(a(),n("span",ge," Resubmit Payment "))]),_:1},8,["disabled"])])],32)])])]),_:1}))}};export{Ne as default};
