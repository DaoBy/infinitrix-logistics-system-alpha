import{E as z}from"./EmployeeLayout-CgMY_n5V.js";import{_ as W}from"./PrimaryButton-eC2eu5yQ.js";import{_ as C}from"./SecondaryButton-f4DzqSLc.js";import{D as E}from"./DangerButton-B7_oj2jq.js";import{_ as Y}from"./SearchInput-BSEud9IK.js";import{T as F}from"./TextInput-CRqjwWF5.js";import{_ as q}from"./DataTable-BArupUOg.js";import{M as G}from"./Modal-DAAK_Wm5.js";import{g as u,h as J,W as b,d as L,o,w as l,b as s,a as r,c as i,e as k,t as d,f as m,F as B,r as K,u as M,P as Q,n as X}from"./app-BllHWhcy.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./NavLink-BG8uMyS8.js";/* empty css                                                                  */const Z={class:"flex justify-between items-center"},ee={class:"text-xl font-semibold leading-tight text-gray-800"},te={class:"flex space-x-2"},ae={class:"py-6"},se={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},ne={key:0,class:"mb-6"},le={key:0,class:"p-4 bg-blue-100 text-blue-800 rounded"},oe={key:1,class:"p-4 bg-green-100 text-green-800 rounded"},re={key:2,class:"p-4 bg-red-100 text-red-800 rounded"},ie={class:"mb-6 flex flex-col md:flex-row justify-between items-start md:items-center gap-4"},de={class:"flex flex-wrap gap-2 w-full md:w-auto"},ce={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},ue={class:"p-6 bg-white border-b border-gray-200"},me={class:"capitalize"},fe={class:"flex space-x-2"},ve={key:0,class:"mt-4 flex justify-center"},xe={class:"flex flex-wrap -mb-1"},ge=["innerHTML"],be={class:"p-6"},ke={class:"mt-1 text-sm text-gray-600"},pe={class:"mt-6 flex justify-end space-x-4"},he={key:0},ye={key:1},Fe={__name:"Index",props:{truck:Object,maintenances:Object,filters:Object,status:String,success:String,error:String},setup(a){var V,S,$,N,j;const A={routine:"Routine Maintenance",repair:"Repair",component_replacement:"Component Replacement",inspection:"Inspection"},H=n=>A[n]||n.replace("_"," "),c=a,I=[{field:"maintenance_date",header:"Date",sortable:!0},{field:"type",header:"Type",sortable:!0},{field:"service_provider",header:"Provider",sortable:!0},{field:"service_details",header:"Details",sortable:!1},{field:"cost",header:"Cost",sortable:!0},{field:"actions",header:"Actions",sortable:!1}],p=u(((V=c.filters)==null?void 0:V.search)||""),h=u(((S=c.filters)==null?void 0:S.date_from)||""),y=u((($=c.filters)==null?void 0:$.date_to)||""),v=u(((N=c.filters)==null?void 0:N.sort_field)||"maintenance_date"),f=u(((j=c.filters)==null?void 0:j.sort_direction)||"desc"),x=u(!1),g=u(null),_=u(!1),T=n=>new Date(n).toLocaleDateString(),P=n=>{v.value===n?f.value=f.value==="asc"?"desc":"asc":(v.value=n,f.value="asc")},R=n=>{b.get(route("admin.trucks.maintenance.edit",{truck:c.truck.id,maintenance:n.id}))},O=n=>{g.value=n,x.value=!0},U=()=>{g.value&&(_.value=!0,b.delete(route("admin.trucks.maintenance.destroy",{truck:c.truck.id,maintenance:g.value.id}),{preserveScroll:!0,onSuccess:()=>{x.value=!1},onFinish:()=>{_.value=!1}}))};return J([p,h,y,v,f],()=>{b.get(route("admin.trucks.maintenance.index",c.truck.id),{search:p.value,date_from:h.value,date_to:y.value,sort_field:v.value,sort_direction:f.value},{preserveState:!0,replace:!0})}),(n,e)=>(o(),L(z,null,{header:l(()=>[s("div",Z,[s("h2",ee," Maintenance History - "+d(a.truck.make)+" "+d(a.truck.model)+" ("+d(a.truck.license_plate)+") ",1),s("div",te,[r(C,{onClick:e[0]||(e[0]=w=>M(b).get(n.route("admin.trucks.show",a.truck.id)))},{default:l(()=>e[7]||(e[7]=[m(" Back to Truck ")])),_:1}),r(W,{onClick:e[1]||(e[1]=w=>M(b).get(n.route("admin.trucks.maintenance.create",a.truck.id)))},{default:l(()=>e[8]||(e[8]=[m(" Add Maintenance ")])),_:1})])])]),default:l(()=>{var w;return[s("div",ae,[s("div",se,[a.status||a.success||a.error?(o(),i("div",ne,[a.status?(o(),i("div",le,d(a.status),1)):k("",!0),a.success?(o(),i("div",oe,d(a.success),1)):k("",!0),a.error?(o(),i("div",re,d(a.error),1)):k("",!0)])):k("",!0),s("div",ie,[r(Y,{modelValue:p.value,"onUpdate:modelValue":e[2]||(e[2]=t=>p.value=t),placeholder:"Search maintenance...",class:"w-full md:w-72"},null,8,["modelValue"]),s("div",de,[r(F,{type:"date",modelValue:h.value,"onUpdate:modelValue":e[3]||(e[3]=t=>h.value=t),placeholder:"From Date",class:"w-full md:w-48"},null,8,["modelValue"]),r(F,{type:"date",modelValue:y.value,"onUpdate:modelValue":e[4]||(e[4]=t=>y.value=t),placeholder:"To Date",class:"w-full md:w-48"},null,8,["modelValue"])])]),s("div",ce,[s("div",ue,[r(q,{columns:I,data:a.maintenances.data,"sort-field":v.value,"sort-direction":f.value,onSort:P},{maintenance_date:l(({row:t})=>[m(d(T(t.maintenance_date)),1)]),type:l(({row:t})=>[s("span",me,d(H(t.type)),1)]),cost:l(({row:t})=>[m(" $"+d(Number(t.cost).toFixed(2)),1)]),actions:l(({row:t})=>[s("div",fe,[r(C,{onClick:D=>R(t)},{default:l(()=>e[9]||(e[9]=[m(" Edit ")])),_:2},1032,["onClick"]),r(E,{onClick:D=>O(t)},{default:l(()=>e[10]||(e[10]=[m(" Delete ")])),_:2},1032,["onClick"])])]),_:1},8,["data","sort-field","sort-direction"]),((w=a.maintenances.links)==null?void 0:w.length)>3?(o(),i("div",ve,[s("div",xe,[(o(!0),i(B,null,K(a.maintenances.links,(t,D)=>(o(),i(B,{key:D},[t.url?(o(),L(M(Q),{key:1,class:X(["mr-1 mb-1 px-4 py-3 text-sm leading-4 border rounded hover:bg-white focus:border-indigo-500 focus:text-indigo-500",{"bg-blue-700 text-white":t.active}]),href:t.url,innerHTML:t.label},null,8,["class","href","innerHTML"])):(o(),i("div",{key:0,class:"mr-1 mb-1 px-4 py-3 text-sm leading-4 text-gray-400 border rounded",innerHTML:t.label},null,8,ge))],64))),128))])])):k("",!0)])])])]),r(G,{show:x.value,onClose:e[6]||(e[6]=t=>x.value=!1)},{default:l(()=>[s("div",be,[e[12]||(e[12]=s("h2",{class:"text-lg font-medium text-gray-900"},"Delete Maintenance Record?",-1)),s("p",ke," Are you sure you want to delete the maintenance record from "+d(g.value?T(g.value.maintenance_date):"")+"? ",1),s("div",pe,[r(C,{onClick:e[5]||(e[5]=t=>x.value=!1)},{default:l(()=>e[11]||(e[11]=[m(" Cancel ")])),_:1}),r(E,{onClick:U,disabled:_.value},{default:l(()=>[_.value?(o(),i("span",he,"Deleting...")):(o(),i("span",ye,"Delete"))]),_:1},8,["disabled"])])])]),_:1},8,["show"])]}),_:1}))}};export{Fe as default};
