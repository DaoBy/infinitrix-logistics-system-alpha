import{i as V,g as w,C as h,d as F,o as y,w as r,b as t,a as n,t as f,ac as B,s as C,c as D,e as N,ad as j,u as o,ae as k,$ as A,af as g,f as v}from"./app-Xu1-QTPS.js";import{E}from"./EmployeeLayout-HD3iRf9t.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./NavLink-Dma88ZBl.js";import"./DangerButton-B9GvHwCg.js";const R={class:"flex justify-between items-center"},U={class:"bg-white rounded-lg shadow overflow-hidden"},P={class:"p-6"},q={class:"mb-6"},I={class:"space-y-2"},S={class:"flex justify-between"},T={class:"font-medium"},L={class:"flex justify-between"},M={class:"space-y-4"},O={key:0,class:"mt-2"},$=["src"],z={class:"flex justify-end pt-4"},W={__name:"Edit",props:{payment:Object},setup(i){const d=i,x=V(()=>{var a;return((a=d.payment.delivery_request)==null?void 0:a.total_price)*.9||0}),m=w(null),s=h({amount:d.payment.amount,receipt_image:null,notes:d.payment.notes}),b=a=>{if(!a){m.value=null;return}const e=new FileReader;e.onload=u=>{m.value=u.target.result},e.readAsDataURL(a)},_=()=>{s.put(route("collector.payments.update",d.payment.id),{forceFormData:!0,onSuccess:()=>{s.reset()}})};return(a,e)=>(y(),F(E,null,{header:r(()=>[t("div",R,[e[4]||(e[4]=t("h2",{class:"text-xl font-semibold text-gray-800"}," Edit Payment Collection ",-1)),n(g,{to:a.route("collector.payments.show",i.payment.id),color:"secondary"},{default:r(()=>e[3]||(e[3]=[v(" Back to Details ")])),_:1},8,["to"])])]),default:r(()=>{var u,p,c;return[t("div",U,[t("div",P,[t("div",q,[e[7]||(e[7]=t("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Delivery Information",-1)),t("div",I,[t("div",S,[e[5]||(e[5]=t("span",{class:"text-gray-600"},"Reference:",-1)),t("span",T,f(((u=i.payment.delivery_request)==null?void 0:u.reference_number)||"N/A"),1)]),t("div",L,[e[6]||(e[6]=t("span",{class:"text-gray-600"},"Amount Due:",-1)),t("span",null,"₱"+f(((c=(p=i.payment.delivery_request)==null?void 0:p.total_price)==null?void 0:c.toFixed(2))||"0.00"),1)])])]),n(B,{onSubmit:C(_,["prevent"])},{default:r(()=>[t("div",M,[n(j,{modelValue:o(s).amount,"onUpdate:modelValue":e[0]||(e[0]=l=>o(s).amount=l),label:"Amount Collected *",type:"number",step:"0.01",min:"0",prefix:"₱","error-messages":o(s).errors.amount,hint:`Minimum: ₱${x.value.toFixed(2)} (90% of total)`,"persistent-hint":""},null,8,["modelValue","error-messages","hint"]),n(k,{modelValue:o(s).receipt_image,"onUpdate:modelValue":e[1]||(e[1]=l=>o(s).receipt_image=l),label:"Receipt Photo (Optional)",accept:"image/*","prepend-icon":"mdi-camera","error-messages":o(s).errors.receipt_image,onChange:b},null,8,["modelValue","error-messages"]),m.value?(y(),D("div",O,[t("img",{src:m.value,alt:"Receipt preview",class:"max-w-xs h-auto rounded border border-gray-200"},null,8,$)])):N("",!0),n(A,{modelValue:o(s).notes,"onUpdate:modelValue":e[2]||(e[2]=l=>o(s).notes=l),label:"Notes",rows:"3"},null,8,["modelValue"]),t("div",z,[n(g,{type:"submit",color:"primary",loading:o(s).processing},{default:r(()=>e[8]||(e[8]=[v(" Update Payment ")])),_:1},8,["loading"])])])]),_:1})])])]}),_:1}))}};export{W as default};
