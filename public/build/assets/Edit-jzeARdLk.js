import{C as h,i as _,d as w,o as a,w as p,b as e,t as d,c as u,e as l,s as j,J as m,u as n,K as f,F as k,r as A,L as N,a2 as y,a as R,P as D,f as V}from"./app-DSvpKds8.js";import{E as U}from"./EmployeeLayout-41rkCMFi.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./NavLink-B7vUiQXa.js";import"./DangerButton-Bd5m9G75.js";const M={class:"max-w-4xl mx-auto py-6 sm:px-6 lg:px-8"},P={class:"px-4 py-6 sm:px-0"},I={class:"mb-6"},O={class:"text-2xl font-bold text-gray-900"},S={class:"mt-1 text-sm text-gray-600"},B={class:"bg-white shadow rounded-lg mb-6"},C={class:"px-4 py-5 sm:px-6 border-b border-gray-200"},E={class:"text-lg font-medium leading-6 text-gray-900"},q={class:"px-4 py-5 sm:p-6"},L={class:"grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-2"},T={class:"mt-1 text-sm text-gray-900"},F={class:"mt-1 text-sm text-gray-900"},z={class:"mt-1 text-sm text-gray-900"},J={class:"mt-1 text-sm text-gray-900 capitalize"},K={class:"text-sm font-medium text-gray-500"},G={class:"mt-1 text-sm text-gray-900"},H={key:0},Q={class:"mt-1 text-sm text-gray-900"},W={class:"bg-white shadow rounded-lg mb-6"},X={class:"px-4 py-5 sm:px-6 border-b border-gray-200"},Y={class:"text-lg font-medium leading-6 text-gray-900"},Z={class:"px-4 py-5 sm:p-6"},$={class:"mb-6"},ee={for:"refund_amount",class:"block text-sm font-medium text-gray-700"},te={class:"mt-1 relative rounded-md shadow-sm"},se=["max"],oe={class:"mt-1 text-sm text-gray-500"},ne={key:0,class:"mt-1 text-sm text-blue-600"},de={key:1,class:"mt-1 text-sm text-red-600"},re={class:"mb-6"},ae=["value"],ue={key:0,class:"mt-1 text-sm text-red-600"},ie={class:"mb-6"},le=["placeholder"],me={key:0,class:"mt-1 text-sm text-red-600"},ce={class:"mb-6"},fe=["placeholder"],xe={class:"mb-6"},be={class:"space-y-2"},pe={class:"flex items-center"},ye={class:"flex items-center"},ge={for:"process",class:"ml-3 block text-sm font-medium text-gray-700"},ve={key:0,class:"mt-1 text-sm text-red-600"},he={class:"flex justify-end space-x-3"},_e=["disabled"],Re={__name:"Edit",props:{refund:Object,maxRefundable:Number,reasonOptions:Object},setup(o){const i=o,s=h({refund_amount:i.refund.refund_amount,reason:i.refund.reason,description:i.refund.description,notes:i.refund.notes,action:"process"}),x=_(()=>{if(i.refund.type==="adjustment"){const c=Number(s.refund_amount)||0;return Math.max(0,i.refund.original_amount-c)}return 0});function g(){}function v(){s.put(route("refunds.update",{refund:i.refund.id}))}return(c,t)=>(a(),w(U,null,{default:p(()=>[e("div",M,[e("div",P,[e("div",I,[e("h1",O,d(o.refund.type==="adjustment"?"Process Invoice Adjustment":"Process Refund"),1),e("p",S,d(o.refund.type==="adjustment"?"Negotiate and apply invoice adjustment.":"Negotiate and process refund with customer."),1)]),e("div",B,[e("div",C,[e("h3",E,d(o.refund.type==="adjustment"?"Adjustment Details":"Refund Details"),1)]),e("div",q,[e("dl",L,[e("div",null,[t[6]||(t[6]=e("dt",{class:"text-sm font-medium text-gray-500"},"Reference Number",-1)),e("dd",T,d(o.refund.delivery_request.reference_number),1)]),e("div",null,[t[7]||(t[7]=e("dt",{class:"text-sm font-medium text-gray-500"},"Sender",-1)),e("dd",F,d(o.refund.delivery_request.sender.name),1)]),e("div",null,[t[8]||(t[8]=e("dt",{class:"text-sm font-medium text-gray-500"},"Original Amount",-1)),e("dd",z,"₱"+d(o.refund.original_amount),1)]),e("div",null,[t[9]||(t[9]=e("dt",{class:"text-sm font-medium text-gray-500"},"Payment Type",-1)),e("dd",J,d(o.refund.delivery_request.payment_type),1)]),e("div",null,[e("dt",K,"Maximum "+d(o.refund.type==="adjustment"?"Adjustable":"Refundable"),1),e("dd",G,"₱"+d(o.maxRefundable),1)]),o.refund.type==="adjustment"?(a(),u("div",H,[t[10]||(t[10]=e("dt",{class:"text-sm font-medium text-gray-500"},"New Amount Due",-1)),e("dd",Q,"₱"+d(x.value),1)])):l("",!0)])])]),e("form",{onSubmit:j(v,["prevent"])},[e("div",W,[e("div",X,[e("h3",Y,d(o.refund.type==="adjustment"?"Adjustment Negotiation":"Refund Negotiation"),1)]),e("div",Z,[e("div",$,[e("label",ee,d(o.refund.type==="adjustment"?"Adjustment Amount *":"Refund Amount *"),1),e("div",te,[t[11]||(t[11]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("span",{class:"text-gray-500 sm:text-sm"},"₱")],-1)),m(e("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>n(s).refund_amount=r),type:"number",step:"0.01",min:"0",max:o.maxRefundable,id:"refund_amount",class:"block w-full pl-7 pr-12 border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:"0.00",onInput:g},null,40,se),[[f,n(s).refund_amount]])]),e("p",oe," Maximum "+d(o.refund.type==="adjustment"?"adjustable":"refundable")+" amount: ₱"+d(o.maxRefundable),1),o.refund.type==="adjustment"?(a(),u("p",ne," New amount due: ₱"+d(x.value),1)):l("",!0),n(s).errors.refund_amount?(a(),u("p",de,d(n(s).errors.refund_amount),1)):l("",!0)]),e("div",re,[t[13]||(t[13]=e("label",{for:"reason",class:"block text-sm font-medium text-gray-700"}," Reason * ",-1)),m(e("select",{"onUpdate:modelValue":t[1]||(t[1]=r=>n(s).reason=r),id:"reason",class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"},[t[12]||(t[12]=e("option",{value:""},"Select a reason",-1)),(a(!0),u(k,null,A(o.reasonOptions,(r,b)=>(a(),u("option",{key:b,value:b},d(r),9,ae))),128))],512),[[N,n(s).reason]]),n(s).errors.reason?(a(),u("p",ue,d(n(s).errors.reason),1)):l("",!0)]),e("div",ie,[t[14]||(t[14]=e("label",{for:"description",class:"block text-sm font-medium text-gray-700"}," Description * ",-1)),m(e("textarea",{"onUpdate:modelValue":t[2]||(t[2]=r=>n(s).description=r),id:"description",rows:"3",class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:o.refund.type==="adjustment"?"Describe the adjustment reason and negotiation details...":"Describe the refund reason and negotiation details..."},null,8,le),[[f,n(s).description]]),n(s).errors.description?(a(),u("p",me,d(n(s).errors.description),1)):l("",!0)]),e("div",ce,[t[15]||(t[15]=e("label",{for:"notes",class:"block text-sm font-medium text-gray-700"}," Internal Notes ",-1)),m(e("textarea",{"onUpdate:modelValue":t[3]||(t[3]=r=>n(s).notes=r),id:"notes",rows:"2",class:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",placeholder:o.refund.type==="adjustment"?"Internal notes about the adjustment...":"Internal notes about the negotiation..."},null,8,fe),[[f,n(s).notes]])]),e("div",xe,[t[17]||(t[17]=e("label",{class:"block text-sm font-medium text-gray-700 mb-3"}," Action ",-1)),e("div",be,[e("div",pe,[m(e("input",{"onUpdate:modelValue":t[4]||(t[4]=r=>n(s).action=r),id:"update_pending",value:"update_pending",type:"radio",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"},null,512),[[y,n(s).action]]),t[16]||(t[16]=e("label",{for:"update_pending",class:"ml-3 block text-sm font-medium text-gray-700"}," Update negotiation details (keep as pending) ",-1))]),e("div",ye,[m(e("input",{"onUpdate:modelValue":t[5]||(t[5]=r=>n(s).action=r),id:"process",value:"process",type:"radio",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"},null,512),[[y,n(s).action]]),e("label",ge,d(o.refund.type==="adjustment"?"Apply adjustment immediately":"Process refund immediately"),1)])]),n(s).errors.action?(a(),u("p",ve,d(n(s).errors.action),1)):l("",!0)])])]),e("div",he,[R(n(D),{href:c.route("refunds.show",{refund:o.refund.id}),class:"bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"},{default:p(()=>t[18]||(t[18]=[V(" Cancel ")])),_:1},8,["href"]),e("button",{type:"submit",disabled:n(s).processing,class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50"},d(n(s).action==="process"?o.refund.type==="adjustment"?"Apply Adjustment":"Process Refund":"Update Details"),9,_e)])],32)])])]),_:1}))}};export{Re as default};
