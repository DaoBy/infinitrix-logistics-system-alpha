import{E as O}from"./EmployeeLayout-CIwV2LFp.js";import{_ as S}from"./PrimaryButton-H84cxS-1.js";import{_ as V}from"./SecondaryButton--u4JNCYW.js";import{D as N}from"./DangerButton-CCeglgOy.js";import{_ as z}from"./SearchInput-BfE0xszx.js";import{_ as J}from"./DataTable-1yjRkP_i.js";import{M as G}from"./Modal-DnFLVV-w.js";import{P as K}from"./Pagination-BU1iQEyv.js";import{g as v,i as U,j as q,d as H,o as d,w as o,b as e,a as i,c,e as _,t as r,f as l,u as D,F as W,k as F,W as m}from"./app-DfDxEqBg.js";import{_ as Q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as $}from"./MapPinIcon-upoosXGh.js";import"./NavLink-Dm252fTo.js";const X={class:"flex justify-between items-center w-full px-6 md:px-8"},Y={class:"flex gap-2"},Z={class:"zoom-content"},ee={class:"px-6 py-4"},se={key:0,class:"mb-4"},te={key:0,class:"p-3 bg-blue-100 text-blue-800 rounded"},oe={key:1,class:"p-3 bg-green-100 text-green-800 rounded"},ae={key:2,class:"p-3 bg-red-100 text-red-800 rounded"},re={class:"mb-4 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3"},ie={class:"w-full sm:w-96"},ne={class:"text-sm text-gray-500 bg-blue-50 px-3 py-1 rounded border border-blue-100"},le={key:0,class:"ml-1"},de={class:"justify-center flex items-center"},ue={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg w-full max-w-[95vw]"},ce={class:"p-4 bg-white border-b border-gray-200"},ge={class:"flex items-center"},me={class:"font-medium text-gray-900"},fe={class:"flex items-center"},he={class:"text-sm font-mono text-gray-600"},ve={class:"text-gray-700 line-clamp-2"},xe={class:"flex items-center"},_e={class:"text-sm text-gray-600 font-mono"},pe={class:"flex space-x-2"},ye={class:"text-center py-8"},be={class:"bg-gray-50 rounded-lg p-6 max-w-md mx-auto"},we={class:"text-gray-500 mb-3"},ke={class:"mt-4"},Ce={class:"p-5"},Se={class:"mt-1 text-sm text-gray-600"},Ve={class:"mt-4 flex justify-end space-x-3"},Ae={key:0},Ne={key:1},De={__name:"Index",props:{regions:Object,status:String,success:String,error:String},setup(a){const j=a,f=v(""),p=v("name"),b=v("asc"),w=v(!1),x=v(null),y=v(!1),M=[{field:"name",header:"Warehouse Name",sortable:!0},{field:"color_hex",header:"Region Color",sortable:!1},{field:"warehouse_address",header:"Warehouse Address",sortable:!1},{field:"geographic_location",header:"Coordinates",sortable:!1},{field:"actions",header:"Actions",sortable:!1}],k=U(()=>(j.regions.data||[]).filter(s=>(f.value===""||s.name.toLowerCase().includes(f.value.toLowerCase())||s.warehouse_address&&s.warehouse_address.toLowerCase().includes(f.value.toLowerCase()))&&s.is_active).sort((s,t)=>{const g=b.value==="asc"?1:-1;let u=s[p.value],h=t[p.value];return u==null&&(u=""),h==null&&(h=""),u=String(u).toLowerCase(),h=String(h).toLowerCase(),u<h?-1*g:u>h?1*g:0}));function L(n){p.value=n.field,b.value=n.direction}function P(n){m.get(route("admin.regions.index"),{page:n},{preserveState:!0,preserveScroll:!0,replace:!0})}function A(){m.get(route("admin.regions.create"))}function R(n){m.get(route("admin.regions.show",n))}function B(n){m.get(route("admin.regions.edit",n))}function E(){m.get(route("admin.regions.archived"))}function T(n){x.value=n,w.value=!0}function C(){w.value=!1,x.value=null,y.value=!1}function I(){x.value&&(y.value=!0,m.put(route("admin.regions.archive",x.value.id),{},{preserveScroll:!0,onSuccess:()=>m.reload({only:["regions"]}),onError:()=>alert("Failed to disable warehouse"),onFinish:()=>C()}))}return q(()=>{typeof $page<"u"&&console.log("Vue got key:",$page.props.googleMapsApiKey)}),(n,s)=>(d(),H(O,null,{header:o(()=>[e("div",X,[s[3]||(s[3]=e("div",null,[e("h2",{class:"text-xl font-semibold leading-tight text-gray-800"},"Warehouse Management"),e("p",{class:"mt-1 text-sm text-gray-500"}," Manage active warehouses and their regional assignments ")],-1)),e("div",Y,[i(V,{onClick:E},{default:o(()=>s[1]||(s[1]=[l("View Disabled Warehouses")])),_:1}),i(S,{onClick:A},{default:o(()=>s[2]||(s[2]=[l("Add New Warehouse")])),_:1})])])]),default:o(()=>[e("div",Z,[e("div",ee,[a.status||a.success||a.error?(d(),c("div",se,[a.status?(d(),c("div",te,r(a.status),1)):_("",!0),a.success?(d(),c("div",oe,r(a.success),1)):_("",!0),a.error?(d(),c("div",ae,r(a.error),1)):_("",!0)])):_("",!0),e("div",re,[e("div",ie,[i(z,{modelValue:f.value,"onUpdate:modelValue":s[0]||(s[0]=t=>f.value=t),placeholder:"Search active warehouses by name...",class:"w-full"},null,8,["modelValue"])]),e("div",ne,[l(" ðŸ“‹ Showing "+r(k.value.length)+" active "+r(k.value.length===1?"warehouse":"warehouses")+" ",1),a.regions.data&&a.regions.data.length<a.regions.total?(d(),c("span",le," (Page "+r(a.regions.current_page)+" of "+r(a.regions.last_page)+") ",1)):_("",!0)])]),e("div",de,[e("div",ue,[e("div",ce,[i(J,{columns:M,data:k.value,"sort-field":p.value,"sort-direction":b.value,onSort:L,class:"w-full"},{name:o(({row:t})=>[e("div",ge,[e("div",{class:"w-3 h-3 rounded-full mr-3 border border-gray-300",style:F({backgroundColor:t.color_hex})},null,4),e("span",me,r(t.name),1)])]),color_hex:o(({row:t})=>[e("div",fe,[e("div",{class:"w-6 h-6 rounded border border-gray-300 mr-2",style:F({backgroundColor:t.color_hex})},null,4),e("span",he,r(t.color_hex),1)])]),warehouse_address:o(({row:t})=>[e("div",null,[e("span",ve,r(t.warehouse_address||"No address provided"),1)])]),geographic_location:o(({row:t})=>{var g,u;return[e("div",xe,[i(D($),{class:"h-4 w-4 mr-2 text-gray-400"}),e("span",_e,[typeof t.geographic_location=="object"?(d(),c(W,{key:0},[l(r((g=t.geographic_location.latitude)==null?void 0:g.toFixed(4))+", "+r((u=t.geographic_location.longitude)==null?void 0:u.toFixed(4)),1)],64)):(d(),c(W,{key:1},[l(r(JSON.parse(t.geographic_location).latitude.toFixed(4))+", "+r(JSON.parse(t.geographic_location).longitude.toFixed(4)),1)],64))])])]}),actions:o(({row:t})=>[e("div",pe,[i(V,{onClick:g=>R(t.id),class:"text-xs py-1 px-2"},{default:o(()=>s[4]||(s[4]=[l("View")])),_:2},1032,["onClick"]),i(S,{onClick:g=>B(t.id),class:"text-xs py-1 px-2"},{default:o(()=>s[5]||(s[5]=[l("Edit")])),_:2},1032,["onClick"]),i(N,{onClick:g=>T(t),class:"text-xs py-1 px-2"},{default:o(()=>s[6]||(s[6]=[l("Disable")])),_:2},1032,["onClick"])])]),empty:o(()=>[e("div",ye,[e("div",be,[i(D($),{class:"h-10 w-10 text-gray-400 mx-auto mb-3"}),s[8]||(s[8]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"No active warehouses found",-1)),e("p",we,r(f.value?"Try adjusting your search terms":"Get started by adding your first warehouse"),1),i(S,{onClick:A},{default:o(()=>s[7]||(s[7]=[l("Add New Warehouse")])),_:1})])])]),_:1},8,["data","sort-field","sort-direction"]),e("div",ke,[i(K,{pagination:a.regions,onPageChanged:P},null,8,["pagination"])])])])])])]),i(G,{show:w.value,onClose:C},{default:o(()=>{var t;return[e("div",Ce,[s[12]||(s[12]=e("h2",{class:"text-lg font-medium text-gray-900"},"Disable Warehouse?",-1)),e("p",Se,[s[9]||(s[9]=l(" Are you sure you want to disable ")),e("strong",null,r((t=x.value)==null?void 0:t.name),1),s[10]||(s[10]=l("? This will move it to the disabled warehouses list. "))]),e("div",Ve,[i(V,{onClick:C},{default:o(()=>s[11]||(s[11]=[l("Cancel")])),_:1}),i(N,{onClick:I,disabled:y.value},{default:o(()=>[y.value?(d(),c("span",Ae,"Processing...")):(d(),c("span",Ne,"Disable Warehouse"))]),_:1},8,["disabled"])])])]}),_:1},8,["show"])]),_:1}))}},Oe=Q(De,[["__scopeId","data-v-899c0a20"]]);export{Oe as default};
