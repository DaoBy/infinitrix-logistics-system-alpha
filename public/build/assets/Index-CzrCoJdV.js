import{E as te}from"./EmployeeLayout-CgMY_n5V.js";import{P as ae}from"./Pagination-clkSGD3h.js";import{_ as se}from"./SearchInput-BSEud9IK.js";import{S as M}from"./SelectInput-BACJkmZB.js";import{_ as re}from"./StatusBadge-R9GU_yEO.js";import{_ as ie}from"./PrimaryButton-eC2eu5yQ.js";import{_ as ne}from"./SecondaryButton-f4DzqSLc.js";import{g as V,i as R,h as le,W as x,d as h,o as d,w as v,b as s,e as c,t as n,c as p,F as S,r as de,f as y,n as ue,a as k}from"./app-BllHWhcy.js";import{d as oe}from"./debounce-Bw3YwbKH.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./NavLink-BG8uMyS8.js";import"./DangerButton-B7_oj2jq.js";/* empty css                                                                    */const pe={class:"flex justify-between items-center px-6"},ce={class:"flex space-x-2 items-center"},ye={class:"px-6 py-4"},me={class:"bg-white dark:bg-gray-800 shadow-sm rounded-lg overflow-hidden border border-gray-200 dark:border-gray-700"},fe={class:"px-4 py-5 sm:px-6 border-b border-gray-200 dark:border-gray-700 flex flex-col md:flex-row md:items-center md:justify-between gap-4"},ge={class:"text-lg font-medium leading-6 text-gray-900 dark:text-gray-100"},xe={class:"overflow-x-auto"},ve={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},_e={class:"bg-gray-50 dark:bg-gray-700"},be={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"},he={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},ke={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-gray-100"},Pe={class:"text-xs text-gray-500 dark:text-gray-400"},qe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100"},Ve={class:"text-xs text-gray-500 dark:text-gray-400"},Re={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100"},Se={class:"text-xs text-gray-500 dark:text-gray-400"},Ce={class:"px-6 py-4 whitespace-nowrap text-sm"},je={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},Ae={class:"px-6 py-4 whitespace-nowrap text-sm"},Ne={class:"px-6 py-4 whitespace-nowrap text-sm"},Oe={key:0,class:"block text-green-600 dark:text-green-400 text-xs mt-1"},De={key:1,class:"block text-yellow-600 dark:text-yellow-400 text-xs mt-1"},Me={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},Fe={class:"flex justify-end space-x-2"},$e={key:0},Be={colspan:"7",class:"px-6 py-4 text-center text-sm text-gray-500 dark:text-gray-400"},Ye={__name:"Index",props:{prepaidRequests:{type:Object,default:()=>({data:[]})},postpaidRequests:{type:Object,default:()=>({data:[]})},filters:{type:Object,default:()=>({})}},setup(F){const m=F,l=V(m.filters.type??""),_=V(m.filters.search??""),b=V(m.filters.status??""),$=[{value:"",label:"All"},{value:"prepaid",label:"Prepaid"},{value:"postpaid",label:"Postpaid"}],B=R(()=>l.value==="prepaid"?[{value:"",label:"All Statuses"},{value:"pending",label:"Pending Payment"},{value:"pending_verification",label:"Pending Verification"},{value:"paid",label:"Paid"},{value:"rejected",label:"Rejected"}]:l.value==="postpaid"?[{value:"",label:"All Statuses"},{value:"pending",label:"Pending Collection"},{value:"collected",label:"Collected"},{value:"pending_verification",label:"Pending Verification"},{value:"verified",label:"Verified"}]:[{value:"",label:"All Statuses"},{value:"pending",label:"Pending"},{value:"pending_verification",label:"Pending Verification"},{value:"paid",label:"Paid"},{value:"collected",label:"Collected"},{value:"verified",label:"Verified"},{value:"rejected",label:"Rejected"}]),g=R(()=>l.value==="prepaid"?m.prepaidRequests:l.value==="postpaid"?m.postpaidRequests:m.prepaidRequests),L=R(()=>l.value==="prepaid"?"Prepaid Delivery Requests":l.value==="postpaid"?"Postpaid Delivery Orders":"All Payments & Collections");function u(t){return l.value==="postpaid"||t._type==="postpaid"}function I(t){var e,a,i;return u(t)?((a=(e=t.delivery_request)==null?void 0:e.sender)==null?void 0:a.name)??"N/A":((i=t.sender)==null?void 0:i.name)??"N/A"}function T(t){var e,a,i;return u(t)?((a=(e=t.delivery_request)==null?void 0:e.sender)==null?void 0:a.mobile)??"":((i=t.sender)==null?void 0:i.mobile)??""}function U(t){var e,a,i;return u(t)?((a=(e=t.delivery_request)==null?void 0:e.receiver)==null?void 0:a.name)??"N/A":((i=t.receiver)==null?void 0:i.name)??"N/A"}function E(t){var e,a,i;return u(t)?((a=(e=t.delivery_request)==null?void 0:e.receiver)==null?void 0:a.mobile)??"":((i=t.receiver)==null?void 0:i.mobile)??""}function P(t){var e;return u(t)?((e=t.delivery_request)==null?void 0:e.payment_method)??t.payment_method??"cash":t.payment_method??"cash"}function z(t){const e=P(t);return(e==null?void 0:e.charAt(0).toUpperCase())+(e==null?void 0:e.slice(1))||"Cash"}function W(t){switch(P(t)){case"cash":return"bg-gray-100 text-gray-800";case"gcash":return"bg-blue-100 text-blue-800";case"bank":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}}function f(t){const e=P(t);return e==="gcash"||e==="bank"}function G(t){var e,a;return f(t)&&(t.payment_status==="pending_verification"||!((e=t.payment)!=null&&e.verified_by)&&!((a=t.payment)!=null&&a.rejected_by))}function H(t){var a;if(u(t)){const i=(a=t.delivery_request)==null?void 0:a.total_price;return(typeof i=="number"?i:parseFloat(i||0)).toFixed(2)}const e=t.total_price;return(typeof e=="number"?e:parseFloat(e||0)).toFixed(2)}function q(t){return f(t)&&!t.payment?"awaiting_payment":f(t)&&t.payment?t.payment.verified_by?"verified":t.payment.rejected_by?"rejected":"pending_verification":t.payment_status}function J(t){const e=q(t);return e==="paid"||e==="verified"?"success":e==="collected"?"info":e==="rejected"?"danger":e==="pending_verification"?"warning":e==="awaiting_payment"?"secondary":"warning"}function K(t){switch(q(t)){case"paid":return"Paid";case"collected":return"Collected";case"verified":return"Verified";case"pending_verification":return"Pending Verification";case"rejected":return"Rejected";case"awaiting_payment":return"Awaiting Payment";default:return"Pending"}}function Q(t){var e,a,i,o;return u(t)?((e=t.payment)==null?void 0:e.id)||((i=(a=t.delivery_request)==null?void 0:a.payment)==null?void 0:i.id):(o=t.payment)==null?void 0:o.id}function X(t){return!!(!f(t)&&t.payment_status!=="paid"||f(t))}function Y(t){var a;const e=u(t)?(a=t.delivery_request)==null?void 0:a.id:t.id;e?x.visit(route("staff.payments.create",{delivery_id:e})):x.visit(route("staff.payments.create"))}function Z(t){var a,i,o;const e=((a=t.payment)==null?void 0:a.id)||((o=(i=t.delivery_request)==null?void 0:i.payment)==null?void 0:o.id);e&&x.visit(route("staff.payments.show",e))}function w(t){x.get(route("staff.payments.index"),{page:t,type:l.value,search:_.value,status:b.value},{preserveState:!0,preserveScroll:!0,only:["prepaidRequests","postpaidRequests","filters"]})}return le([l,_,b],oe(([t,e,a])=>{x.get(route("staff.payments.index"),{type:t,search:e,status:a},{preserveState:!0,preserveScroll:!0,replace:!0,only:["prepaidRequests","postpaidRequests","filters"]})},300)),(t,e)=>(d(),h(te,null,{header:v(()=>[s("div",pe,[e[3]||(e[3]=s("h2",{class:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200"}," Payments & Collections ",-1)),s("div",ce,[k(se,{modelValue:_.value,"onUpdate:modelValue":e[0]||(e[0]=a=>_.value=a),placeholder:"Search by reference, name...",class:"w-[42rem]"},null,8,["modelValue"]),k(M,{modelValue:l.value,"onUpdate:modelValue":e[1]||(e[1]=a=>l.value=a),options:$,class:"w-16"},null,8,["modelValue"]),k(M,{modelValue:b.value,"onUpdate:modelValue":e[2]||(e[2]=a=>b.value=a),options:B.value,class:"w-16"},null,8,["modelValue","options"])])])]),default:v(()=>{var a,i,o;return[s("div",ye,[s("div",me,[s("div",fe,[s("div",null,[s("h3",ge,n(L.value),1),e[4]||(e[4]=s("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"}," Manage and review all payment and collection transactions. ",-1))])]),s("div",xe,[s("table",ve,[s("thead",_e,[s("tr",null,[s("th",be,n(l.value==="postpaid"?"Order #":"Reference"),1),e[5]||(e[5]=s("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Sender ",-1)),e[6]||(e[6]=s("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Receiver ",-1)),e[7]||(e[7]=s("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Payment Method ",-1)),e[8]||(e[8]=s("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Amount ",-1)),e[9]||(e[9]=s("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Status ",-1)),e[10]||(e[10]=s("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Actions ",-1))])]),s("tbody",he,[(d(!0),p(S,null,de(((a=g.value)==null?void 0:a.data)||[],r=>{var C,j,A,N,O,D;return d(),p("tr",{key:r.id},[s("td",ke,[u(r)?(d(),p(S,{key:0},[y(n(((C=r.delivery_request)==null?void 0:C.reference_number)??"DR-"+String(((j=r.delivery_request)==null?void 0:j.id)??r.id).padStart(6,"0")),1)],64)):(d(),p(S,{key:1},[y(n(r.reference_number??"DR-"+String(r.id).padStart(6,"0")),1)],64)),s("div",Pe,n(r.created_at?new Date(r.created_at).toLocaleString():""),1)]),s("td",qe,[y(n(I(r))+" ",1),s("div",Ve,n(T(r)),1)]),s("td",Re,[y(n(U(r))+" ",1),s("div",Se,n(E(r)),1)]),s("td",Ce,[s("span",{class:ue(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium capitalize",W(r)])},n(z(r)),3),f(r)&&((A=r.payment)!=null&&A.reference_number)?(d(),p("div",je," Ref: "+n((N=r.payment)==null?void 0:N.reference_number),1)):c("",!0)]),s("td",Ae," â‚±"+n(H(r)),1),s("td",Ne,[k(re,{status:q(r),variant:J(r)},{default:v(()=>[y(n(K(r)),1)]),_:2},1032,["status","variant"]),r.payment_status==="paid"||r.payment_status==="verified"?(d(),p("span",Oe," Verified "+n((D=(O=r.payment)==null?void 0:O.verifiedBy)==null?void 0:D.name),1)):c("",!0),G(r)?(d(),p("span",De," Awaiting verification ")):c("",!0)]),s("td",Me,[s("div",Fe,[X(r)?(d(),h(ie,{key:0,onClick:ee=>Y(r),class:"mr-2"},{default:v(()=>e[11]||(e[11]=[y(" Record Payment ")])),_:2},1032,["onClick"])):c("",!0),Q(r)?(d(),h(ne,{key:1,onClick:ee=>Z(r)},{default:v(()=>e[12]||(e[12]=[y(" View Payment ")])),_:2},1032,["onClick"])):c("",!0)])])])}),128)),(((o=(i=g.value)==null?void 0:i.data)==null?void 0:o.length)??0)===0?(d(),p("tr",$e,[s("td",Be," No "+n(l.value==="postpaid"?"postpaid delivery orders":l.value==="prepaid"?"prepaid delivery requests":"delivery requests/orders")+" found ",1)])):c("",!0)])])]),g.value&&g.value.last_page>1?(d(),h(ae,{key:0,pagination:g.value,onPageChanged:w},null,8,["pagination"])):c("",!0)])])]}),_:1}))}};export{Ye as default};
