import{g as D,C as $,i as w,d as E,o as i,w as f,b as e,c as u,e as m,f as d,t as o,n as _,s as W,a as c,v as q,u as g,x as G,W as J}from"./app-Xu1-QTPS.js";import{E as K}from"./EmployeeLayout-HD3iRf9t.js";import{_ as b}from"./InputLabel-BxIgZQZ8.js";import{_ as H}from"./InputError-D9nXzJOf.js";import{T as Q}from"./TextInput-42f6rjVr.js";import{_ as X}from"./TextArea-DrfKMXJu.js";import{_ as Y}from"./PrimaryButton-CQvisOOW.js";import{_ as Z}from"./SecondaryButton-B4_LijSy.js";import{L as ee}from"./LoadingSpinner-C6mwMO_t.js";import{_ as te}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./NavLink-Dma88ZBl.js";import"./DangerButton-B9GvHwCg.js";/* empty css                                                                  */const re={class:"flex justify-between items-center px-4 sm:px-6"},se={class:"px-4 md:px-6 py-4 max-w-7xl mx-auto"},oe={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},ae={class:"lg:col-span-2 space-y-6"},ne={class:"bg-red-50 border border-red-200 rounded-lg p-4"},le={class:"flex items-start gap-3"},ie={class:"flex-1 min-w-0"},de={class:"space-y-2 text-sm"},ue={key:0,class:"text-red-700"},me={class:"flex flex-wrap gap-4 text-red-600"},ce={class:"flex items-center gap-1"},ge={class:"text-xs"},xe={key:0,class:"flex items-center gap-1"},ve={class:"text-xs"},ye={class:"bg-white dark:bg-gray-800 shadow-sm rounded-lg border border-gray-200 dark:border-gray-700"},pe={class:"flex flex-col md:flex-row md:items-center md:justify-between p-4 bg-gray-50 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-700"},fe={class:"flex-1"},be={class:"flex flex-wrap items-center gap-2 mb-2"},ke={class:"text-lg font-bold text-green-600 dark:text-green-400 tracking-wide"},he={class:"flex flex-wrap items-center gap-4 text-xs text-gray-600 dark:text-gray-300"},we={key:0},_e={class:"p-4 md:p-6"},Ce={class:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6 mb-6"},Me={class:"bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg"},je={class:"space-y-2"},Pe={class:"font-medium truncate"},Ve={class:"text-sm text-gray-600 dark:text-gray-400 flex items-center gap-1"},ze={class:"text-sm text-gray-600 dark:text-gray-400 flex items-center gap-1"},Ne={class:"bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg"},Be={class:"space-y-2"},De={class:"font-medium truncate"},He={class:"text-sm text-gray-600 dark:text-gray-400 flex items-center gap-1"},Re={class:"text-sm text-gray-600 dark:text-gray-400 flex items-center gap-1"},Le={class:"bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg"},Te={class:"grid grid-cols-2 md:grid-cols-3 gap-4 text-sm"},Ae={class:"font-medium"},Se={class:"font-medium"},Ue={class:"font-medium"},Fe={key:0,class:"space-y-4"},Oe={key:0,class:"bg-red-50 border border-red-200 rounded-lg p-4"},Ie={class:"flex items-center"},$e={class:"text-red-700"},Ee={key:1,class:"bg-orange-50 border border-orange-200 rounded-lg p-4"},We={class:"flex items-center"},qe={key:0,class:"text-orange-700 text-sm mt-1"},Ge={key:1,class:"bg-white dark:bg-gray-800 shadow-sm rounded-lg border border-gray-200 dark:border-gray-700 p-6"},Je={class:"text-center"},Ke={class:"flex justify-center"},Qe={class:"relative"},Xe=["src"],Ye={key:2,class:"bg-white dark:bg-gray-800 shadow-sm rounded-lg border border-gray-200 dark:border-gray-700 p-6"},Ze={class:"text-center"},et={class:"flex justify-center"},tt={class:"relative"},rt=["src"],st={class:"lg:col-span-1"},ot={class:"bg-white dark:bg-gray-800 shadow-sm rounded-lg border border-gray-200 dark:border-gray-700 sticky top-6"},at={class:"p-4"},nt={class:"space-y-4"},lt={class:"bg-gray-50 dark:bg-gray-700/50 p-3 rounded-lg border border-gray-200 dark:border-gray-600"},it={class:"space-y-3"},dt={class:"flex justify-between items-center p-2 bg-white dark:bg-gray-600 rounded border"},ut={class:"text-lg font-bold text-gray-900 dark:text-gray-100"},mt={class:"relative rounded-md shadow-sm"},ct={key:0,class:"mt-1 text-xs text-red-600 flex items-center gap-1"},gt={key:0,class:"flex justify-between items-center p-2 bg-green-50 dark:bg-green-900/20 rounded border border-green-200 dark:border-green-800"},xt={class:"text-lg font-bold text-green-900 dark:text-green-100"},vt={class:"flex flex-col gap-2 pt-2"},yt={key:0},pt={key:1,class:"flex items-center gap-2"},ft={__name:"Resubmit",props:{delivery:Object,existingPayment:Object},setup(r){const a=r,p=D(null),x=D(Number(a.existingPayment.amount)||Number(a.delivery.total_price)||0),l=$({method:"cash",amount:Number(a.existingPayment.amount)||Number(a.delivery.total_price)||0,receipt_image:null,notes:a.existingPayment.notes||""}),k=w(()=>a.delivery.payment_due_date?new Date(a.delivery.payment_due_date)<new Date:!1),R=w(()=>k.value||a.delivery.payment_status==="uncollectible"),C=w(()=>l.method&&l.amount>=Number(a.delivery.total_price)&&l.receipt_image);function L(s){var n;switch((n=s.payment_status)==null?void 0:n.toLowerCase()){case"paid":case"verified":return"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100";case"pending_verification":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-800 dark:text-yellow-100";case"uncollectible":return"bg-orange-100 text-orange-800 dark:bg-orange-800 dark:text-orange-100";case"overdue":return"bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-100";default:return"bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100"}}function T(s){var n;switch((n=s.payment_status)==null?void 0:n.toLowerCase()){case"paid":case"verified":return"Paid";case"pending_verification":return"Pending Verification";case"uncollectible":return"Extended Due Date";case"overdue":return"Overdue";default:return"Pending Collection"}}function A(){if(!a.delivery.packages||a.delivery.packages.length===0)return"0";const s=a.delivery.packages.reduce((t,n)=>t+(Number(n.weight)||0),0);return s>0?s.toFixed(2):"0"}function S(){if(!a.delivery.packages||a.delivery.packages.length===0)return"0";const s=a.delivery.packages.reduce((t,n)=>{const v=Number(n.height)*Number(n.width)*Number(n.length)/1e6;return t+(v||0)},0);return s>0?s.toFixed(3):"0"}function M(){const s=parseFloat(x.value)||0,t=Number(a.delivery.total_price)||0;return Math.max(0,s-t)}function U(){const s=parseFloat(x.value)||0;l.amount=s}function F(s){const t=s.target.files[0];if(l.receipt_image=t,t){const n=new FileReader;n.onload=v=>{p.value=v.target.result},n.readAsDataURL(t)}else p.value=null}function h(s){if(!s)return"N/A";try{return new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"Invalid date"}}function O(s){if(!s)return"N/A";try{return new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Invalid date"}}function I(){C.value&&l.put(route("collector.payments.update",{delivery:a.delivery.id,payment:a.existingPayment.id}),{preserveScroll:!0,onSuccess:()=>{}})}return(s,t)=>(i(),E(K,null,{header:f(()=>[e("div",re,[t[5]||(t[5]=e("div",{class:"min-w-0 flex-1"},[e("h2",{class:"text-lg sm:text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200 truncate"}," Resubmit Payment Collection "),e("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400 hidden sm:block"}," Update payment collection details after rejection ")],-1)),c(Z,{onClick:t[0]||(t[0]=n=>g(J).visit(s.route("collector.payments.index"))),class:"inline-flex items-center text-sm whitespace-nowrap shrink-0 ml-2"},{default:f(()=>t[4]||(t[4]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1 sm:mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),e("span",{class:"hidden sm:inline"},"Back to Collections",-1),e("span",{class:"sm:hidden"},"Back",-1)])),_:1})])]),default:f(()=>{var n,v,j,P,V,z,N,B;return[e("div",se,[e("div",oe,[e("div",ae,[e("div",ne,[e("div",le,[t[10]||(t[10]=e("svg",{class:"h-5 w-5 text-red-400 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})],-1)),e("div",ie,[t[9]||(t[9]=e("div",{class:"flex flex-wrap items-center gap-2 mb-2"},[e("h3",{class:"text-sm font-medium text-red-800"},"Payment Rejected"),e("span",{class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-red-100 text-red-800"}," Requires Correction ")],-1)),e("div",de,[r.existingPayment.rejection_reason?(i(),u("div",ue,[t[6]||(t[6]=e("span",{class:"font-medium"},"Reason:",-1)),d(" "+o(r.existingPayment.rejection_reason),1)])):m("",!0),e("div",me,[e("div",ce,[t[7]||(t[7]=e("svg",{class:"h-3 w-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)),e("span",ge,"By: "+o(((n=r.existingPayment.rejected_by)==null?void 0:n.name)||"Admin"),1)]),r.existingPayment.rejected_at?(i(),u("div",xe,[t[8]||(t[8]=e("svg",{class:"h-3 w-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("span",ve,"On: "+o(O(r.existingPayment.rejected_at)),1)])):m("",!0)])])])])]),e("div",ye,[e("div",pe,[e("div",fe,[e("div",be,[t[11]||(t[11]=e("span",{class:"inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100 border border-green-200 dark:border-green-700"}," Reference# ",-1)),e("span",ke,o(r.delivery.reference_number||"DR-"+String(r.delivery.id).padStart(6,"0")),1),e("span",{class:_([L(r.delivery),"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"])},o(T(r.delivery)),3)]),e("div",he,[e("span",null,"Delivery ID: DO-"+o(String(r.delivery.id).padStart(6,"0")),1),r.delivery.created_at?(i(),u("span",we,"Created: "+o(h(r.delivery.created_at)),1)):m("",!0),r.delivery.payment_due_date?(i(),u("span",{key:1,class:_(k.value?"text-red-600 font-semibold":"")}," Due: "+o(h(r.delivery.payment_due_date)),3)):m("",!0)])])]),e("div",_e,[e("div",Ce,[e("div",Me,[t[14]||(t[14]=e("h3",{class:"text-base font-medium text-gray-900 dark:text-gray-100 mb-3 flex items-center gap-2"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})]),d(" Sender ")],-1)),e("div",je,[e("p",Pe,o(((v=r.delivery.sender)==null?void 0:v.name)||"N/A"),1),e("p",Ve,[t[12]||(t[12]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})],-1)),d(" "+o(((j=r.delivery.sender)==null?void 0:j.email)||"No email"),1)]),e("p",ze,[t[13]||(t[13]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})],-1)),d(" "+o(((P=r.delivery.sender)==null?void 0:P.mobile)||"No phone"),1)])])]),e("div",Ne,[t[17]||(t[17]=e("h3",{class:"text-base font-medium text-gray-900 dark:text-gray-100 mb-3 flex items-center gap-2"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})]),d(" Receiver ")],-1)),e("div",Be,[e("p",De,o(((V=r.delivery.receiver)==null?void 0:V.name)||"N/A"),1),e("p",He,[t[15]||(t[15]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})],-1)),d(" "+o(((z=r.delivery.receiver)==null?void 0:z.email)||"No email"),1)]),e("p",Re,[t[16]||(t[16]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})],-1)),d(" "+o(((N=r.delivery.receiver)==null?void 0:N.mobile)||"No phone"),1)])])])]),e("div",Le,[t[21]||(t[21]=e("h3",{class:"text-base font-medium text-gray-900 dark:text-gray-100 mb-3 flex items-center gap-2"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})]),d(" Package Details ")],-1)),e("div",Te,[e("div",null,[t[18]||(t[18]=e("span",{class:"text-gray-500 dark:text-gray-400"},"Total Packages:",-1)),e("p",Ae,o(((B=r.delivery.packages)==null?void 0:B.length)||0),1)]),e("div",null,[t[19]||(t[19]=e("span",{class:"text-gray-500 dark:text-gray-400"},"Total Weight:",-1)),e("p",Se,o(A())+" kg",1)]),e("div",null,[t[20]||(t[20]=e("span",{class:"text-gray-500 dark:text-gray-400"},"Total Volume:",-1)),e("p",Ue,o(S())+" m³",1)])])])])]),R.value?(i(),u("div",Fe,[k.value?(i(),u("div",Oe,[e("div",Ie,[t[23]||(t[23]=e("svg",{class:"h-5 w-5 text-red-400 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})],-1)),e("div",null,[t[22]||(t[22]=e("h3",{class:"text-lg font-medium text-red-800"},"Payment Overdue",-1)),e("p",$e,"This payment was due on "+o(h(r.delivery.payment_due_date)),1)])])])):m("",!0),r.delivery.payment_status==="uncollectible"?(i(),u("div",Ee,[e("div",We,[t[25]||(t[25]=e("svg",{class:"h-5 w-5 text-orange-400 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("div",null,[t[24]||(t[24]=e("h3",{class:"text-lg font-medium text-orange-800"},"Extended Due Date",-1)),r.delivery.non_payment_reason?(i(),u("p",qe," Reason: "+o(r.delivery.non_payment_reason),1)):m("",!0)])])])):m("",!0)])):m("",!0),p.value?(i(),u("div",Ge,[e("div",Je,[t[27]||(t[27]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-4 flex items-center justify-center gap-2"},[e("svg",{class:"w-5 h-5 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 002.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 00-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75 2.25 2.25 0 00-.1-.664m-5.8 0A2.251 2.251 0 0113.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25zM6.75 12h.008v.008H6.75V12zm0 3h.008v.008H6.75V15zm0 3h.008v.008H6.75V18z"})]),d(" New Payment Proof Preview ")],-1)),t[28]||(t[28]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," Preview of the updated payment proof ",-1)),e("div",Ke,[e("div",Qe,[e("img",{src:p.value,class:"max-h-64 rounded-lg border-2 border-blue-300 dark:border-blue-600 shadow-md",alt:"Payment proof preview"},null,8,Xe),t[26]||(t[26]=e("div",{class:"absolute top-2 right-2"},[e("span",{class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100"}," New Preview ")],-1))])]),t[29]||(t[29]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400 mt-3"}," This updated payment proof will be submitted for verification ",-1))])])):m("",!0),r.existingPayment.receipt_image_url?(i(),u("div",Ye,[e("div",Ze,[t[31]||(t[31]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-4 flex items-center justify-center gap-2"},[e("svg",{class:"w-5 h-5 text-gray-600 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 002.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 00-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75 2.25 2.25 0 00-.1-.664m-5.8 0A2.251 2.251 0 0113.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25zM6.75 12h.008v.008H6.75V12zm0 3h.008v.008H6.75V15zm0 3h.008v.008H6.75V18z"})]),d(" Current Receipt (Rejected) ")],-1)),t[32]||(t[32]=e("p",{class:"text-sm text-gray-600 dark:text-gray-400 mb-4"}," This is the receipt that was previously rejected ",-1)),e("div",et,[e("div",tt,[e("img",{src:r.existingPayment.receipt_image_url,class:"max-h-64 rounded-lg border-2 border-gray-300 dark:border-gray-600 shadow-md",alt:"Current receipt"},null,8,rt),t[30]||(t[30]=e("div",{class:"absolute top-2 right-2"},[e("span",{class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-100"}," Rejected ")],-1))])])])])):m("",!0)]),e("div",st,[e("div",ot,[t[42]||(t[42]=e("div",{class:"p-4 bg-gray-50 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-700"},[e("h3",{class:"font-medium text-gray-900 dark:text-gray-100 flex items-center gap-2"},[e("svg",{class:"w-5 h-5 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})]),d(" Update Collection Details ")])],-1)),e("div",at,[e("form",{onSubmit:W(I,["prevent"])},[e("div",nt,[e("div",null,[c(b,{value:"Payment Method"}),t[33]||(t[33]=e("div",{class:"mt-1 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-md"},[e("div",{class:"flex items-center gap-3"},[e("svg",{class:"w-6 h-6 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})]),e("div",null,[e("p",{class:"font-medium text-blue-900 dark:text-blue-100"},"Cash Payment"),e("p",{class:"text-xs text-blue-700 dark:text-blue-300"},"Collector payments are processed in cash only")])])],-1)),q(e("input",{type:"hidden","onUpdate:modelValue":t[1]||(t[1]=y=>g(l).method=y)},null,512),[[G,g(l).method]])]),e("div",lt,[t[38]||(t[38]=e("h4",{class:"text-sm font-medium text-gray-900 dark:text-gray-100 mb-3 flex items-center gap-2"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})]),d(" Payment Amount ")],-1)),e("div",it,[e("div",dt,[t[34]||(t[34]=e("span",{class:"text-sm font-medium text-gray-700 dark:text-gray-300"},"Total Due:",-1)),e("span",ut," ₱"+o(Number(r.delivery.total_price).toFixed(2)),1)]),e("div",null,[c(b,{value:"Amount Received *"}),e("div",mt,[t[35]||(t[35]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("span",{class:"text-gray-500 dark:text-gray-400 sm:text-sm"},"₱")],-1)),c(Q,{modelValue:x.value,"onUpdate:modelValue":t[2]||(t[2]=y=>x.value=y),type:"number",step:"0.01",min:"0",class:"block w-full pl-7 text-base font-semibold",placeholder:"0.00",error:g(l).errors.amount,onInput:U},null,8,["modelValue","error"])]),c(H,{message:g(l).errors.amount},null,8,["message"]),x.value&&Number(x.value)<Number(r.delivery.total_price)?(i(),u("div",ct,[t[36]||(t[36]=e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})],-1)),d(" Amount must cover the total due of ₱"+o(Number(r.delivery.total_price).toFixed(2)),1)])):m("",!0)]),M()>0?(i(),u("div",gt,[t[37]||(t[37]=e("span",{class:"text-sm font-medium text-green-800 dark:text-green-300"},"Change:",-1)),e("span",xt," ₱"+o(M().toFixed(2)),1)])):m("",!0)])]),e("div",null,[c(b,{value:"New Payment Proof *"}),e("input",{type:"file",onChange:F,accept:"image/*",class:_(["block w-full text-sm text-gray-500 dark:text-gray-400 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 dark:file:bg-blue-900/20 file:text-blue-700 dark:file:text-blue-400 hover:file:bg-blue-100 dark:hover:file:bg-blue-900/30",{"border-red-300":g(l).errors.receipt_image}])},null,34),c(H,{message:g(l).errors.receipt_image},null,8,["message"]),t[39]||(t[39]=e("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"}," Upload a clear photo of the updated payment proof. Maximum file size: 2MB ",-1))]),e("div",null,[c(b,{value:"Collection Notes"}),c(X,{modelValue:g(l).notes,"onUpdate:modelValue":t[3]||(t[3]=y=>g(l).notes=y),rows:3,placeholder:"Add any notes about the updated collection circumstances...",class:"resize-none text-sm"},null,8,["modelValue"])]),e("div",vt,[c(Y,{type:"submit",disabled:g(l).processing||!C.value,class:"w-full justify-center"},{default:f(()=>[g(l).processing?(i(),u("span",yt,[c(ee,{size:"xs",class:"mr-2"}),t[40]||(t[40]=d(" Processing... "))])):(i(),u("span",pt,t[41]||(t[41]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),d(" Resubmit Collection ")])))]),_:1},8,["disabled"])])])],32)])])])])])]}),_:1}))}},Dt=te(ft,[["__scopeId","data-v-576ff652"]]);export{Dt as default};
