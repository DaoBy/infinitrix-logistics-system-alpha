import{g as y,d as V,o as d,w as n,b as s,a as i,c,e as g,t as a,f as r,n as E,u as M,W as f}from"./app-BllHWhcy.js";import{E as j}from"./EmployeeLayout-CgMY_n5V.js";import{_ as C}from"./PrimaryButton-eC2eu5yQ.js";import{_ as b}from"./SecondaryButton-f4DzqSLc.js";import{D as w}from"./DangerButton-B7_oj2jq.js";import{_ as z}from"./DataTable-BArupUOg.js";import{M as L}from"./Modal-DAAK_Wm5.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./NavLink-BG8uMyS8.js";const F={class:"flex justify-between items-center px-6"},I={class:"text-xl font-semibold leading-tight text-gray-800"},P={class:"flex space-x-2"},W={class:"px-6 sm:px-8"},q={key:0,class:"mb-6"},G={key:0,class:"p-4 bg-blue-100 text-blue-800 rounded"},O={key:1,class:"p-4 bg-green-100 text-green-800 rounded"},R={key:2,class:"p-4 bg-red-100 text-red-800 rounded"},H={class:"truncate block"},J={class:"truncate block capitalize"},K={class:"flex space-x-2"},Q={class:"p-6"},U={class:"mt-1 text-sm text-gray-600"},X={class:"mt-6 flex justify-end space-x-4"},Y={key:0},Z={key:1},de={__name:"Index",props:{truck:{type:Object,required:!0},components:{type:Array,default:()=>[]},status:{type:String,default:""},success:{type:String,default:""},error:{type:String,default:""}},setup(o){const p=o,D=[{field:"name",header:"Name",sortable:!0},{field:"type",header:"Type",sortable:!0},{field:"serial_number",header:"Serial Number",sortable:!0},{field:"condition",header:"Condition",sortable:!0},{field:"installation_date",header:"Installation Date",sortable:!0},{field:"actions",header:"Actions",sortable:!1}],h={new:"New",good:"Good",fair:"Fair",poor:"Poor",needs_replacement:"Needs Replacement"},_={new:"bg-green-100 text-green-800",good:"bg-blue-100 text-blue-800",fair:"bg-yellow-100 text-yellow-800",poor:"bg-orange-100 text-orange-800",needs_replacement:"bg-red-100 text-red-800"},x=y(!1),u=y(null),m=y(!1),N=l=>l?new Date(l).toLocaleDateString():"N/A",A=()=>{f.get(route("admin.trucks.components.create",p.truck.id))},$=l=>{f.get(route("admin.trucks.components.show",{truck:p.truck.id,component:l}))},B=l=>{f.get(route("admin.trucks.components.edit",{truck:p.truck.id,component:l}))},S=l=>{u.value=l,x.value=!0},k=()=>{x.value=!1,setTimeout(()=>{u.value=null,m.value=!1},300)},T=async()=>{if(u.value){m.value=!0;try{await f.delete(route("admin.trucks.components.destroy",{truck:p.truck.id,component:u.value.id}),{preserveScroll:!0}),k()}catch{k(),alert("Failed to delete component. Please try again.")}finally{m.value=!1}}};return(l,e)=>(d(),V(j,null,{header:n(()=>[s("div",F,[s("h2",I," Components - "+a(o.truck.make)+" "+a(o.truck.model)+" ("+a(o.truck.license_plate)+") ",1),s("div",P,[i(b,{onClick:e[0]||(e[0]=t=>M(f).get(l.route("admin.trucks.show",o.truck.id)))},{default:n(()=>e[1]||(e[1]=[r(" Back to Truck ")])),_:1}),i(C,{onClick:A},{default:n(()=>e[2]||(e[2]=[r(" Add New Component ")])),_:1})])])]),default:n(()=>[s("div",W,[o.status||o.success||o.error?(d(),c("div",q,[o.status?(d(),c("div",G,a(o.status),1)):g("",!0),o.success?(d(),c("div",O,a(o.success),1)):g("",!0),o.error?(d(),c("div",R,a(o.error),1)):g("",!0)])):g("",!0),i(z,{columns:D,data:o.components,class:"w-full"},{name:n(({row:t})=>[s("span",H,a(t.name||"N/A"),1)]),type:n(({row:t})=>[s("span",J,a(t.type.replace("_"," ")||"N/A"),1)]),condition:n(({row:t})=>[s("span",{class:E(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full capitalize",_[t.condition]])},a(h[t.condition]),3)]),installation_date:n(({row:t})=>[r(a(N(t.installation_date)||"N/A"),1)]),actions:n(({row:t})=>[s("div",K,[i(b,{onClick:v=>$(t.id)},{default:n(()=>e[3]||(e[3]=[r("View")])),_:2},1032,["onClick"]),i(C,{onClick:v=>B(t.id)},{default:n(()=>e[4]||(e[4]=[r("Edit")])),_:2},1032,["onClick"]),i(w,{onClick:v=>S(t)},{default:n(()=>e[5]||(e[5]=[r("Delete")])),_:2},1032,["onClick"])])]),_:1},8,["data"])]),i(L,{show:x.value,onClose:k},{default:n(()=>{var t;return[s("div",Q,[e[9]||(e[9]=s("h2",{class:"text-lg font-medium text-gray-900"},"Delete Component?",-1)),s("p",U,[e[6]||(e[6]=r(" Are you sure you want to delete ")),s("strong",null,a((t=u.value)==null?void 0:t.name),1),e[7]||(e[7]=r("? This action cannot be undone. "))]),s("div",X,[i(b,{onClick:k},{default:n(()=>e[8]||(e[8]=[r("Cancel")])),_:1}),i(w,{onClick:T,disabled:m.value},{default:n(()=>[m.value?(d(),c("span",Y,"Deleting...")):(d(),c("span",Z,"Delete"))]),_:1},8,["disabled"])])])]}),_:1},8,["show"])]),_:1}))}};export{de as default};
