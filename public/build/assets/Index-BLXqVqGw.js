import{E as G}from"./EmployeeLayout-BOs8DfTq.js";import{_ as E}from"./PrimaryButton-C4c8jBYk.js";import{_ as M}from"./SecondaryButton-piyuntTR.js";import{D as P}from"./DangerButton-ttTomH3t.js";import{_ as Y}from"./SearchInput-CeYc0t6l.js";import{T as I}from"./TextInput-BuJEjECB.js";import{_ as Z}from"./DataTable-qtQ7jOg0.js";import{M as q}from"./Modal-BjHu2a2U.js";import{P as J}from"./Pagination-q83q6DZI.js";import{c as u,o as r,b as a,g as m,h as K,W as f,d as Q,w as o,a as i,e as x,t as l,f as c,u as b}from"./app-AKIpI5kC.js";import{_ as X}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./NavLink-BIDGqMa0.js";/* empty css                                                                  */function ee(t,S){return r(),u("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[a("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11.42 15.17 17.25 21A2.652 2.652 0 0 0 21 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.317-.384.74-.626 1.208-.766M11.42 15.17l-4.655 5.653a2.548 2.548 0 1 1-3.586-3.586l6.837-5.63m5.108-.233c.55-.164 1.163-.188 1.743-.14a4.5 4.5 0 0 0 4.486-6.336l-3.276 3.277a3.004 3.004 0 0 1-2.25-2.25l3.276-3.276a4.5 4.5 0 0 0-6.336 4.486c.091 1.076-.071 2.264-.904 2.95l-.102.085m-1.745 1.437L5.909 7.5H4.5L2.25 3.75l1.5-1.5L7.5 4.5v1.409l4.26 4.26m-1.745 1.437 1.745-1.437m6.615 8.206L15.75 15.75M4.867 19.125h.008v.008h-.008v-.008Z"})])}const te={class:"flex justify-between items-center w-full px-6 md:px-8"},ae={class:"text-xl font-semibold leading-tight text-gray-800"},se={class:"flex gap-2"},ne={class:"zoom-content"},oe={class:"px-6 py-4"},le={key:0,class:"mb-4"},ie={key:0,class:"p-3 bg-blue-100 text-blue-800 rounded"},re={key:1,class:"p-3 bg-green-100 text-green-800 rounded"},de={key:2,class:"p-3 bg-red-100 text-red-800 rounded"},ce={class:"mb-4 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3"},ue={class:"w-full sm:w-96"},me={class:"flex items-center gap-3"},fe={class:"text-sm text-gray-500 bg-blue-50 px-3 py-1 rounded border border-blue-100 whitespace-nowrap"},ve={key:0,class:"ml-1"},ge={class:"justify-center flex items-center"},xe={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg w-full max-w-[95vw]"},he={class:"p-4 bg-white border-b border-gray-200"},pe={class:"capitalize"},ke={class:"line-clamp-2"},ye={class:"flex space-x-2"},we={class:"text-center py-8"},_e={class:"bg-gray-50 rounded-lg p-6 max-w-md mx-auto"},be={class:"text-gray-500 mb-3"},Ce={key:0,class:"mt-4"},De={class:"p-5"},Me={class:"mt-1 text-sm text-gray-600"},Se={class:"mt-4 flex justify-end space-x-3"},Ve={key:0},Te={key:1},$e={__name:"Index",props:{truck:Object,maintenances:Object,filters:Object,status:String,success:String,error:String},setup(t){var T,$,j,N,A;const S={routine:"Routine Maintenance",repair:"Repair",component_replacement:"Component Replacement",inspection:"Inspection"},d=t,v=m(((T=d.filters)==null?void 0:T.search)||""),h=m((($=d.filters)==null?void 0:$.date_from)||""),p=m(((j=d.filters)==null?void 0:j.date_to)||""),k=m(((N=d.filters)==null?void 0:N.sort_field)||"maintenance_date"),y=m(((A=d.filters)==null?void 0:A.sort_direction)||"desc"),C=m(!1),g=m(null),w=m(!1),L=[{field:"maintenance_date",header:"Date",sortable:!0},{field:"type",header:"Type",sortable:!0},{field:"service_provider",header:"Provider",sortable:!0},{field:"service_details",header:"Details",sortable:!1},{field:"cost",header:"Cost",sortable:!0},{field:"actions",header:"Actions",sortable:!1}],F=s=>S[s]||s.replace("_"," "),V=s=>new Date(s).toLocaleDateString(),R=s=>{k.value=s.field,y.value=s.direction},O=s=>{f.get(route("admin.trucks.maintenance.index",d.truck.id),{page:s,search:v.value,date_from:h.value,date_to:p.value,sort_field:k.value,sort_direction:y.value},{preserveState:!0,preserveScroll:!0,replace:!0})},U=s=>{f.get(route("admin.trucks.maintenance.edit",{truck:d.truck.id,maintenance:s.id}))},z=s=>{g.value=s,C.value=!0},D=()=>{C.value=!1,g.value=null,w.value=!1},H=()=>{g.value&&(w.value=!0,f.delete(route("admin.trucks.maintenance.destroy",{truck:d.truck.id,maintenance:g.value.id}),{preserveScroll:!0,onSuccess:()=>D(),onFinish:()=>w.value=!1}))};return K([v,h,p,k,y],()=>{f.get(route("admin.trucks.maintenance.index",d.truck.id),{search:v.value,date_from:h.value,date_to:p.value,sort_field:k.value,sort_direction:y.value,page:1},{preserveState:!0,replace:!0})}),(s,e)=>(r(),Q(G,null,{header:o(()=>[a("div",te,[a("div",null,[a("h2",ae," Maintenance History - "+l(t.truck.make)+" "+l(t.truck.model)+" ("+l(t.truck.license_plate)+") ",1),e[6]||(e[6]=a("p",{class:"mt-1 text-sm text-gray-500"}," View and manage maintenance records for this truck ",-1))]),a("div",se,[i(M,{onClick:e[0]||(e[0]=_=>b(f).get(s.route("admin.trucks.show",t.truck.id)))},{default:o(()=>e[7]||(e[7]=[c(" Back to Truck ")])),_:1}),i(E,{onClick:e[1]||(e[1]=_=>b(f).get(s.route("admin.trucks.maintenance.create",t.truck.id)))},{default:o(()=>e[8]||(e[8]=[c(" Add Maintenance ")])),_:1})])])]),default:o(()=>{var _,B;return[a("div",ne,[a("div",oe,[t.status||t.success||t.error?(r(),u("div",le,[t.status?(r(),u("div",ie,l(t.status),1)):x("",!0),t.success?(r(),u("div",re,l(t.success),1)):x("",!0),t.error?(r(),u("div",de,l(t.error),1)):x("",!0)])):x("",!0),a("div",ce,[a("div",ue,[i(Y,{modelValue:v.value,"onUpdate:modelValue":e[2]||(e[2]=n=>v.value=n),placeholder:"Search maintenance records...",class:"w-full"},null,8,["modelValue"])]),a("div",me,[i(I,{type:"date",modelValue:h.value,"onUpdate:modelValue":e[3]||(e[3]=n=>h.value=n),placeholder:"From Date",class:"w-full sm:w-48"},null,8,["modelValue"]),i(I,{type:"date",modelValue:p.value,"onUpdate:modelValue":e[4]||(e[4]=n=>p.value=n),placeholder:"To Date",class:"w-full sm:w-48"},null,8,["modelValue"]),a("div",fe,[c(" ðŸ“‹ Showing "+l(((_=t.maintenances.data)==null?void 0:_.length)||0)+" records ",1),t.maintenances.data&&t.maintenances.data.length<t.maintenances.total?(r(),u("span",ve," (Page "+l(t.maintenances.current_page)+" of "+l(t.maintenances.last_page)+") ",1)):x("",!0)])])]),a("div",ge,[a("div",xe,[a("div",he,[i(Z,{columns:L,data:t.maintenances.data,"sort-field":k.value,"sort-direction":y.value,onSort:R,class:"w-full"},{maintenance_date:o(({row:n})=>[c(l(V(n.maintenance_date)),1)]),type:o(({row:n})=>[a("span",pe,l(F(n.type)),1)]),cost:o(({row:n})=>[c(" $"+l(Number(n.cost).toFixed(2)),1)]),service_details:o(({row:n})=>[a("span",ke,l(n.service_details),1)]),actions:o(({row:n})=>[a("div",ye,[i(M,{onClick:W=>U(n),class:"text-xs py-1 px-2"},{default:o(()=>e[9]||(e[9]=[c("Edit")])),_:2},1032,["onClick"]),i(P,{onClick:W=>z(n),class:"text-xs py-1 px-2"},{default:o(()=>e[10]||(e[10]=[c("Delete")])),_:2},1032,["onClick"])])]),empty:o(()=>[a("div",we,[a("div",_e,[i(b(ee),{class:"h-10 w-10 text-gray-400 mx-auto mb-3"}),e[12]||(e[12]=a("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"No maintenance records found",-1)),a("p",be,l(v.value?"Try adjusting your search terms":"Get started by adding your first maintenance record"),1),i(E,{onClick:e[5]||(e[5]=n=>b(f).get(s.route("admin.trucks.maintenance.create",t.truck.id)))},{default:o(()=>e[11]||(e[11]=[c(" Add Maintenance ")])),_:1})])])]),_:1},8,["data","sort-field","sort-direction"]),((B=t.maintenances.links)==null?void 0:B.length)>3?(r(),u("div",Ce,[i(J,{pagination:t.maintenances,onPageChanged:O},null,8,["pagination"])])):x("",!0)])])])])]),i(q,{show:C.value,onClose:D},{default:o(()=>[a("div",De,[e[14]||(e[14]=a("h2",{class:"text-lg font-medium text-gray-900"},"Delete Maintenance Record?",-1)),a("p",Me," Are you sure you want to delete the maintenance record from "+l(g.value?V(g.value.maintenance_date):"")+"? ",1),a("div",Se,[i(M,{onClick:D},{default:o(()=>e[13]||(e[13]=[c("Cancel")])),_:1}),i(P,{onClick:H,disabled:w.value},{default:o(()=>[w.value?(r(),u("span",Ve,"Processing...")):(r(),u("span",Te,"Delete"))]),_:1},8,["disabled"])])])]),_:1},8,["show"])]}),_:1}))}},He=X($e,[["__scopeId","data-v-ee7a1333"]]);export{He as default};
