import{C as _,i as w,d as S,o as n,w as u,b as e,c as m,e as v,t as l,f as y,a as o,u as s,p as V,P as C}from"./app-B0R_bMJi.js";import{E as D}from"./EmployeeLayout-BQLa5PLV.js";import{_ as c}from"./InputLabel-BebyH7Kw.js";import{_ as x}from"./InputError-BoXW6i3M.js";import{T as P}from"./TextInput-m8vkJNre.js";import{_ as N}from"./TextArea-DUZFOSeU.js";import{S as A}from"./SelectInput-f4kpY-DU.js";import{_ as B}from"./PrimaryButton-z6gddSkS.js";import{L as T}from"./LoadingSpinner-ZMvEcnIG.js";import{r as I}from"./CheckCircleIcon-CZ6nPIfK.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./NavLink-BchASNUp.js";import"./DangerButton-DlTel5kP.js";/* empty css                                                                  *//* empty css                                                                    */const R={class:"flex justify-between items-center px-6"},j={class:"px-2 md:px-6 py-4 max-w-5xl mx-auto"},E={class:"bg-white dark:bg-gray-800 shadow-sm rounded-lg border border-gray-200 dark:border-gray-700 mb-6"},F={class:"flex flex-col md:flex-row md:items-center md:justify-between p-4 bg-indigo-50 dark:bg-indigo-900 border-b border-gray-200 dark:border-gray-700"},L={class:"flex items-center gap-2"},O={class:"text-lg font-bold text-indigo-900 dark:text-indigo-100 tracking-wide"},U={class:"mt-1 text-xs text-gray-500 dark:text-gray-300"},$={key:0},M={class:"mt-3 md:mt-0 flex items-center gap-2"},z={class:"font-medium text-gray-900 dark:text-gray-100"},G={class:"p-4 md:p-6"},q={class:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6"},H={class:"bg-gray-50 dark:bg-gray-700/50 p-3 md:p-4 rounded-lg flex flex-col gap-1"},J={class:"font-medium truncate"},K={class:"text-xs text-gray-600 dark:text-gray-400 truncate"},Q={class:"text-xs text-gray-600 dark:text-gray-400 truncate"},W={class:"bg-gray-50 dark:bg-gray-700/50 p-3 md:p-4 rounded-lg flex flex-col gap-1"},X={class:"font-medium truncate"},Y={class:"text-xs text-gray-600 dark:text-gray-400 truncate"},Z={class:"text-xs text-gray-600 dark:text-gray-400 truncate"},ee={key:0,class:"mb-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4"},te={key:1,class:"mb-6 bg-green-50 border border-green-200 rounded-lg p-4"},re={class:"flex items-center"},se={class:"bg-white dark:bg-gray-800 shadow-sm rounded-lg border border-gray-200 dark:border-gray-700"},ae={class:"p-4 md:p-6"},oe={class:"space-y-4"},le={class:"relative rounded-md shadow-sm"},de={class:"flex justify-end pt-2"},ie={key:0},ne={key:1},Ve={__name:"Create",props:{delivery:Object},setup(a){const g=a,r=_({method:"",amount:Number(g.delivery.total_price)||0,receipt_image:null,notes:"",type:"postpaid"}),p=w(()=>["pending_verification","paid"].includes(g.delivery.payment_status)),h=()=>{p.value||r.post(route("collector.payments.store",g.delivery.id),{forceFormData:!0,onSuccess:()=>{r.reset()},onError:i=>{console.error("Form submission errors:",i)},onFinish:()=>{}})};function k(i){if(!i)return"N/A";try{return new Date(i).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"Invalid date"}}return(i,t)=>(n(),S(D,null,{header:u(()=>[e("div",R,[t[5]||(t[5]=e("h2",{class:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200"}," Record Postpaid Collection ",-1)),o(s(C),{href:i.route("collector.payments.index"),class:"inline-flex items-center text-sm text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-200"},{default:u(()=>t[4]||(t[4]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),y(" Back to collections ")])),_:1},8,["href"])])]),default:u(()=>{var f,b;return[e("div",j,[e("div",E,[e("div",F,[e("div",null,[e("div",L,[t[6]||(t[6]=e("span",{class:"inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-indigo-100 text-indigo-800 dark:bg-indigo-800 dark:text-indigo-100"}," Reference # ",-1)),e("span",O,l(a.delivery.reference_number||"DR-"+String(a.delivery.id).padStart(6,"0")),1)]),e("div",U,[y(" Delivery ID: DO-"+l(String(a.delivery.id).padStart(6,"0"))+" ",1),a.delivery.created_at?(n(),m("span",$," | Created: "+l(k(a.delivery.created_at)),1)):v("",!0)])]),e("div",M,[e("span",z," ₱"+l(Number(a.delivery.total_price).toFixed(2)),1),t[7]||(t[7]=e("span",{class:"text-xs text-gray-500 dark:text-gray-300"},"Total Amount",-1))])]),e("div",G,[e("div",q,[e("div",H,[t[8]||(t[8]=e("h3",{class:"text-base font-medium text-gray-900 dark:text-gray-100 mb-2"},"Sender",-1)),e("p",J,l(a.delivery.sender.name),1),e("p",K,l(a.delivery.sender.email),1),e("p",Q,l(a.delivery.sender.mobile),1)]),e("div",W,[t[9]||(t[9]=e("h3",{class:"text-base font-medium text-gray-900 dark:text-gray-100 mb-2"},"Receiver",-1)),e("p",X,l(a.delivery.receiver.name),1),e("p",Y,l(a.delivery.receiver.email),1),e("p",Z,l(a.delivery.receiver.mobile),1)])])])]),a.delivery.payment_status==="pending_verification"?(n(),m("div",ee,t[10]||(t[10]=[e("div",{class:"flex items-center"},[e("div",null,[e("h3",{class:"text-lg font-medium text-yellow-800"},"Payment Already Submitted Online"),e("p",{class:"text-yellow-700"},"This customer has already submitted a payment online. It is pending verification.")])],-1)]))):a.delivery.payment_status==="paid"?(n(),m("div",te,[e("div",re,[o(s(I),{class:"h-5 w-5 text-green-400 mr-2"}),t[11]||(t[11]=e("div",null,[e("h3",{class:"text-lg font-medium text-green-800"},"Payment Already Verified"),e("p",{class:"text-green-700"},"This customer's payment has already been verified online.")],-1))])])):v("",!0),e("div",se,[t[14]||(t[14]=e("div",{class:"p-3 md:p-4 bg-gray-50 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-700"},[e("h3",{class:"font-medium text-gray-900 dark:text-gray-100"}," Collection Details ")],-1)),e("div",ae,[e("form",{onSubmit:V(h,["prevent"])},[e("div",oe,[e("div",null,[o(c,{value:"Payment Method *"}),o(A,{modelValue:s(r).method,"onUpdate:modelValue":t[0]||(t[0]=d=>s(r).method=d),options:[{value:"cash",label:"Cash"},{value:"gcash",label:"GCash"},{value:"bank",label:"Bank Transfer"}],placeholder:"Select method",error:(f=s(r).errors)==null?void 0:f.method},null,8,["modelValue","error"]),o(x,{message:(b=s(r).errors)==null?void 0:b.method},null,8,["message"])]),e("div",null,[o(c,{value:"Amount Collected"}),e("div",le,[t[12]||(t[12]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("span",{class:"text-gray-500 dark:text-gray-400 sm:text-sm"},"₱")],-1)),o(P,{modelValue:s(r).amount,"onUpdate:modelValue":t[1]||(t[1]=d=>s(r).amount=d),type:"number",step:"0.01",min:"0",class:"block w-full pl-7",placeholder:"0.00",error:s(r).errors.amount,readonly:!0,tabindex:"-1"},null,8,["modelValue","error"])]),o(x,{message:s(r).errors.amount},null,8,["message"])]),e("div",null,[o(c,{value:"Receipt Photo (Optional)"}),e("input",{type:"file",onInput:t[2]||(t[2]=d=>s(r).receipt_image=d.target.files[0]),accept:"image/*",class:"block w-full text-sm text-gray-500 dark:text-gray-400 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 dark:file:bg-blue-900/20 file:text-blue-700 dark:file:text-blue-400 hover:file:bg-blue-100 dark:hover:file:bg-blue-900/30"},null,32),o(x,{message:s(r).errors.receipt_image},null,8,["message"])]),e("div",null,[o(c,{value:"Notes"}),o(N,{modelValue:s(r).notes,"onUpdate:modelValue":t[3]||(t[3]=d=>s(r).notes=d),rows:3,placeholder:"Any additional notes about this collection..."},null,8,["modelValue"])]),e("div",de,[o(B,{type:"submit",disabled:s(r).processing||p.value},{default:u(()=>[s(r).processing?(n(),m("span",ie,[o(T,{size:"xs",class:"mr-2"}),t[13]||(t[13]=y(" Processing... "))])):(n(),m("span",ne," Record Collection "))]),_:1},8,["disabled"])])])],32)])])])]}),_:1}))}};export{Ve as default};
