import{E as h}from"./EmployeeLayout-D01AghRc.js";import{_ as y}from"./PrimaryButton-7U4Qu6md.js";import{_}from"./SecondaryButton-BoCxbQ9w.js";import{i as m,d as S,o as d,w as n,b as t,c,f as l,t as r,F as M,r as N,a as g,C as D,W as x}from"./app-BOCrhSfO.js";import{_ as C}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./NavLink-DsrNUkqS.js";import"./DangerButton-CBhu99um.js";const B={class:"flex justify-between items-center px-6 print:hidden"},E={class:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200"},I={class:"flex space-x-2"},j={class:"px-6 py-4 print:p-0"},H={class:"printable-area bg-white dark:bg-gray-800 shadow-sm rounded-lg overflow-hidden border border-gray-200 dark:border-gray-700 max-w-7xl mx-auto print:border-0 print:shadow-none"},P={class:"p-6 print:p-0"},R={class:"border-b border-gray-200 dark:border-gray-700 pb-4 mb-4 print:border-b-0"},V={class:"flex justify-between items-start"},W={class:"text-right"},z={class:"text-sm text-gray-500 dark:text-gray-400"},A={class:"font-medium text-gray-900 dark:text-gray-100"},F={class:"text-sm text-gray-500 dark:text-gray-400"},O={class:"font-medium text-gray-900 dark:text-gray-100"},T={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6"},L={class:"bg-gray-50 dark:bg-gray-700 p-3 rounded"},q={class:"text-sm text-gray-900 dark:text-gray-100"},G={class:"bg-gray-50 dark:bg-gray-700 p-3 rounded"},$={class:"text-sm text-gray-900 dark:text-gray-100"},U={key:0,class:"overflow-x-auto"},X={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},K={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},J={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300"},Q={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300"},Y={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300"},Z={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300"},tt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300"},et={key:1,class:"p-4 text-center text-gray-500"},rt={__name:"Manifest",props:{truck:{type:Object,required:!0,default:()=>({})},deliveries:{type:Array,default:()=>[]},driver:{type:Object,default:()=>({id:null,name:null,employee_id:null})},packages:{type:Array,default:()=>[]},manifestNumber:{type:String,default:"Pending"},waybillRoute:{type:String,required:!0},manifestDownloadRoute:{type:String,required:!0},manifest:{type:Object,default:null}},setup(a){const i=a,p=m(()=>new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})),u=m(()=>{var s;return((s=i.driver)==null?void 0:s.name)||"Not assigned"}),f=m(()=>{var s;return((s=i.driver)==null?void 0:s.employee_id)||"N/A"}),w=()=>{D({manifest_number:i.manifestNumber}).post(i.waybillRoute,{preserveScroll:!0,onStart:()=>{console.log("Generating waybills...")},onSuccess:()=>{console.log("Waybills generated successfully!"),x.reload({only:["waybills"]})},onError:e=>{console.error("Error generating waybills:",e),e.manifest_number?alert(`Manifest Error: ${e.manifest_number}`):alert("Something went wrong while generating waybills. Please try again.")},onFinish:()=>{console.log("Waybill generation request finished.")}})},k=()=>{window.print()},b=()=>{i.manifest?window.location.href=route("manifests.download",{manifest:i.manifest.id}):alert("Manifest not available for download yet.")},v=()=>{x.visit(route("cargo-assignments.index"))};return(s,e)=>(d(),S(h,null,{header:n(()=>[t("div",B,[t("h2",E," Truck Manifest: "+r(a.truck.license_plate),1),t("div",I,[g(y,{onClick:w,class:"inline-flex items-center"},{default:n(()=>e[0]||(e[0]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),l(" Generate Waybills ")])),_:1}),g(y,{onClick:k,class:"inline-flex items-center"},{default:n(()=>e[1]||(e[1]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})],-1),l(" Print Manifest ")])),_:1}),g(y,{onClick:b,class:"inline-flex items-center"},{default:n(()=>e[2]||(e[2]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1),l(" Download PDF ")])),_:1}),g(_,{onClick:v,class:"inline-flex items-center"},{default:n(()=>e[3]||(e[3]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z","clip-rule":"evenodd"})],-1),l(" Back ")])),_:1})])])]),default:n(()=>[t("div",j,[t("div",H,[t("div",P,[t("div",R,[t("div",V,[e[6]||(e[6]=t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},"INFINITRIX EXPRESS CARGO"),t("p",{class:"text-lg text-gray-600 dark:text-gray-300"},"TRUCK MANIFEST")],-1)),t("div",W,[t("p",z,[e[4]||(e[4]=l("Date: ")),t("span",A,r(p.value),1)]),t("p",F,[e[5]||(e[5]=l("Manifest #: ")),t("span",O,r(a.manifestNumber),1)])])])]),t("div",T,[t("div",L,[e[7]||(e[7]=t("p",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Truck",-1)),t("p",q,r(a.truck.make)+" "+r(a.truck.model)+" ("+r(a.truck.license_plate)+")",1)]),t("div",G,[e[8]||(e[8]=t("p",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Driver",-1)),t("p",$,r(u.value)+" (ID: "+r(f.value)+")",1)])]),a.packages.length>0?(d(),c("div",U,[t("table",X,[e[9]||(e[9]=t("thead",{class:"bg-gray-50 dark:bg-gray-700"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," DO # "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Category "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Package Name "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Municipality "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Waybill # ")])],-1)),t("tbody",K,[(d(!0),c(M,null,N(a.packages,o=>(d(),c("tr",{key:o.id},[t("td",J," DO-"+r(o.delivery_order_id.toString().padStart(6,"0")),1),t("td",Q,r(o.category),1),t("td",Y,r(o.item_name),1),t("td",Z,r(o.drop_off_region||"N/A"),1),t("td",tt,r(o.waybill_number||"Pending"),1)]))),128))])])])):(d(),c("div",et," No packages assigned to this truck ")),e[10]||(e[10]=t("div",{class:"mt-8 pt-4 border-t border-gray-200 dark:border-gray-700 grid grid-cols-2 gap-4 print:border-t-0"},[t("div",null,[t("p",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Driver's Signature"),t("div",{class:"mt-8 h-16 border-b border-gray-300 dark:border-gray-600"})]),t("div",{class:"text-right"},[t("p",{class:"text-sm font-medium text-gray-500 dark:text-gray-400"},"Dispatcher's Signature"),t("div",{class:"mt-8 h-16 border-b border-gray-300 dark:border-gray-600"})])],-1))])])])]),_:1}))}},ct=C(rt,[["__scopeId","data-v-ac45b639"]]);export{ct as default};
