import{E}from"./EmployeeLayout-BQLa5PLV.js";import{_ as y}from"./PrimaryButton-z6gddSkS.js";import{_ as R}from"./SearchInput-BHbkz-wy.js";import{_ as T}from"./DataTable-C_2NMP2T.js";import{g as x,h as A,W as h,d as k,o as n,w as r,b as s,a as m,c as f,e as B,f as b,t as i,n as C,F as j,r as H,u as $,P as I}from"./app-B0R_bMJi.js";import{_ as P}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./NavLink-BchASNUp.js";import"./DangerButton-DlTel5kP.js";const z={class:"flex justify-between items-center px-6"},O={class:"flex space-x-2"},U={class:"py-4 px-2 w-full"},W={class:"mb-4 flex flex-col md:flex-row justify-between items-start md:items-center gap-4 w-full"},G={class:"flex items-center justify-center"},J={class:"bg-white overflow-x-auto shadow-sm sm:rounded-lg w-full px-4"},K={class:"p-2 bg-white border-b border-gray-200"},Q={class:"truncate block w-32"},X={class:"truncate block w-48"},Y={class:"truncate block w-48"},Z={class:"flex space-x-2 min-w-[200px]"},ee={key:0,class:"mt-4 flex justify-center"},te={class:"flex flex-wrap -mb-1"},se=["innerHTML"],ae={__name:"Index",props:{requests:Object,filters:Object},setup(c){var g,v,w;const p=c,u=x(((g=p.filters)==null?void 0:g.search)||""),d=x(((v=p.filters)==null?void 0:v.sort_field)||"created_at"),l=x(((w=p.filters)==null?void 0:w.sort_direction)||"desc"),q=[{field:"customer_name",header:"Customer",sortable:!0},{field:"email",header:"Email",sortable:!0},{field:"changed_fields",header:"Changed Fields",sortable:!1},{field:"status",header:"Status",sortable:!0},{field:"created_at",header:"Submitted",sortable:!0},{field:"actions",header:"Actions",sortable:!1}],S=t=>{d.value===t?l.value=l.value==="asc"?"desc":"asc":(d.value=t,l.value="asc")},V=t=>{const a=[];return["first_name","middle_name","last_name","email","mobile","phone","building_number","street","barangay","city","province","zip_code"].forEach(e=>{t[e]!==null&&a.push(e.replace("_"," "))}),a.join(", ")||"No changes"},F=t=>({pending:"Pending",approved:"Approved",rejected:"Rejected"})[t]||t,L=t=>({pending:"text-yellow-600 bg-yellow-100 px-2 py-1 rounded text-xs",approved:"text-green-600 bg-green-100 px-2 py-1 rounded text-xs",rejected:"text-red-600 bg-red-100 px-2 py-1 rounded text-xs"})[t]||"text-gray-600 bg-gray-100 px-2 py-1 rounded text-xs",N=t=>new Date(t).toLocaleDateString(),M=t=>{h.get(route("admin.customer-update-requests.show",t))},D=()=>{h.reload({only:["requests"]})};return A([u,d,l],()=>{h.get(route("admin.customer-update-requests.index"),{search:u.value,sort_field:d.value,sort_direction:l.value,page:1},{preserveState:!0,replace:!0})},{deep:!0}),(t,a)=>(n(),k(E,null,{header:r(()=>[s("div",z,[a[2]||(a[2]=s("h2",{class:"text-xl font-semibold leading-tight text-gray-800"},"Customer Update Requests",-1)),s("div",O,[m(y,{onClick:D},{default:r(()=>a[1]||(a[1]=[b("Refresh")])),_:1})])])]),default:r(()=>{var _;return[s("div",U,[s("div",W,[m(R,{modelValue:u.value,"onUpdate:modelValue":a[0]||(a[0]=e=>u.value=e),placeholder:"Search customers...",class:"w-full md:w-64"},null,8,["modelValue"])]),s("div",G,[s("div",J,[s("div",K,[m(T,{columns:q,data:c.requests.data,"sort-field":d.value,"sort-direction":l.value,onSort:S,class:"w-full text-xs md:text-sm min-w-[700px]"},{customer_name:r(({row:e})=>{var o;return[s("span",Q,i(((o=e.customer)==null?void 0:o.name)||"N/A"),1)]}),email:r(({row:e})=>{var o;return[s("span",X,i(((o=e.customer)==null?void 0:o.email)||"N/A"),1)]}),changed_fields:r(({row:e})=>[s("span",Y,i(V(e)),1)]),status:r(({row:e})=>[s("span",{class:C(L(e.status))},i(F(e.status)),3)]),created_at:r(({row:e})=>[b(i(N(e.created_at)),1)]),actions:r(({row:e})=>[s("div",Z,[m(y,{onClick:o=>M(e.id)},{default:r(()=>a[3]||(a[3]=[b("View")])),_:2},1032,["onClick"])])]),_:1},8,["data","sort-field","sort-direction"]),((_=c.requests.links)==null?void 0:_.length)>3?(n(),f("div",ee,[s("div",te,[(n(!0),f(j,null,H(c.requests.links,(e,o)=>(n(),f(j,{key:o},[e.url?(n(),k($(I),{key:1,class:C(["mr-1 mb-1 px-4 py-3 text-sm leading-4 border rounded hover:bg-white focus:border-indigo-500 focus:text-indigo-500",{"bg-blue-700 text-white":e.active}]),href:e.url,innerHTML:e.label},null,8,["class","href","innerHTML"])):(n(),f("div",{key:0,class:"mr-1 mb-1 px-4 py-3 text-sm leading-4 text-gray-400 border rounded",innerHTML:e.label},null,8,se))],64))),128))])])):B("",!0)])])])])]}),_:1}))}},me=P(ae,[["__scopeId","data-v-c39343f9"]]);export{me as default};
