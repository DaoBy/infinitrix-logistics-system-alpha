import{a}from"./leaflet-src-CROi1vOD.js";import{g as s,L as c,h as i,c as g,o as f}from"./app-BllHWhcy.js";const h={__name:"MapPicker",props:{modelValue:{type:Object,default:()=>({lat:51.505,lng:-.09})},readonly:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(u,{emit:p}){const t=u,d=p,n=s(null),l=s(null),o=s(null),m=()=>{delete a.Icon.Default.prototype._getIconUrl,a.Icon.Default.mergeOptions({iconRetinaUrl:"https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon-2x.png",iconUrl:"https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.7.1/dist/images/marker-shadow.png"})};return c(()=>{n.value&&(m(),l.value=a.map(n.value).setView([t.modelValue.lat,t.modelValue.lng],13),a.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"Â© OpenStreetMap contributors"}).addTo(l.value),o.value=a.marker([t.modelValue.lat,t.modelValue.lng],{draggable:!t.readonly}).addTo(l.value),t.readonly||o.value.on("dragend",e=>{const r=e.target.getLatLng();d("update:modelValue",{lat:r.lat,lng:r.lng})}))}),i(()=>t.modelValue,e=>{o.value&&e&&(o.value.setLatLng([e.lat,e.lng]),l.value.panTo([e.lat,e.lng]))},{deep:!0}),(e,r)=>(f(),g("div",{ref_key:"mapContainer",ref:n,class:"w-full h-64 rounded-lg border border-gray-300"},null,512))}};export{h as _};
