import{c,o as d,b as t,g as y,d as T,w as n,a as l,e as g,t as a,u as h,f as i,n as V,W as x}from"./app-SYI-8bdC.js";import{E as z}from"./EmployeeLayout-B8SQYBgj.js";import{_ as k}from"./PrimaryButton-CBiTPJhk.js";import{_ as v}from"./SecondaryButton-BS-rbRq0.js";import{D as C}from"./DangerButton-CNs3xLhr.js";import{_ as E}from"./DataTable-CWybtFnL.js";import{M as I}from"./Modal-CyMVj4bP.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./NavLink-D6cPZaLM.js";function L(s,u){return d(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.5 12a7.5 7.5 0 0 0 15 0m-15 0a7.5 7.5 0 1 1 15 0m-15 0H3m16.5 0H21m-1.5 0H12m-8.457 3.077 1.41-.513m14.095-5.13 1.41-.513M5.106 17.785l1.15-.964m11.49-9.642 1.149-.964M7.501 19.795l.75-1.3m7.5-12.99.75-1.3m-6.063 16.658.26-1.477m2.605-14.772.26-1.477m0 17.726-.26-1.477M10.698 4.614l-.26-1.477M16.5 19.794l-.75-1.299M7.5 4.205 12 12m6.894 5.785-1.149-.964M6.256 7.178l-1.15-.964m15.352 8.864-1.41-.513M4.954 9.435l-1.41-.514M12.002 12l-3.75 6.495"})])}const P={class:"flex justify-between items-center w-full px-6 md:px-8"},F={class:"text-xl font-semibold leading-tight text-gray-800"},G={class:"flex gap-2"},W={class:"zoom-content"},O={class:"px-6 py-4"},R={key:0,class:"mb-4"},q={key:0,class:"p-3 bg-blue-100 text-blue-800 rounded"},J={key:1,class:"p-3 bg-green-100 text-green-800 rounded"},K={key:2,class:"p-3 bg-red-100 text-red-800 rounded"},Q={class:"mb-4 flex justify-between items-center"},U={class:"text-sm text-gray-500 bg-blue-50 px-3 py-1 rounded border border-blue-100"},X={class:"justify-center flex items-center"},Y={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg w-full max-w-[95vw]"},Z={class:"p-4 bg-white border-b border-gray-200"},ee={class:"font-medium text-gray-900"},te={class:"text-gray-700 capitalize"},se={class:"text-gray-700"},oe={class:"text-gray-600"},ne={class:"flex space-x-2"},ae={class:"text-center py-8"},le={class:"bg-gray-50 rounded-lg p-6 max-w-md mx-auto"},re={class:"p-5"},ie={class:"mt-1 text-sm text-gray-600"},de={class:"mt-4 flex justify-end space-x-3"},ce={key:0},ue={key:1},me={__name:"Index",props:{truck:Object,components:Array,status:String,success:String,error:String},setup(s){const u=s,b=y(!1),m=y(null),f=y(!1),D=[{field:"name",header:"Name",sortable:!0},{field:"type",header:"Type",sortable:!0},{field:"serial_number",header:"Serial Number",sortable:!0},{field:"condition",header:"Condition",sortable:!0},{field:"installation_date",header:"Installation Date",sortable:!0},{field:"actions",header:"Actions",sortable:!1}],N={new:"New",good:"Good",fair:"Fair",poor:"Poor",needs_replacement:"Needs Replacement"},M={new:"bg-green-100 text-green-800",good:"bg-blue-100 text-blue-800",fair:"bg-yellow-100 text-yellow-800",poor:"bg-orange-100 text-orange-800",needs_replacement:"bg-red-100 text-red-800"},A=r=>r?new Date(r).toLocaleDateString():"N/A",w=()=>{x.get(route("admin.trucks.components.create",u.truck.id))},B=r=>{x.get(route("admin.trucks.components.show",{truck:u.truck.id,component:r}))},S=r=>{x.get(route("admin.trucks.components.edit",{truck:u.truck.id,component:r}))},$=r=>{m.value=r,b.value=!0},p=()=>{b.value=!1,m.value=null,f.value=!1},j=async()=>{if(m.value){f.value=!0;try{await x.delete(route("admin.trucks.components.destroy",{truck:u.truck.id,component:m.value.id}),{preserveScroll:!0}),p()}catch{p(),alert("Failed to delete component. Please try again.")}finally{f.value=!1}}};return(r,e)=>(d(),T(z,null,{header:n(()=>[t("div",P,[t("div",null,[t("h2",F," Components - "+a(s.truck.make)+" "+a(s.truck.model)+" ("+a(s.truck.license_plate)+") ",1),e[1]||(e[1]=t("p",{class:"mt-1 text-sm text-gray-500"}," Manage truck components and their maintenance ",-1))]),t("div",G,[l(v,{onClick:e[0]||(e[0]=o=>h(x).get(r.route("admin.trucks.show",s.truck.id)))},{default:n(()=>e[2]||(e[2]=[i(" Back to Truck ")])),_:1}),l(k,{onClick:w},{default:n(()=>e[3]||(e[3]=[i(" Add New Component ")])),_:1})])])]),default:n(()=>[t("div",W,[t("div",O,[s.status||s.success||s.error?(d(),c("div",R,[s.status?(d(),c("div",q,a(s.status),1)):g("",!0),s.success?(d(),c("div",J,a(s.success),1)):g("",!0),s.error?(d(),c("div",K,a(s.error),1)):g("",!0)])):g("",!0),t("div",Q,[t("div",U," ðŸ“‹ Showing "+a(s.components.length)+" "+a(s.components.length===1?"component":"components"),1)]),t("div",X,[t("div",Y,[t("div",Z,[l(E,{columns:D,data:s.components,class:"w-full"},{name:n(({row:o})=>[t("span",ee,a(o.name||"N/A"),1)]),type:n(({row:o})=>[t("span",te,a(o.type.replace("_"," ")||"N/A"),1)]),serial_number:n(({row:o})=>[t("span",se,a(o.serial_number||"N/A"),1)]),condition:n(({row:o})=>[t("span",{class:V(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full capitalize",M[o.condition]])},a(N[o.condition]),3)]),installation_date:n(({row:o})=>[t("span",oe,a(A(o.installation_date)||"N/A"),1)]),actions:n(({row:o})=>[t("div",ne,[l(v,{onClick:_=>B(o.id),class:"text-xs py-1 px-2"},{default:n(()=>e[4]||(e[4]=[i("View")])),_:2},1032,["onClick"]),l(k,{onClick:_=>S(o.id),class:"text-xs py-1 px-2"},{default:n(()=>e[5]||(e[5]=[i("Edit")])),_:2},1032,["onClick"]),l(C,{onClick:_=>$(o),class:"text-xs py-1 px-2"},{default:n(()=>e[6]||(e[6]=[i("Delete")])),_:2},1032,["onClick"])])]),empty:n(()=>[t("div",ae,[t("div",le,[l(h(L),{class:"h-10 w-10 text-gray-400 mx-auto mb-3"}),e[8]||(e[8]=t("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"No components found",-1)),e[9]||(e[9]=t("p",{class:"text-gray-500 mb-3"}," Get started by adding your first component ",-1)),l(k,{onClick:w},{default:n(()=>e[7]||(e[7]=[i("Add New Component")])),_:1})])])]),_:1},8,["data"])])])])])]),l(I,{show:b.value,onClose:p},{default:n(()=>{var o;return[t("div",re,[e[13]||(e[13]=t("h2",{class:"text-lg font-medium text-gray-900"},"Delete Component?",-1)),t("p",ie,[e[10]||(e[10]=i(" Are you sure you want to delete ")),t("strong",null,a((o=m.value)==null?void 0:o.name),1),e[11]||(e[11]=i("? This action cannot be undone. "))]),t("div",de,[l(v,{onClick:p},{default:n(()=>e[12]||(e[12]=[i("Cancel")])),_:1}),l(C,{onClick:j,disabled:f.value},{default:n(()=>[f.value?(d(),c("span",ce,"Processing...")):(d(),c("span",ue,"Delete"))]),_:1},8,["disabled"])])])]}),_:1},8,["show"])]),_:1}))}},_e=H(me,[["__scopeId","data-v-3b1c10dd"]]);export{_e as default};
