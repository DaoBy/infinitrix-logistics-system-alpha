import{E as z}from"./EmployeeLayout-CgMY_n5V.js";import{_ as S}from"./PrimaryButton-eC2eu5yQ.js";import{_ as F}from"./SecondaryButton-f4DzqSLc.js";import{D as M}from"./DangerButton-B7_oj2jq.js";import{_ as R}from"./SearchInput-BSEud9IK.js";import{S as D}from"./SelectInput-BACJkmZB.js";import{_ as G}from"./DataTable-BArupUOg.js";import{M as J}from"./Modal-DAAK_Wm5.js";import{g as r,h as K,W as f,d as L,o as i,w as l,b as s,a,c as p,e as Q,f as o,t as n,F as j,r as X,u as Y,P as Z,n as ee}from"./app-BllHWhcy.js";import{_ as te}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./NavLink-BG8uMyS8.js";/* empty css                                                                    */const se={class:"flex justify-between items-center px-6"},le={class:"flex space-x-2"},ae={class:"py-4 px-2 w-full"},oe={class:"mb-4 flex flex-col md:flex-row justify-between items-start md:items-center gap-4 w-full"},re={class:"flex flex-wrap gap-2 w-full md:w-auto"},ie={class:"flex items-center justify-center"},ne={class:"bg-white overflow-x-auto shadow-sm sm:rounded-lg w-full px-4"},ue={class:"p-2 bg-white border-b border-gray-200"},ce={class:"truncate block w-32"},de={class:"truncate block w-32"},me={class:"truncate block w-48"},fe={class:"flex space-x-2 min-w-[200px]"},pe={key:0,class:"mt-4 flex justify-center"},ve={class:"flex flex-wrap -mb-1"},_e=["innerHTML"],ye={class:"p-6"},xe={class:"mt-1 text-sm text-gray-600"},be={class:"mt-6 flex justify-end space-x-4"},ge={key:0},he={key:1},we={__name:"Index",props:{customers:Object,status:String,success:String,error:String},setup(x){var A,k,V,N,T;const v=x,C=r(!1),c=r(null),_=r(!1),b=r(((A=v.customers.filters)==null?void 0:A.search)||""),g=r(((k=v.customers.filters)==null?void 0:k.customer_category)||""),h=r(((V=v.customers.filters)==null?void 0:V.frequency_type)||""),y=r(((N=v.customers.filters)==null?void 0:N.sort_field)||"created_at"),d=r(((T=v.customers.filters)==null?void 0:T.sort_direction)||"desc"),$=[{value:"",text:"All Types"},{value:"individual",text:"Individual"},{value:"company",text:"Company"}],B=[{value:"",text:"All Frequencies"},{value:"regular",text:"Regular"},{value:"occasional",text:"Occasional"}],E=[{field:"first_name",header:"First Name",sortable:!0},{field:"last_name",header:"Last Name",sortable:!0},{field:"email",header:"Email",sortable:!0},{field:"mobile",header:"Mobile",sortable:!1},{field:"customer_category",header:"Type",sortable:!0},{field:"frequency_type",header:"Frequency",sortable:!0},{field:"total_orders",header:"Orders",sortable:!0},{field:"actions",header:"Actions",sortable:!1}],I=u=>{y.value===u?d.value=d.value==="asc"?"desc":"asc":(y.value=u,d.value="asc")},O=u=>{c.value=u,C.value=!0},w=()=>{C.value=!1,setTimeout(()=>{c.value=null,_.value=!1},300)},U=async()=>{if(c.value){_.value=!0;try{await f.put(route("admin.customers.archive",c.value.id),{},{preserveScroll:!0}),w(),f.reload({only:["customers"]})}catch{w(),alert("Failed to archive customer. Please try again.")}finally{_.value=!1}}},H=()=>f.get(route("admin.customers.create")),P=u=>f.get(route("admin.customers.edit",u)),W=()=>f.get(route("admin.customers.archived"));return K([b,g,h,y,d],()=>{f.get(route("admin.customers.index"),{search:b.value,customer_category:g.value,frequency_type:h.value,sort_field:y.value,sort_direction:d.value,page:1},{preserveState:!0,replace:!0})},{deep:!0}),(u,t)=>(i(),L(z,null,{header:l(()=>[s("div",se,[t[5]||(t[5]=s("h2",{class:"text-xl font-semibold leading-tight text-gray-800"},"Customer Management",-1)),s("div",le,[a(S,{onClick:H},{default:l(()=>t[3]||(t[3]=[o("Add New Customer")])),_:1}),a(F,{onClick:W},{default:l(()=>t[4]||(t[4]=[o("View Disabled")])),_:1})])])]),default:l(()=>{var q;return[s("div",ae,[s("div",oe,[a(R,{modelValue:b.value,"onUpdate:modelValue":t[0]||(t[0]=e=>b.value=e),placeholder:"Search customers...",class:"w-full md:w-64"},null,8,["modelValue"]),s("div",re,[a(D,{modelValue:g.value,"onUpdate:modelValue":t[1]||(t[1]=e=>g.value=e),options:$,"option-value":"value","option-label":"text",placeholder:"All Types",class:"w-full md:w-40"},null,8,["modelValue"]),a(D,{modelValue:h.value,"onUpdate:modelValue":t[2]||(t[2]=e=>h.value=e),options:B,"option-value":"value","option-label":"text",placeholder:"All Frequencies",class:"w-full md:w-40"},null,8,["modelValue"])])]),s("div",ie,[s("div",ne,[s("div",ue,[a(G,{columns:E,data:x.customers.data,"sort-field":y.value,"sort-direction":d.value,onSort:I,class:"w-full text-xs md:text-sm min-w-[700px]"},{first_name:l(({row:e})=>[s("span",ce,n(e.first_name||"N/A"),1)]),last_name:l(({row:e})=>[s("span",de,n(e.last_name||"N/A"),1)]),email:l(({row:e})=>[s("span",me,n(e.email||"N/A"),1)]),mobile:l(({row:e})=>[o(n(e.mobile||"N/A"),1)]),customer_category:l(({row:e})=>[o(n(e.customer_category?e.customer_category.charAt(0).toUpperCase()+e.customer_category.slice(1):"N/A"),1)]),frequency_type:l(({row:e})=>[o(n(e.frequency_type?e.frequency_type.charAt(0).toUpperCase()+e.frequency_type.slice(1):"N/A"),1)]),total_orders:l(({row:e})=>[o(n(e.total_orders||0),1)]),actions:l(({row:e})=>[s("div",fe,[a(S,{onClick:m=>P(e.id)},{default:l(()=>t[6]||(t[6]=[o("Edit")])),_:2},1032,["onClick"]),a(M,{onClick:m=>O(e)},{default:l(()=>t[7]||(t[7]=[o("Disable")])),_:2},1032,["onClick"])])]),_:1},8,["data","sort-field","sort-direction"]),((q=x.customers.links)==null?void 0:q.length)>3?(i(),p("div",pe,[s("div",ve,[(i(!0),p(j,null,X(x.customers.links,(e,m)=>(i(),p(j,{key:m},[e.url?(i(),L(Y(Z),{key:1,class:ee(["mr-1 mb-1 px-4 py-3 text-sm leading-4 border rounded hover:bg-white focus:border-indigo-500 focus:text-indigo-500",{"bg-blue-700 text-white":e.active}]),href:e.url,innerHTML:e.label},null,8,["class","href","innerHTML"])):(i(),p("div",{key:0,class:"mr-1 mb-1 px-4 py-3 text-sm leading-4 text-gray-400 border rounded",innerHTML:e.label},null,8,_e))],64))),128))])])):Q("",!0)])])]),a(J,{show:C.value,onClose:w},{default:l(()=>{var e,m;return[s("div",ye,[t[11]||(t[11]=s("h2",{class:"text-lg font-medium text-gray-900"},"Disable Customer?",-1)),s("p",xe,[t[8]||(t[8]=o(" Are you sure you want to disable ")),s("strong",null,n(((e=c.value)==null?void 0:e.name)||((m=c.value)==null?void 0:m.company_name)),1),t[9]||(t[9]=o("? This action can be undone later if needed. "))]),s("div",be,[a(F,{onClick:w},{default:l(()=>t[10]||(t[10]=[o("Cancel")])),_:1}),a(M,{onClick:U,disabled:_.value},{default:l(()=>[_.value?(i(),p("span",ge,"Disabling...")):(i(),p("span",he,"Disable"))]),_:1},8,["disabled"])])])]}),_:1},8,["show"])])]}),_:1}))}},je=te(we,[["__scopeId","data-v-036ce96f"]]);export{je as default};
