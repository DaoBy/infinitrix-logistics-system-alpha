import{_ as F}from"./GuestLayout-BSXXNRvV.js";import{_ as O}from"./PrimaryButton-eC2eu5yQ.js";import{_ as R}from"./SearchInput-BSEud9IK.js";import{c as m,o as i,b as e,e as u,t as c,n as A,F as E,r as H,f as S,g as j,i as B,h as P,W as y,d as f,w as v,a as $,u as U}from"./app-BllHWhcy.js";import{T as W}from"./TransactionHistoryTable-BK5VJVOv.js";import{P as M}from"./Pagination-clkSGD3h.js";import"./NavLink-BG8uMyS8.js";import"./NavBar-DbsdnckV.js";import"./DropdownLink-d87M3hbx.js";import"./SecondaryButton-f4DzqSLc.js";import"./DataTable-BArupUOg.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const I={class:"flex items-center"},G={key:0,class:"w-5 h-5 mr-2 text-blue-800",fill:"currentColor",viewBox:"0 0 20 20"},J={key:1,class:"w-5 h-5 mr-2 text-green-800",fill:"currentColor",viewBox:"0 0 20 20"},K={key:2,class:"w-5 h-5 mr-2 text-red-800",fill:"currentColor",viewBox:"0 0 20 20"},Q={key:3,class:"w-5 h-5 mr-2 text-yellow-800",fill:"currentColor",viewBox:"0 0 20 20"},L={__name:"Alert",props:{type:{type:String,default:"info",validator:t=>["info","success","danger","warning","neutral"].includes(t)},message:{type:String,required:!0}},setup(t){return(d,r)=>(i(),m("div",{class:A(["p-4 mb-4 rounded",{"bg-blue-100 text-blue-800":t.type==="info","bg-green-100 text-green-800":t.type==="success","bg-red-100 text-red-800":t.type==="danger","bg-yellow-100 text-yellow-800":t.type==="warning","bg-gray-100 text-gray-800":t.type==="neutral"}])},[e("div",I,[t.type==="info"?(i(),m("svg",G,r[0]||(r[0]=[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2h-1V9z","clip-rule":"evenodd"},null,-1)]))):u("",!0),t.type==="success"?(i(),m("svg",J,r[1]||(r[1]=[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):u("",!0),t.type==="danger"?(i(),m("svg",K,r[2]||(r[2]=[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"},null,-1)]))):u("",!0),t.type==="warning"?(i(),m("svg",Q,r[3]||(r[3]=[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"},null,-1)]))):u("",!0),e("span",null,c(t.message),1)])],2))}},X={class:"min-w-full divide-y divide-gray-200"},Y={class:"bg-white divide-y divide-gray-200"},Z={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ee={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},te={key:0,class:"text-xs text-gray-500 block"},se={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},re={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ae={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ne={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ie={class:"px-6 py-4 whitespace-nowrap"},oe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},le={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},de={class:"flex space-x-2"},ce=["onClick"],ue=["onClick"],me={key:0},xe={__name:"DeliveryRequestTable",props:{requests:Object},emits:["view","edit"],setup(t){const d=l=>{switch(l){case"pending":return"bg-yellow-100 text-yellow-800";case"draft":return"bg-gray-100 text-gray-800";case"approved":return"bg-blue-100 text-blue-800";case"completed":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},r=l=>!l||typeof l!="string"?"":l.charAt(0).toUpperCase()+l.slice(1),p=l=>{if(!l)return"—";const g=new Date(l);return isNaN(g.getTime())?"—":g.toLocaleDateString()};return(l,g)=>(i(),m("table",X,[g[1]||(g[1]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"ID"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Receiver"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Pickup Region"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Drop-off Region"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Packages"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Total Price"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Created"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",Y,[(i(!0),m(E,null,H(t.requests.data,a=>{var V,q,w,h;return i(),m("tr",{key:a.id},[e("td",Z,c(a.id),1),e("td",ee,[S(c(((V=a.receiver)==null?void 0:V.name)||"N/A")+" ",1),(q=a.receiver)!=null&&q.company_name?(i(),m("span",te,c(a.receiver.company_name),1)):u("",!0)]),e("td",se,c(((w=a.pick_up_region)==null?void 0:w.name)||"N/A"),1),e("td",re,c(((h=a.drop_off_region)==null?void 0:h.name)||"N/A"),1),e("td",ae,c(a.package_count),1),e("td",ne,"₱"+c(parseFloat(a.total_price).toFixed(2)),1),e("td",ie,[e("span",{class:A(`inline-flex px-3 py-1 text-xs font-semibold leading-5 rounded-full ${d(a.status)}`)},c(r(a.status)),3)]),e("td",oe,c(p(a.created_at)),1),e("td",le,[e("div",de,[e("button",{onClick:s=>l.$emit("view",a.id),class:"text-indigo-600 hover:text-indigo-900 px-2 py-1 rounded-md hover:bg-indigo-50 transition-colors text-xs"}," View ",8,ce),a.status==="draft"?(i(),m("button",{key:0,onClick:s=>l.$emit("edit",a.id),class:"text-green-600 hover:text-green-900 px-2 py-1 rounded-md hover:bg-green-50 transition-colors text-xs"}," Edit ",8,ue)):u("",!0)])])])}),128)),t.requests.data.length===0?(i(),m("tr",me,g[0]||(g[0]=[e("td",{colspan:"9",class:"px-6 py-4 text-center text-sm text-gray-500"},"No delivery requests found.",-1)]))):u("",!0)])]))}},pe={class:"flex justify-between items-center px-6"},ge={class:"px-6 sm:px-8"},ye={key:0,class:"mb-6"},fe={class:"mb-8"},ve={class:"flex justify-between items-center mb-4"},we={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},he={class:"p-5 bg-white border-b border-gray-200"},be={class:"flex justify-between items-center mb-4"},ke={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},_e={class:"p-5 bg-white border-b border-gray-200"},Be={__name:"DeliveryDashboard",props:{requests:Object,transactions:Object,filters:Object,status:String,success:String,error:String},setup(t){var w,h;const d=t,r=j(((w=d.filters)==null?void 0:w.request_search)||""),p=j(((h=d.filters)==null?void 0:h.transaction_search)||""),l=B(()=>{var x;if(!((x=d.requests)!=null&&x.data))return{data:[],links:[]};if(!r.value)return d.requests;const s=r.value.toLowerCase(),n=d.requests.data.filter(o=>{var b,k,_,C;return o.id.toString().includes(s)||(((b=o.receiver)==null?void 0:b.name)||"").toLowerCase().includes(s)||(((k=o.receiver)==null?void 0:k.company_name)||"").toLowerCase().includes(s)||(((_=o.pick_up_region)==null?void 0:_.name)||"").toLowerCase().includes(s)||(((C=o.drop_off_region)==null?void 0:C.name)||"").toLowerCase().includes(s)||o.status.toLowerCase().includes(s)||o.total_price.toString().includes(s)});return{...d.requests,data:n}}),g=B(()=>{var x;if(!((x=d.transactions)!=null&&x.data))return{data:[],links:[]};if(!p.value)return d.transactions;const s=p.value.toLowerCase(),n=d.transactions.data.filter(o=>{var b,k,_,C,D,z,N,T;return o.id.toString().includes(s)||(((k=(b=o.delivery_request)==null?void 0:b.receiver)==null?void 0:k.name)||"").toLowerCase().includes(s)||(((C=(_=o.delivery_request)==null?void 0:_.receiver)==null?void 0:C.company_name)||"").toLowerCase().includes(s)||(((z=(D=o.delivery_request)==null?void 0:D.pick_up_region)==null?void 0:z.name)||"").toLowerCase().includes(s)||(((T=(N=o.delivery_request)==null?void 0:N.drop_off_region)==null?void 0:T.name)||"").toLowerCase().includes(s)||o.status.toLowerCase().includes(s)||o.total_amount.toString().includes(s)});return{...d.transactions,data:n}}),a=s=>{y.visit(route("customer.delivery-requests.show",s))},V=s=>{y.visit(route("customer.payments.show",s))},q=s=>{y.visit(route("customer.delivery-requests.edit",s))};return P(r,()=>{y.get(route("customer.delivery-dashboard.index"),{request_search:r.value,transaction_search:p.value},{preserveState:!0,replace:!0})}),P(p,()=>{y.get(route("customer.delivery-dashboard.index"),{request_search:r.value,transaction_search:p.value},{preserveState:!0,replace:!0})}),(s,n)=>(i(),f(F,null,{header:v(()=>[e("div",pe,[n[4]||(n[4]=e("h2",{class:"text-xl font-semibold leading-tight text-gray-800"}," My Deliveries ",-1)),$(O,{onClick:n[0]||(n[0]=x=>U(y).visit(s.route("customer.delivery-requests.create")))},{default:v(()=>n[3]||(n[3]=[S(" + New Request ")])),_:1})])]),default:v(()=>[e("div",ge,[t.status||t.success||t.error?(i(),m("div",ye,[t.status?(i(),f(L,{key:0,type:"info"},{default:v(()=>[S(c(t.status),1)]),_:1})):u("",!0),t.success?(i(),f(L,{key:1,type:"success"},{default:v(()=>[S(c(t.success),1)]),_:1})):u("",!0),t.error?(i(),f(L,{key:2,type:"danger"},{default:v(()=>[S(c(t.error),1)]),_:1})):u("",!0)])):u("",!0),e("div",fe,[e("div",ve,[n[5]||(n[5]=e("h3",{class:"text-lg font-medium text-gray-900"},"Pending Delivery Requests",-1)),$(R,{modelValue:r.value,"onUpdate:modelValue":n[1]||(n[1]=x=>r.value=x),placeholder:"Search requests...",class:"w-64"},null,8,["modelValue"])]),e("div",we,[e("div",he,[$(xe,{requests:l.value,onView:a,onEdit:q},null,8,["requests"])])]),t.requests&&t.requests.meta?(i(),f(M,{key:0,links:t.requests.links,meta:t.requests.meta,class:"mt-4"},null,8,["links","meta"])):u("",!0)]),e("div",null,[e("div",be,[n[6]||(n[6]=e("h3",{class:"text-lg font-medium text-gray-900"},"Transaction History",-1)),$(R,{modelValue:p.value,"onUpdate:modelValue":n[2]||(n[2]=x=>p.value=x),placeholder:"Search transactions...",class:"w-64"},null,8,["modelValue"])]),e("div",ke,[e("div",_e,[$(W,{transactions:g.value,onViewRequest:a,onViewPayment:V},null,8,["transactions"])])]),t.transactions&&t.transactions.meta?(i(),f(M,{key:0,links:t.transactions.links,meta:t.transactions.meta,class:"mt-4"},null,8,["links","meta"])):u("",!0)])])]),_:1}))}};export{Be as default};
