import{C as F,g as V,i as C,h as S,d as D,o as a,w as c,b as e,c as i,e as y,t as r,F as v,r as h,f as m,s as I,J as w,a as d,n as g,u as o,a2 as T,a1 as A,P as N}from"./app-DSvpKds8.js";import{_ as B}from"./GuestLayout-CrRd8zD7.js";import{T as k}from"./TextInput-CJ3lJQBG.js";import{_ as U}from"./TextArea-C2wlkUXD.js";import{_ as f}from"./InputError-DrakuRbM.js";import{_ as $}from"./PrimaryButton-BaAbC_Sk.js";import{_ as M}from"./SecondaryButton-BMk3kL1H.js";import{L as R}from"./LoadingSpinner-w3_eh3dv.js";import{r as j}from"./InformationCircleIcon-DUKb-fJ9.js";import"./NavLink-B7vUiQXa.js";import"./NavBar-DIHlWEI2.js";import"./DropdownLink-xELI-7XH.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./XCircleIcon-C9zDqzHg.js";import"./CheckCircleIcon-DVzjDQP2.js";import"./ExclamationTriangleIcon-Dbfb3SzA.js";import"./TruckIcon-BasH9P74.js";/* empty css                                                                  */const G={class:"flex justify-between items-center"},E={class:"text-xl font-semibold text-gray-800"},L={key:0,class:"text-sm text-gray-600 mt-1"},O={class:"max-w-4xl mx-auto py-6 px-4 sm:px-6 lg:px-8"},Q={class:"bg-white shadow rounded-lg mb-6 overflow-hidden"},z={class:"px-6 py-4"},Y={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},q={class:"text-gray-900"},J={class:"text-sm text-gray-600"},W={class:"text-sm text-gray-600"},H={class:"text-gray-900"},K={class:"text-sm text-gray-600"},X={class:"text-sm text-gray-600"},Z={class:"mt-6"},ee={class:"bg-gray-50 rounded-lg p-4 border border-gray-200"},te={class:"font-medium text-gray-900"},se={class:"text-sm text-gray-600 space-y-1"},oe={class:"mt-6 p-4 bg-white rounded-lg border border-gray-200"},le={class:"flex justify-between items-center"},re={class:"text-2xl font-bold text-gray-800"},ne={key:0,class:"bg-blue-50 border border-blue-200 rounded-lg p-6 mb-6"},ae={class:"flex flex-col md:flex-row gap-6"},ie={class:"flex-1"},de={key:0,class:"space-y-3"},me={class:"list-decimal list-inside space-y-2 text-sm text-blue-800"},ue={key:1,class:"space-y-3"},ye={class:"text-sm text-blue-800 space-y-2"},pe={key:0,class:"flex flex-col items-center justify-center"},ce={class:"bg-white shadow rounded-lg overflow-hidden"},fe={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ge={class:"md:col-span-2"},be={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},xe=["onClick"],ve={class:"flex items-center"},he=["id","value","onUpdate:modelValue"],we=["for"],ke={key:0,class:"md:col-span-2 bg-yellow-50 border border-yellow-200 rounded-lg p-4 mt-2"},_e={class:"flex items-center"},Pe={class:"text-yellow-800 text-sm"},Fe={key:1,class:"md:col-span-2"},Ve={class:"md:col-span-2"},Ce={class:"mt-1 text-sm text-gray-500"},Se={class:"md:col-span-2"},De={class:"md:col-span-2"},Ie={class:"mt-6 flex justify-end space-x-3"},Te={key:0},Ae={key:1},Ke={__name:"Create",props:{delivery:Object,paymentMethods:Array,paymentType:{type:String,default:"prepaid"}},setup(n){const x=n,s=F({method:"",reference_number:"",amount:parseFloat(x.delivery.total_price),receipt_image:null,notes:""}),u=V(""),_=C(()=>u.value&&u.value!=="cash");S(()=>s.method,p=>{u.value=p});const P=()=>{console.log("Submitting payment form:",s.data()),s.post(route("customer.payments.store",x.delivery.id),{forceFormData:!0,onSuccess:()=>{console.log("Payment submitted successfully"),s.reset()},onError:p=>{console.log("Form errors:",p)},onFinish:()=>{console.log("Form submission finished")}})};return(p,t)=>(a(),D(B,null,{header:c(()=>[e("div",G,[e("div",null,[e("h2",E,r(n.paymentType==="postpaid"?"Settle Postpaid Payment":"Make Payment")+" - Delivery #"+r(n.delivery.reference_number),1),n.paymentType==="postpaid"?(a(),i("p",L," Your delivery is complete. Please settle your payment online. ")):y("",!0)]),d(o(N),{href:p.route("customer.delivery-requests.show",n.delivery.id),as:"button"},{default:c(()=>[d(M,null,{default:c(()=>t[4]||(t[4]=[m(" ← Back to Delivery Details ")])),_:1})]),_:1},8,["href"])])]),default:c(()=>[e("div",O,[e("div",Q,[t[12]||(t[12]=e("div",{class:"px-6 py-4 border-b border-gray-200 bg-gray-50"},[e("h3",{class:"text-lg font-medium text-gray-900"},"Delivery Summary")],-1)),e("div",z,[e("div",Y,[e("div",null,[t[5]||(t[5]=e("h4",{class:"font-medium text-gray-700 mb-2"},"Sender Information",-1)),e("p",q,r(n.delivery.sender.name),1),e("p",J,r(n.delivery.sender.email),1),e("p",W,r(n.delivery.sender.mobile),1)]),e("div",null,[t[6]||(t[6]=e("h4",{class:"font-medium text-gray-700 mb-2"},"Receiver Information",-1)),e("p",H,r(n.delivery.receiver.name),1),e("p",K,r(n.delivery.receiver.email),1),e("p",X,r(n.delivery.receiver.mobile),1)])]),e("div",Z,[t[10]||(t[10]=e("h4",{class:"font-medium text-gray-700 mb-2"},"Package Details",-1)),e("div",ee,[(a(!0),i(v,null,h(n.delivery.packages,(l,b)=>(a(),i("div",{key:l.id,class:"mb-3 last:mb-0 pb-3 last:pb-0 border-b last:border-b-0 border-gray-200"},[e("p",te,r(l.item_name),1),e("div",se,[e("p",null,[t[7]||(t[7]=e("span",{class:"font-medium"},"Weight:",-1)),m(" "+r(l.weight)+" kg",1)]),e("p",null,[t[8]||(t[8]=e("span",{class:"font-medium"},"Dimensions:",-1)),m(" "+r(l.height)+" cm × "+r(l.width)+" cm × "+r(l.length)+" cm ",1)]),e("p",null,[t[9]||(t[9]=e("span",{class:"font-medium"},"Package Value:",-1)),m(" ₱"+r(parseFloat(l.value).toFixed(2)),1)])])]))),128))])]),e("div",oe,[e("div",le,[t[11]||(t[11]=e("span",{class:"text-lg font-semibold text-gray-900"},"Total Amount Due:",-1)),e("span",re,"₱"+r(parseFloat(n.delivery.total_price).toFixed(2)),1)])])])]),_.value?(a(),i("div",ne,[e("div",ae,[e("div",ie,[t[28]||(t[28]=e("h3",{class:"text-lg font-medium text-blue-800 mb-3"},"Payment Instructions",-1)),u.value==="gcash"?(a(),i("div",de,[t[20]||(t[20]=e("h4",{class:"font-medium text-blue-700"},"💳 GCash Payment Instructions",-1)),e("ol",me,[t[14]||(t[14]=e("li",null,"Open your GCash app",-1)),t[15]||(t[15]=e("li",null,'Go to "Scan QR Code"',-1)),t[16]||(t[16]=e("li",null,"Scan the QR code on the right",-1)),e("li",null,[t[13]||(t[13]=m("Verify the amount: ")),e("strong",null,"₱"+r(parseFloat(n.delivery.total_price).toFixed(2)),1)]),t[17]||(t[17]=e("li",null,"Complete the transaction",-1)),t[18]||(t[18]=e("li",null,"Take a screenshot of the confirmation",-1)),t[19]||(t[19]=e("li",null,"Upload the screenshot below",-1))])])):u.value==="bank"?(a(),i("div",ue,[t[27]||(t[27]=e("h4",{class:"font-medium text-blue-700"},"🏦 Bank Transfer Instructions",-1)),e("div",ye,[t[23]||(t[23]=e("p",null,[e("strong",null,"Bank:"),m(" Sample Bank")],-1)),t[24]||(t[24]=e("p",null,[e("strong",null,"Account Name:"),m(" Infinitrix Logistics")],-1)),t[25]||(t[25]=e("p",null,[e("strong",null,"Account Number:"),m(" 1234-5678-9012")],-1)),e("p",null,[t[21]||(t[21]=e("strong",null,"Amount:",-1)),m(" ₱"+r(parseFloat(n.delivery.total_price).toFixed(2)),1)]),e("p",null,[t[22]||(t[22]=e("strong",null,"Reference:",-1)),m(" "+r(n.delivery.reference_number),1)]),t[26]||(t[26]=e("p",{class:"mt-2"},"After completing the transfer, please take a screenshot of the confirmation and upload it below.",-1))])])):y("",!0)]),u.value==="gcash"?(a(),i("div",pe,t[29]||(t[29]=[e("div",{class:"bg-white p-4 rounded-lg border border-gray-200"},[e("div",{class:"w-40 h-40 bg-gray-200 flex items-center justify-center mb-2"},[e("span",{class:"text-gray-500 text-sm"},"GCash QR Code")]),e("p",{class:"text-xs text-center text-gray-600 mt-2"},"Scan to pay with GCash")],-1)]))):y("",!0)])])):y("",!0),e("div",ce,[t[39]||(t[39]=e("div",{class:"px-6 py-4 border-b border-gray-200 bg-gray-50"},[e("h3",{class:"text-lg font-medium text-gray-900"},"Payment Information")],-1)),e("form",{onSubmit:I(P,["prevent"]),class:"px-6 py-4",enctype:"multipart/form-data"},[e("div",fe,[e("div",ge,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Payment Method * ",-1)),e("div",be,[(a(!0),i(v,null,h(n.paymentMethods,l=>(a(),i("div",{key:l,onClick:b=>o(s).method=l,class:g(["border rounded-lg p-4 cursor-pointer transition-colors",o(s).method===l?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"])},[e("div",ve,[w(e("input",{type:"radio",id:`method-${l}`,value:l,"onUpdate:modelValue":b=>o(s).method=b,class:"h-4 w-4 text-blue-600 focus:ring-blue-500"},null,8,he),[[T,o(s).method]]),e("label",{for:`method-${l}`,class:"ml-3 block text-sm font-medium text-gray-700 capitalize"},r(l),9,we)])],10,xe))),128))]),d(f,{message:o(s).errors.method,class:"mt-2"},null,8,["message"])]),n.delivery.payment_method==="cash"&&o(s).method&&o(s).method!=="cash"?(a(),i("div",ke,[e("div",_e,[d(o(j),{class:"h-5 w-5 text-yellow-400 mr-2"}),e("span",Pe,[t[31]||(t[31]=e("strong",null,"Note:",-1)),m(" Your payment method will be updated from Cash to "+r(o(s).method.toUpperCase())+". Future communications will reference this payment method. ",1)])])])):y("",!0),o(s).method&&o(s).method!=="cash"?(a(),i("div",Fe,[t[32]||(t[32]=e("label",{for:"reference_number",class:"block text-sm font-medium text-gray-700"}," Reference Number * ",-1)),d(k,{id:"reference_number",modelValue:o(s).reference_number,"onUpdate:modelValue":t[0]||(t[0]=l=>o(s).reference_number=l),type:"text",class:g(["mt-1 block w-full",{"border-red-500":o(s).errors.reference_number}]),placeholder:"Enter transaction reference number"},null,8,["modelValue","class"]),d(f,{message:o(s).errors.reference_number,class:"mt-2"},null,8,["message"]),t[33]||(t[33]=e("p",{class:"mt-1 text-sm text-gray-500"}," Please enter the exact reference number from your transaction. ",-1))])):y("",!0),w(e("div",Ve,[t[34]||(t[34]=e("label",{for:"amount",class:"block text-sm font-medium text-gray-700"}," Amount * ",-1)),d(k,{id:"amount",modelValue:o(s).amount,"onUpdate:modelValue":t[1]||(t[1]=l=>o(s).amount=l),type:"number",step:"0.01",min:"0.01",class:g(["mt-1 block w-full",{"border-red-500":o(s).errors.amount}]),placeholder:"Enter payment amount"},null,8,["modelValue","class"]),d(f,{message:o(s).errors.amount,class:"mt-2"},null,8,["message"]),e("p",Ce," Total due: ₱"+r(parseFloat(n.delivery.total_price).toFixed(2)),1)],512),[[A,!1]]),e("div",Se,[t[35]||(t[35]=e("label",{for:"receipt_image",class:"block text-sm font-medium text-gray-700"}," Payment Proof (Screenshot/Photo) * ",-1)),e("input",{id:"receipt_image",type:"file",onInput:t[2]||(t[2]=l=>o(s).receipt_image=l.target.files[0]),accept:"image/*",class:g(["mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100",{"border-red-500":o(s).errors.receipt_image}])},null,34),d(f,{message:o(s).errors.receipt_image,class:"mt-2"},null,8,["message"]),t[36]||(t[36]=e("p",{class:"mt-1 text-sm text-gray-500"}," Upload a clear screenshot or photo of your payment confirmation ",-1))]),e("div",De,[t[37]||(t[37]=e("label",{for:"notes",class:"block text-sm font-medium text-gray-700"}," Additional Notes (Optional) ",-1)),d(U,{id:"notes",modelValue:o(s).notes,"onUpdate:modelValue":t[3]||(t[3]=l=>o(s).notes=l),rows:3,class:"mt-1 block w-full",placeholder:"Any additional information about your payment..."},null,8,["modelValue"]),d(f,{message:o(s).errors.notes,class:"mt-2"},null,8,["message"])])]),e("div",Ie,[d($,{type:"submit",disabled:o(s).processing},{default:c(()=>[o(s).processing?(a(),i("span",Te,[d(R,{class:"w-4 h-4 mr-2"}),t[38]||(t[38]=m(" Processing Payment... "))])):(a(),i("span",Ae," Submit Payment "))]),_:1},8,["disabled"])])],32)])])]),_:1}))}};export{Ke as default};
