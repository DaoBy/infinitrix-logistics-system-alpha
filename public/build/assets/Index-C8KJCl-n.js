import{p as O,h as q,d as x,o as d,w as u,b as e,a as y,u as c,P as m,f as g,v as h,q as L,x as T,L as N,t as n,c as l,e as f,F as P,r as S,n as R,W as E}from"./app-DfDxEqBg.js";import{E as M}from"./EmployeeLayout-CIwV2LFp.js";import{P as V}from"./Pagination-BU1iQEyv.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./NavLink-Dm252fTo.js";import"./DangerButton-CCeglgOy.js";const U={class:"space-y-6"},F={class:"sm:flex sm:items-center"},I={class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},K={class:"bg-white shadow rounded-lg"},W={class:"p-4 border-b border-gray-200"},z={class:"flex flex-col sm:flex-row gap-4"},G={class:"flex-1"},H={class:"sm:w-48"},J={class:"sm:w-48"},Q={class:"grid grid-cols-1 gap-5 sm:grid-cols-3"},X={class:"bg-white overflow-hidden shadow rounded-lg"},Y={class:"px-4 py-5 sm:p-6"},Z={class:"mt-1 text-3xl font-semibold text-gray-900"},$={class:"bg-white overflow-hidden shadow rounded-lg"},ee={class:"px-4 py-5 sm:p-6"},te={class:"mt-1 text-3xl font-semibold text-gray-900"},se={class:"bg-white overflow-hidden shadow rounded-lg"},ne={class:"px-4 py-5 sm:p-6"},ae={class:"mt-1 text-3xl font-semibold text-gray-900"},de={class:"bg-white shadow rounded-lg"},oe={class:"overflow-hidden"},re={class:"min-w-full divide-y divide-gray-200"},le={class:"bg-white divide-y divide-gray-200"},ie={class:"px-6 py-4 whitespace-nowrap"},ue={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},pe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},xe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},ce={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},me={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},ge={key:0},fe={key:1,class:"text-gray-400"},ye={class:"px-6 py-4 whitespace-nowrap"},he={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},we={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},be={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},_e={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ve={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},je={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ke={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},Ae={key:0},Ce={class:"flex justify-between items-center px-4 py-3 border-t border-gray-200"},De={__name:"Index",props:{refunds:Object,needsAdjustment:Object,stats:{type:Object,default:()=>({pending_refunds:0,pending_adjustments:0,needs_adjustment:0})},filters:Object},setup(a){var b,_,v,j;const p=a,o=O({search:((b=p.filters)==null?void 0:b.search)||"",type:((_=p.filters)==null?void 0:_.type)||"",status:((v=p.filters)==null?void 0:v.status)||"",reason:((j=p.filters)==null?void 0:j.reason)||""});function i(){E.get(route("refunds.index"),o,{preserveState:!0,replace:!0})}function B(r){return{refund:"bg-purple-100 text-purple-800",adjustment:"bg-orange-100 text-orange-800"}[r]||"bg-gray-100 text-gray-800"}function D(r){return{pending:"bg-yellow-100 text-yellow-800",pending_adjustment:"bg-yellow-100 text-yellow-800",processed:"bg-green-100 text-green-800",adjusted:"bg-green-100 text-green-800"}[r]||"bg-gray-100 text-gray-800"}function w(r){return new Date(r).toLocaleDateString()}return q(()=>o.search,()=>{(o.search===""||o.search.length>=3)&&i()}),(r,t)=>(d(),x(M,null,{default:u(()=>{var k,A,C;return[e("div",U,[e("div",F,[t[4]||(t[4]=e("div",{class:"sm:flex-auto"},[e("h1",{class:"text-2xl font-semibold text-gray-900"},"Refunds & Adjustments"),e("p",{class:"mt-2 text-sm text-gray-700"}," Manage customer refunds and invoice adjustments for delivery issues. ")],-1)),e("div",I,[y(c(m),{href:r.route("refunds.create"),class:"inline-flex items-center justify-center rounded-md border border-transparent bg-blue-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 sm:w-auto"},{default:u(()=>t[3]||(t[3]=[g(" Create Refund/Adjustment ")])),_:1},8,["href"])])]),e("div",K,[e("div",W,[e("div",z,[e("div",G,[h(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>o.search=s),type:"text",placeholder:"Search by reference number or sender...",class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",onKeyup:L(i,["enter"])},null,544),[[T,o.search]])]),e("div",H,[h(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>o.type=s),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",onChange:i},t[5]||(t[5]=[e("option",{value:""},"All Types",-1),e("option",{value:"refund"},"Refund",-1),e("option",{value:"adjustment"},"Adjustment",-1),e("option",{value:"needs_adjustment"},"Needs Adjustment",-1)]),544),[[N,o.type]])]),e("div",J,[h(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>o.status=s),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",onChange:i},t[6]||(t[6]=[e("option",{value:""},"All Status",-1),e("option",{value:"pending"},"Pending Refund",-1),e("option",{value:"pending_adjustment"},"Pending Adjustment",-1),e("option",{value:"processed"},"Processed Refund",-1),e("option",{value:"adjusted"},"Adjusted Invoice",-1),e("option",{value:"needs_adjustment"},"Needs Adjustment",-1)]),544),[[N,o.status]])]),e("button",{onClick:i,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Search ")])])]),e("div",Q,[e("div",X,[e("div",Y,[t[7]||(t[7]=e("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Pending Refunds",-1)),e("dd",Z,n(((k=a.stats)==null?void 0:k.pending_refunds)||0),1)])]),e("div",$,[e("div",ee,[t[8]||(t[8]=e("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Pending Adjustments",-1)),e("dd",te,n(((A=a.stats)==null?void 0:A.pending_adjustments)||0),1)])]),e("div",se,[e("div",ne,[t[9]||(t[9]=e("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Needs Adjustment",-1)),e("dd",ae,n(((C=a.stats)==null?void 0:C.needs_adjustment)||0),1)])])]),e("div",de,[e("div",oe,[e("table",re,[t[17]||(t[17]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Type "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Reference "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Sender "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Original Amount "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Adjustment/Refund "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," New Amount Due "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Created "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),e("tbody",le,[(d(!0),l(P,null,S(a.refunds.data,s=>(d(),l("tr",{key:s.id},[e("td",ie,[e("span",{class:R([B(s.type),"inline-flex px-2 text-xs font-semibold leading-5 rounded-full"])},n(s.type_label),3)]),e("td",ue,n(s.delivery_request.reference_number),1),e("td",pe,n(s.delivery_request.sender.name),1),e("td",xe," ₱"+n(s.original_amount),1),e("td",ce," ₱"+n(s.refund_amount),1),e("td",me,[s.type==="adjustment"&&s.adjusted_amount?(d(),l("span",ge," ₱"+n(s.adjusted_amount),1)):(d(),l("span",fe,"—"))]),e("td",ye,[e("span",{class:R([D(s.status),"inline-flex px-2 text-xs font-semibold leading-5 rounded-full"])},n(s.status_label),3)]),e("td",he,n(w(s.created_at)),1),e("td",we,[y(c(m),{href:r.route("refunds.show",{refund:s.id}),class:"text-blue-600 hover:text-blue-900 mr-4"},{default:u(()=>t[10]||(t[10]=[g(" View ")])),_:2},1032,["href"]),s.status==="pending"||s.status==="pending_adjustment"?(d(),x(c(m),{key:0,href:r.route("refunds.edit",{refund:s.id}),class:"text-green-600 hover:text-green-900"},{default:u(()=>[g(n(s.type==="adjustment"?"Adjust":"Negotiate"),1)]),_:2},1032,["href"])):f("",!0)])]))),128)),(d(!0),l(P,null,S(a.needsAdjustment.data,s=>(d(),l("tr",{key:"adjustment-"+s.id,class:"bg-orange-50"},[t[12]||(t[12]=e("td",{class:"px-6 py-4 whitespace-nowrap"},[e("span",{class:"inline-flex px-2 text-xs font-semibold leading-5 rounded-full bg-orange-100 text-orange-800"}," Needs Adjustment ")],-1)),e("td",be,n(s.reference_number),1),e("td",_e,n(s.sender.name),1),e("td",ve," ₱"+n(s.total_price),1),t[13]||(t[13]=e("td",{class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},[e("span",{class:"text-gray-400"},"—")],-1)),t[14]||(t[14]=e("td",{class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},[e("span",{class:"text-gray-400"},"—")],-1)),t[15]||(t[15]=e("td",{class:"px-6 py-4 whitespace-nowrap"},[e("span",{class:"inline-flex px-2 text-xs font-semibold leading-5 rounded-full bg-yellow-100 text-yellow-800"}," Awaiting Action ")],-1)),e("td",je,n(w(s.updated_at)),1),e("td",ke,[y(c(m),{href:r.route("refunds.create",{delivery_request_id:s.id}),class:"text-green-600 hover:text-green-900"},{default:u(()=>t[11]||(t[11]=[g(" Create Adjustment ")])),_:2},1032,["href"])])]))),128)),a.refunds.data.length===0&&a.needsAdjustment.data.length===0?(d(),l("tr",Ae,t[16]||(t[16]=[e("td",{colspan:"9",class:"px-6 py-4 text-center text-sm text-gray-500"}," No refunds or adjustments found. ",-1)]))):f("",!0)])])]),e("div",Ce,[a.refunds.data.length>0?(d(),x(V,{key:0,links:a.refunds.links},null,8,["links"])):f("",!0),a.needsAdjustment.data.length>0?(d(),x(V,{key:1,links:a.needsAdjustment.links},null,8,["links"])):f("",!0)])])])]}),_:1}))}};export{De as default};
