import{E as I}from"./EmployeeLayout-CgMY_n5V.js";import{g as P,C as R,i as p,L as U,d as E,o as d,w as g,b as e,c as y,t as s,e as c,f as l,F as $,r as O,n as v,a as n,u,P as N}from"./app-BllHWhcy.js";import{T as q}from"./TextInput-CRqjwWF5.js";import{_ as W}from"./TextArea-aLSmk0zP.js";import{_ as j}from"./InputError-B4ahD7h-.js";import{_ as A}from"./PrimaryButton-eC2eu5yQ.js";import{_ as S}from"./SecondaryButton-f4DzqSLc.js";import{L as D}from"./LoadingSpinner-C31uoCrk.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./NavLink-BG8uMyS8.js";import"./DangerButton-B7_oj2jq.js";/* empty css                                                                  */const G={class:"flex justify-between items-center"},J={class:"max-w-6xl mx-auto py-6"},K={key:0,class:"bg-white shadow-sm rounded-lg border border-gray-200"},Q={class:"px-6 py-4 bg-gray-50 border-b border-gray-200"},X={class:"text-sm text-gray-600 mt-1"},Y={class:"p-6"},Z={class:"mb-8"},ee={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6"},te={class:"border border-gray-200 rounded-lg p-4 bg-gray-50"},se={class:"space-y-2 text-sm"},oe={class:"text-gray-900 font-medium"},re={class:"text-gray-900"},le={class:"text-gray-900"},ae={class:"text-gray-900"},ie={class:"border border-gray-200 rounded-lg p-4 bg-gray-50"},de={class:"space-y-2 text-sm"},ne={class:"text-gray-900 font-medium"},me={class:"text-gray-900"},ye={class:"text-gray-900"},ue={class:"text-gray-900"},ge={class:"bg-white shadow rounded-lg overflow-hidden"},xe={class:"px-6 py-4"},pe={class:"overflow-x-auto"},ce={class:"min-w-full divide-y divide-gray-200"},ve={class:"bg-white divide-y divide-gray-200"},fe={class:"px-4 py-4 whitespace-nowrap"},be={class:"font-medium text-gray-900"},we={class:"text-sm text-gray-500"},he={class:"px-4 py-4 whitespace-nowrap text-gray-900"},ke={class:"px-4 py-4 whitespace-nowrap text-gray-900"},_e={class:"px-4 py-4 whitespace-nowrap text-gray-900 font-medium"},Fe={class:"mb-6 border border-gray-200 rounded-lg p-4 bg-blue-50"},Ce={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Pe={class:"space-y-3"},Ne={class:"flex justify-between items-center"},je={class:"text-gray-900 font-medium"},Ae={class:"flex justify-between items-center"},Se={class:"text-gray-900 font-medium"},De={class:"flex justify-between items-center"},Be={class:"text-gray-900 font-medium"},Me={class:"flex justify-between items-center"},Ve={class:"text-gray-600"},ze={class:"text-gray-900 font-medium"},Le={class:"border-l border-gray-200 pl-6"},Te={class:"flex justify-between items-center text-lg font-semibold mb-2"},Ie={class:"text-blue-600"},Re={class:"flex justify-between items-center text-sm text-gray-600"},Ue={class:"capitalize font-medium"},Ee={key:0,class:"flex justify-between items-center text-sm text-gray-600 mt-1"},$e={key:0,class:"mb-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4"},Oe={class:"flex items-center"},qe={class:"text-sm text-yellow-700 mt-1"},We={class:"mb-8"},He={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"},Ge={class:"border border-gray-200 rounded-md p-4 bg-gray-50"},Je={class:"text-xl font-semibold text-gray-900"},Ke={class:"border border-gray-200 rounded-md p-4"},Qe={class:"relative"},Xe={key:0,class:"text-xs mt-1 text-red-600"},Ye={key:1,class:"text-xs mt-1 text-green-600"},Ze={class:"flex justify-between items-center pt-6 border-t border-gray-200"},et={class:"text-sm text-gray-500"},tt={class:"flex space-x-3"},st={key:0},ot={key:1},rt={key:1,class:"bg-white shadow-sm rounded-lg border border-gray-200 p-8 text-center"},lt={class:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-blue-100"},at={key:2,class:"bg-white shadow-sm rounded-lg border border-gray-200 p-8 text-center"},it={class:"mt-6"},dt={__name:"RecordPayment",props:{delivery:{type:Object,default:null}},setup(o){const a=o,B=P(new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})),M=P(new Date().toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})),r=R({delivery_request_id:"",method:"cash",amount_received:"",amount:0,notes:""}),x=p(()=>{if(!r.amount_received||!a.delivery)return 0;const m=parseFloat(r.amount_received),t=parseFloat(a.delivery.total_price||0);return m-t}),V=p(()=>{var t;const m=(t=a.delivery)==null?void 0:t.payment_status;return m==="paid"?"bg-green-100 text-green-800":m==="pending"?"bg-yellow-100 text-yellow-800":m==="rejected"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}),z=p(()=>{if(!r.amount_received||!a.delivery)return!1;const m=parseFloat(r.amount_received),t=parseFloat(a.delivery.total_price||0);return m>=t});U(()=>{a.delivery&&(r.delivery_request_id=a.delivery.id,r.amount=parseFloat(a.delivery.total_price||0))});const L=()=>{a.delivery&&(r.amount_received="",r.notes="")},T=()=>{a.delivery&&(r.amount=parseFloat(a.delivery.total_price||0),r.post(route("staff.payments.store",a.delivery.id),{onSuccess:()=>{r.reset()}}))};return(m,t)=>(d(),E(I,null,{header:g(()=>[e("div",G,[t[3]||(t[3]=e("div",null,[e("h2",{class:"text-xl font-semibold text-gray-800"}," Record Cash Payment "),e("p",{class:"text-sm text-gray-600 mt-1"},"Process over-the-counter cash payments")],-1)),n(u(N),{href:m.route("staff.payments.index")},{default:g(()=>[n(S,null,{default:g(()=>t[2]||(t[2]=[l("← Back to Payments")])),_:1})]),_:1},8,["href"])])]),default:g(()=>{var f,b,w,h,k,_,F,C;return[e("div",J,[o.delivery&&o.delivery.packages?(d(),y("div",K,[e("div",Q,[t[4]||(t[4]=e("h3",{class:"text-lg font-medium text-gray-800"},"Cash Payment Processing",-1)),e("p",X,"Reference: "+s(o.delivery.reference_number),1)]),e("div",Y,[e("div",Z,[t[25]||(t[25]=e("h4",{class:"font-medium text-gray-700 mb-4 text-lg border-b pb-2"},"Delivery Information",-1)),e("div",ee,[e("div",te,[t[13]||(t[13]=e("h5",{class:"font-medium text-gray-700 mb-3 flex items-center"},[e("svg",{class:"h-5 w-5 text-gray-400 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})]),l(" Sender Information ")],-1)),e("div",se,[e("p",null,[t[5]||(t[5]=e("span",{class:"text-gray-500"},"Name:",-1)),t[6]||(t[6]=l()),e("span",oe,s(((f=o.delivery.sender)==null?void 0:f.name)||"N/A"),1)]),e("p",null,[t[7]||(t[7]=e("span",{class:"text-gray-500"},"Email:",-1)),t[8]||(t[8]=l()),e("span",re,s(((b=o.delivery.sender)==null?void 0:b.email)||"N/A"),1)]),e("p",null,[t[9]||(t[9]=e("span",{class:"text-gray-500"},"Mobile:",-1)),t[10]||(t[10]=l()),e("span",le,s(((w=o.delivery.sender)==null?void 0:w.mobile)||"N/A"),1)]),e("p",null,[t[11]||(t[11]=e("span",{class:"text-gray-500"},"Address:",-1)),t[12]||(t[12]=l()),e("span",ae,s(((h=o.delivery.sender)==null?void 0:h.address)||"N/A"),1)])])]),e("div",ie,[t[22]||(t[22]=e("h5",{class:"font-medium text-gray-700 mb-3 flex items-center"},[e("svg",{class:"h-5 w-5 text-gray-400 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})]),l(" Receiver Information ")],-1)),e("div",de,[e("p",null,[t[14]||(t[14]=e("span",{class:"text-gray-500"},"Name:",-1)),t[15]||(t[15]=l()),e("span",ne,s(((k=o.delivery.receiver)==null?void 0:k.name)||"N/A"),1)]),e("p",null,[t[16]||(t[16]=e("span",{class:"text-gray-500"},"Email:",-1)),t[17]||(t[17]=l()),e("span",me,s(((_=o.delivery.receiver)==null?void 0:_.email)||"N/A"),1)]),e("p",null,[t[18]||(t[18]=e("span",{class:"text-gray-500"},"Mobile:",-1)),t[19]||(t[19]=l()),e("span",ye,s(((F=o.delivery.receiver)==null?void 0:F.mobile)||"N/A"),1)]),e("p",null,[t[20]||(t[20]=e("span",{class:"text-gray-500"},"Address:",-1)),t[21]||(t[21]=l()),e("span",ue,s(((C=o.delivery.receiver)==null?void 0:C.address)||"N/A"),1)])])])]),e("div",ge,[t[24]||(t[24]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-medium text-gray-900"},"Package Details")],-1)),e("div",xe,[e("div",pe,[e("table",ce,[t[23]||(t[23]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Item "),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Dimensions "),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Weight "),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Value ")])],-1)),e("tbody",ve,[(d(!0),y($,null,O(o.delivery.packages,i=>(d(),y("tr",{key:i.id,class:"hover:bg-gray-50"},[e("td",fe,[e("div",be,s(i.item_name||"N/A"),1),e("div",we,s(i.category||"Uncategorized"),1)]),e("td",he,s(i.height||0)+"cm × "+s(i.width||0)+"cm × "+s(i.length||0)+"cm ",1),e("td",ke,s(i.weight||0)+" kg ",1),e("td",_e," ₱"+s(parseFloat(i.value||0).toFixed(2)),1)]))),128))])])])])])]),e("div",Fe,[t[32]||(t[32]=e("h4",{class:"font-medium text-gray-700 mb-4 text-lg border-b pb-2"},"Price Breakdown",-1)),e("div",Ce,[e("div",Pe,[e("div",Ne,[t[26]||(t[26]=e("span",{class:"text-gray-600"},"Base Fee:",-1)),e("span",je,"₱"+s(parseFloat(o.delivery.base_fee||0).toFixed(2)),1)]),e("div",Ae,[t[27]||(t[27]=e("span",{class:"text-gray-600"},"Volume Fee:",-1)),e("span",Se,"₱"+s(parseFloat(o.delivery.volume_fee||0).toFixed(2)),1)]),e("div",De,[t[28]||(t[28]=e("span",{class:"text-gray-600"},"Weight Fee:",-1)),e("span",Be,"₱"+s(parseFloat(o.delivery.weight_fee||0).toFixed(2)),1)]),e("div",Me,[e("span",Ve,"Package Fee ("+s(o.delivery.packages&&o.delivery.packages.length||0)+"):",1),e("span",ze,"₱"+s(parseFloat(o.delivery.package_fee||0).toFixed(2)),1)])]),e("div",Le,[e("div",Te,[t[29]||(t[29]=e("span",{class:"text-gray-800"},"Total Amount:",-1)),e("span",Ie,"₱"+s(parseFloat(o.delivery.total_price||0).toFixed(2)),1)]),e("div",Re,[t[30]||(t[30]=e("span",null,"Original Payment Method:",-1)),e("span",Ue,s(o.delivery.payment_method||"N/A"),1)]),o.delivery.payment_status?(d(),y("div",Ee,[t[31]||(t[31]=e("span",null,"Current Status:",-1)),e("span",{class:v([V.value,"capitalize px-2 py-1 rounded-full text-xs"])},s(o.delivery.payment_status||"N/A"),3)])):c("",!0)])])]),o.delivery.payment_method&&o.delivery.payment_method!=="cash"?(d(),y("div",$e,[e("div",Oe,[t[38]||(t[38]=e("svg",{class:"h-5 w-5 text-yellow-400 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("div",null,[t[36]||(t[36]=e("h4",{class:"font-medium text-yellow-800"},"Payment Method Change",-1)),e("p",qe,[t[33]||(t[33]=l(" Changing payment method from ")),e("strong",null,s(o.delivery.payment_method.toUpperCase()),1),t[34]||(t[34]=l(" to ")),t[35]||(t[35]=e("strong",null,"CASH",-1))]),t[37]||(t[37]=e("p",{class:"text-xs text-yellow-600 mt-2"}," This will override the original payment method selection to Cash. ",-1))])])])):c("",!0),e("div",We,[t[44]||(t[44]=e("h4",{class:"font-medium text-gray-700 mb-4 text-lg border-b pb-2"},"Cash Payment Details",-1)),e("div",He,[e("div",Ge,[t[39]||(t[39]=e("p",{class:"text-sm text-gray-600 mb-1"},"Total Due",-1)),e("p",Je,"₱"+s(parseFloat(o.delivery.total_price||0).toFixed(2)),1)]),e("div",Ke,[t[41]||(t[41]=e("label",{class:"block text-sm text-gray-600 mb-1 font-medium"}," Amount Received * ",-1)),e("div",Qe,[t[40]||(t[40]=e("span",{class:"absolute left-3 top-3 text-gray-500"},"₱",-1)),n(q,{modelValue:u(r).amount_received,"onUpdate:modelValue":t[0]||(t[0]=i=>u(r).amount_received=i),type:"number",step:"0.01",min:"0.01",placeholder:"0.00",class:"w-full pl-8 text-base border-gray-300 focus:border-blue-500"},null,8,["modelValue"])]),n(j,{message:u(r).errors.amount_received,class:"mt-1"},null,8,["message"])]),e("div",{class:v(["border rounded-md p-4",x.value>=0?"border-gray-200 bg-green-50":"border-red-200 bg-red-50"])},[t[42]||(t[42]=e("p",{class:"text-sm text-gray-600 mb-1"},"Change",-1)),e("p",{class:v(["text-xl font-semibold",x.value>=0?"text-green-700":"text-red-700"])}," ₱"+s(x.value.toFixed(2)),3),x.value<0&&u(r).amount_received>0?(d(),y("p",Xe," Insufficient payment ")):x.value>0?(d(),y("p",Ye," Change to be given ")):c("",!0)],2)]),e("div",null,[t[43]||(t[43]=e("label",{class:"block text-sm text-gray-600 mb-2 font-medium"},"Notes (Optional)",-1)),n(W,{modelValue:u(r).notes,"onUpdate:modelValue":t[1]||(t[1]=i=>u(r).notes=i),rows:"3",class:"w-full border-gray-300 focus:border-blue-500",placeholder:"Add any additional notes about this cash payment..."},null,8,["modelValue"]),n(j,{message:u(r).errors.notes},null,8,["message"])])]),e("div",Ze,[e("div",et,[e("p",null,"Staff: "+s(m.$page.props.auth.user.name),1),e("p",null,"Date: "+s(B.value),1),e("p",null,"Time: "+s(M.value),1)]),e("div",tt,[n(S,{onClick:L},{default:g(()=>t[45]||(t[45]=[l(" Reset Form ")])),_:1}),n(A,{disabled:u(r).processing||!z.value,class:"min-w-[150px]",onClick:T},{default:g(()=>[u(r).processing?(d(),y("span",st,[n(D,{class:"w-4 h-4 mr-2"}),t[46]||(t[46]=l(" Processing... "))])):(d(),y("span",ot,"Record Cash Payment"))]),_:1},8,["disabled"])])])])])):o.delivery===null?(d(),y("div",rt,[e("div",lt,[n(D,{class:"w-6 h-6 text-blue-600"})]),t[47]||(t[47]=e("h3",{class:"mt-4 text-lg font-medium text-gray-900"},"Loading Delivery Information",-1)),t[48]||(t[48]=e("p",{class:"mt-2 text-sm text-gray-500"},"Please wait while we load the delivery details...",-1))])):(d(),y("div",at,[t[50]||(t[50]=e("div",{class:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-gray-100"},[e("svg",{class:"h-6 w-6 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1)),t[51]||(t[51]=e("h3",{class:"mt-4 text-lg font-medium text-gray-900"},"No Delivery Selected",-1)),t[52]||(t[52]=e("p",{class:"mt-2 text-sm text-gray-500"},"Please go back to the payments page and select a delivery to record payment.",-1)),e("div",it,[n(u(N),{href:m.route("staff.payments.index")},{default:g(()=>[n(A,{class:"px-4 py-2"},{default:g(()=>t[49]||(t[49]=[l(" ← Back to Payments ")])),_:1})]),_:1},8,["href"])])]))])]}),_:1}))}},ht=H(dt,[["__scopeId","data-v-600b951f"]]);export{ht as default};
