import{E as $e}from"./EmployeeLayout-41rkCMFi.js";import{_ as Ae}from"./SearchInput-BdZpY5qg.js";import{S as we}from"./SelectInput-CJKTp_P8.js";import{_ as Ie}from"./TextArea-C2wlkUXD.js";import{_ as Q}from"./PrimaryButton-BaAbC_Sk.js";import{_ as F}from"./SecondaryButton-BMk3kL1H.js";import{D as X}from"./DangerButton-Bd5m9G75.js";import{_ as he}from"./InputLabel-B5rH5gjD.js";import{L as Ee}from"./LoadingSpinner-w3_eh3dv.js";import{P as Ce}from"./Pagination-lASWqMkU.js";import{g as m,h as Le,W as H,i as Y,d as w,o as l,w as i,b as e,a as n,t as a,c as o,e as c,F as A,r as De,n as I,f as d,af as qe,a6 as Se,a7 as Me,a8 as Ve,a9 as je,ag as Pe,u as Oe}from"./app-DSvpKds8.js";import{d as Fe}from"./debounce-DvvIHfG2.js";import{r as He}from"./ExclamationTriangleIcon-Dbfb3SzA.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./NavLink-B7vUiQXa.js";const We={class:"zoom-content"},Ge={class:"px-4 md:px-6 lg:px-8 py-4"},Je={class:"mb-4 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3"},Ke={class:"w-full sm:w-80"},Qe={class:"flex items-center gap-3 w-full sm:w-auto"},Xe={class:"w-full sm:w-48"},Ye={class:"text-sm text-gray-500 dark:text-gray-400 bg-blue-50 dark:bg-blue-900/30 px-3 py-1 rounded border border-blue-100 dark:border-blue-800"},Ze={class:"sm:hidden space-y-4"},et={class:"flex justify-between items-start mb-3"},tt={class:"flex items-center gap-2 mb-1"},st={class:"font-bold text-green-700 dark:text-green-300 tracking-wide"},rt={class:"text-xs text-gray-500 dark:text-gray-400"},at={class:"mb-3"},lt={class:"text-sm font-medium text-gray-900 dark:text-gray-100 mb-1"},nt={class:"text-xs text-gray-500 dark:text-gray-400 space-y-1"},ot={class:"flex items-center gap-1"},dt={class:"flex items-center gap-1"},it={class:"grid grid-cols-2 gap-4 mb-3"},ut={class:"text-sm font-semibold text-gray-900 dark:text-gray-100"},ct={class:"text-sm text-gray-900 dark:text-gray-100"},gt={key:0,class:"text-red-500 text-xs"},xt={class:"text-xs text-gray-500 dark:text-gray-400 mb-3"},yt={key:0,class:"bg-orange-50 dark:bg-orange-900/20 rounded p-2 mb-3"},vt={class:"text-xs text-orange-700 dark:text-orange-300"},pt={class:"flex justify-between gap-2"},mt={key:0,class:"text-center py-8"},ft={class:"bg-gray-50 dark:bg-gray-700 rounded-lg p-6"},kt={class:"text-gray-500 dark:text-gray-400"},bt={class:"hidden sm:block justify-center items-center"},_t={class:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg border border-gray-200 dark:border-gray-700 w-full"},wt={class:"overflow-x-auto"},ht={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},Ct={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},Dt={class:"px-6 py-4 whitespace-nowrap"},qt={class:"flex flex-col"},St={class:"flex items-center gap-2"},Mt={class:"font-bold text-green-700 dark:text-green-300 tracking-wide"},Vt={class:"mt-1 flex flex-wrap items-center gap-2 text-xs text-gray-500 dark:text-gray-300"},jt={key:0},Pt={class:"px-6 py-4 whitespace-nowrap"},Bt={key:0,class:"text-xs text-gray-500 mt-1"},Nt={key:1,class:"text-xs text-gray-500 mt-1"},Ut={class:"px-6 py-4 whitespace-nowrap"},zt={class:"text-sm text-gray-900 dark:text-gray-100 font-medium"},Rt={class:"text-xs text-gray-500 dark:text-gray-400 flex items-center gap-1 mt-1"},Tt={class:"text-xs text-gray-500 dark:text-gray-400 flex items-center gap-1 mt-1"},$t={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100"},At={class:"px-6 py-4 whitespace-nowrap"},It={key:0,class:"text-gray-500 dark:text-gray-400 font-medium"},Et={key:1,class:"text-gray-500 dark:text-gray-400"},Lt={key:0,class:"text-red-500 font-semibold"},Ot={key:2,class:"text-gray-400"},Ft={class:"px-6 py-4 whitespace-nowrap"},Ht={class:"flex space-x-2 justify-end"},Wt={key:0},Gt={colspan:"6",class:"px-6 py-8 text-center"},Jt={class:"bg-gray-50 dark:bg-gray-700 rounded-lg p-6 max-w-md mx-auto"},Kt={class:"text-gray-500 dark:text-gray-400 mb-3"},Qt={class:"text-lg font-semibold text-red-700 dark:text-red-300"},Xt={class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},Yt={class:"font-bold text-indigo-900 dark:text-indigo-100"},Zt={key:0,class:"ml-2 text-orange-600"},es={class:"space-y-4"},ts={class:"bg-red-50 dark:bg-red-900/30 rounded-lg p-4 border border-red-200 dark:border-red-700"},ss={class:"text-sm text-gray-900 dark:text-gray-100 font-medium mb-2"},rs={class:"mb-4"},as={key:0},ls={key:0},ns={key:1},os={class:"text-xs text-gray-500 dark:text-gray-400 mt-1"},ds={class:"font-bold text-indigo-900 dark:text-indigo-100"},is={class:"space-y-6"},us={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},cs={class:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 shadow-sm"},gs={class:"p-4 space-y-3"},xs={class:"text-sm text-gray-900 dark:text-gray-100 mt-1"},ys={class:"text-sm text-gray-900 dark:text-gray-100 mt-1"},vs={class:"text-sm text-gray-900 dark:text-gray-100 mt-1"},ps={class:"text-sm text-gray-900 dark:text-gray-100 mt-1"},ms={class:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 shadow-sm"},fs={class:"p-4 space-y-3"},ks={class:"text-sm text-gray-900 dark:text-gray-100 mt-1"},bs={class:"text-sm text-gray-900 dark:text-gray-100 mt-1"},_s={class:"text-sm text-gray-900 dark:text-gray-100 mt-1"},ws={class:"text-sm text-gray-900 dark:text-gray-100 mt-1"},hs={key:0,class:"bg-orange-50 dark:bg-orange-900/20 rounded-lg p-4 border border-orange-200 dark:border-orange-700"},Cs={class:"font-semibold text-orange-700 dark:text-orange-200 mb-3 flex items-center gap-1"},Ds={class:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm"},qs={class:"text-orange-600 dark:text-orange-300 mt-1"},Ss={key:0},Ms={class:"text-orange-600 dark:text-orange-300 mt-1"},Fs={__name:"Pending",props:{deliveries:Object,filters:Object},setup(g){const Z=g,R=m(Z.filters.search||""),E=m(Z.filters.status||"pending");m("created_at"),m("desc");const Be=[{value:"",label:"All Statuses"},{value:"pending",label:"Pending Collection"},{value:"uncollectible",label:"Extended Due Date"}],ee=r=>{H.get(route("collector.payments.pending"),{page:r,search:R.value,status:E.value},{preserveState:!0,preserveScroll:!0})};Le([R,E],Fe(([r,t])=>{H.get(route("collector.payments.pending"),{search:r,status:t},{preserveState:!0,preserveScroll:!0,replace:!0})},300));const L=m(!1),x=m(null),y=m(""),U=m(""),z=m({}),h=m(!1),te=[{value:"",label:"Select a reason"},{value:"customer_unavailable",label:"Customer Unavailable"},{value:"customer_refused",label:"Customer Refused to Pay"},{value:"missing_documents",label:"Missing Payment Documents"},{value:"invalid_payment_proof",label:"Invalid Payment Proof"},{value:"wrong_information",label:"Wrong Transaction Information"},{value:"other",label:"Different Reason"}],Ne=Y(()=>x.value&&v(x.value)==="uncollectible"?"Extend Due Date":"Mark as Uncollectible"),Ue=Y(()=>x.value&&v(x.value)==="uncollectible"?"This delivery already has an extended due date. Please select a reason to extend it again.":"Please select the reason why this delivery cannot be collected."),ze=Y(()=>x.value&&v(x.value)==="uncollectible"?"Extend Due Date":"Mark as Uncollectible");function se(r){x.value=r,y.value="",U.value="",z.value={},L.value=!0}function W(){L.value=!1,x.value=null,y.value="",U.value="",z.value={},h.value=!1}function Re(){if(!x.value)return;h.value=!0,z.value={};let r="";const t=te.find(p=>p.value===y.value);if(y.value==="other"?r=U.value.trim():r=(t==null?void 0:t.label)||y.value,!r){z.value={non_payment_reason:["Please provide a reason"]},h.value=!1;return}H.post(route("collector.payments.mark-uncollectible",x.value.delivery_request_id),{non_payment_reason:r},{preserveScroll:!0,onSuccess:()=>{h.value=!1,W()},onError:p=>{z.value=p,h.value=!1}})}function G(r){H.visit(route("collector.payments.create",r))}function re(r){return r?{net_7:"Net 7",net_15:"Net 15",net_30:"Net 30",cnd:"CND",cod:"COD"}[r]||r:"Standard"}function v(r){var p;return((p=r.delivery_request)==null?void 0:p.payment_status)||"pending"}function ae(r){switch(v(r)){case"uncollectible":return"bg-orange-100 text-orange-800 dark:bg-orange-800 dark:text-orange-100";case"pending":case"pending_payment":case"unpaid":default:return"bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100"}}function le(r){switch(v(r)){case"uncollectible":return"Extended Due Date";case"pending":case"pending_payment":case"unpaid":default:return"Pending Collection"}}function ne(r){return v(r)==="uncollectible"?"bg-orange-50 dark:bg-orange-900/20":K(r)?"bg-red-100 dark:bg-red-900/30":"bg-white dark:bg-gray-800"}function J(r){const t=v(r);return["pending","pending_payment","unpaid","uncollectible",null].includes(t)}function oe(r){const t=v(r);return["pending","pending_payment","unpaid","uncollectible",null].includes(t)}function K(r){var p,$;return((p=r.delivery_request)==null?void 0:p.payment_terms)==="cnd"||!(($=r.delivery_request)!=null&&$.payment_due_date)?!1:new Date(r.delivery_request.payment_due_date)<new Date}function de(r){return r!=null?(parseFloat(r)||0).toFixed(2):"0.00"}function T(r){if(!r)return"N/A";try{return new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"Invalid date"}}function Te(r){if(!r)return"N/A";try{return new Date(r).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Invalid date"}}const O=m(!1),u=m(null);function ie(r){u.value=r,O.value=!0}function ue(){O.value=!1,u.value=null}return(r,t)=>(l(),w($e,null,{header:i(()=>t[7]||(t[7]=[e("div",{class:"flex justify-between items-center w-full px-4 md:px-6 lg:px-8"},[e("div",null,[e("h2",{class:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200"}," Pending Collections "),e("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"}," Deliveries that are awaiting payment collection from customers. ")])],-1)])),default:i(()=>{var p,$,ce,ge,xe,ye,ve,pe,me,fe;return[e("div",We,[e("div",Ge,[e("div",Je,[e("div",Ke,[n(Ae,{modelValue:R.value,"onUpdate:modelValue":t[0]||(t[0]=s=>R.value=s),placeholder:"Search by reference, sender, or receiver...",class:"w-full"},null,8,["modelValue"])]),e("div",Qe,[e("div",Xe,[n(we,{modelValue:E.value,"onUpdate:modelValue":t[1]||(t[1]=s=>E.value=s),options:Be,class:"w-full"},null,8,["modelValue"])]),e("div",Ye," ðŸ“‹ Showing "+a((($=(p=g.deliveries)==null?void 0:p.data)==null?void 0:$.length)??0)+" of "+a(((ce=g.deliveries)==null?void 0:ce.total)??0)+" "+a((((ge=g.deliveries)==null?void 0:ge.total)??0)===1?"entry":"entries"),1)])]),e("div",Ze,[(l(!0),o(A,null,De(((xe=g.deliveries)==null?void 0:xe.data)||[],s=>{var f,k,b,_,C,D,q,S,M,V,j,P,B;return l(),o("div",{key:s.id,class:I([ne(s),"rounded-lg border border-gray-200 dark:border-gray-700 shadow-sm p-4"])},[e("div",et,[e("div",null,[e("div",tt,[t[8]||(t[8]=e("span",{class:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-semibold bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100"}," Ref ",-1)),e("span",st,a(((f=s.delivery_request)==null?void 0:f.reference_number)||`DR-${String(s.delivery_request_id).padStart(6,"0")}`),1)]),e("div",rt," ID: DO-"+a(String(s.delivery_request_id).padStart(6,"0")),1)]),e("span",{class:I([ae(s),"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"])},a(le(s)),3)]),e("div",at,[e("div",lt,a(((b=(k=s.delivery_request)==null?void 0:k.sender)==null?void 0:b.name)||"N/A"),1),e("div",nt,[e("div",ot,[t[9]||(t[9]=e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})],-1)),d(" "+a(((C=(_=s.delivery_request)==null?void 0:_.sender)==null?void 0:C.mobile)||"No phone"),1)]),e("div",dt,[t[10]||(t[10]=e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})],-1)),d(" "+a(((q=(D=s.delivery_request)==null?void 0:D.sender)==null?void 0:q.email)||"No email"),1)])])]),e("div",it,[e("div",null,[t[11]||(t[11]=e("div",{class:"text-xs text-gray-500 dark:text-gray-400"},"Amount",-1)),e("div",ut," â‚±"+a(de((S=s.delivery_request)==null?void 0:S.total_price)),1)]),e("div",null,[t[12]||(t[12]=e("div",{class:"text-xs text-gray-500 dark:text-gray-400"},"Due Date",-1)),e("div",ct,[((M=s.delivery_request)==null?void 0:M.payment_terms)==="cnd"?(l(),o(A,{key:0},[d(" CND ")],64)):(V=s.delivery_request)!=null&&V.payment_due_date?(l(),o(A,{key:1},[d(a(T(s.delivery_request.payment_due_date))+" ",1),K(s)?(l(),o("span",gt,"(Overdue)")):c("",!0)],64)):(l(),o(A,{key:2},[d("â€”")],64))])])]),e("div",xt," Terms: "+a(re((j=s.delivery_request)==null?void 0:j.payment_terms)),1),v(s)==="uncollectible"?(l(),o("div",yt,[e("div",vt,[t[13]||(t[13]=e("div",{class:"font-medium"},"Extended Due Date",-1)),e("div",null,"Reason: "+a((P=s.delivery_request)==null?void 0:P.non_payment_reason),1),e("div",null,"New due: "+a(T((B=s.delivery_request)==null?void 0:B.payment_due_date)),1)])])):c("",!0),e("div",pt,[J(s)?(l(),w(Q,{key:0,onClick:N=>G(s.delivery_request_id),class:"!px-3 !py-2 !text-xs flex-1 flex items-center justify-center gap-1"},{default:i(()=>t[14]||(t[14]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),d(" Collect ")])),_:2},1032,["onClick"])):c("",!0),oe(s)&&v(s)!=="uncollectible"?(l(),w(X,{key:1,onClick:N=>se(s),class:"!px-3 !py-2 !text-xs flex-1 flex items-center justify-center gap-1"},{default:i(()=>t[15]||(t[15]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),d(" Uncollectible ")])),_:2},1032,["onClick"])):c("",!0),n(F,{onClick:N=>ie(s),class:"!px-3 !py-2 !text-xs flex items-center justify-center gap-1"},{default:i(()=>t[16]||(t[16]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0zm6 0a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),d(" Info ")])),_:2},1032,["onClick"])])],2)}),128)),!((ye=g.deliveries)!=null&&ye.data)||g.deliveries.data.length===0?(l(),o("div",mt,[e("div",ft,[t[17]||(t[17]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-12 w-12 text-gray-400 mx-auto mb-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t[18]||(t[18]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2"},"No pending collections found",-1)),e("p",kt,a(R.value?"Try adjusting your search terms":"All payments have been collected"),1)])])):c("",!0),((ve=g.deliveries)==null?void 0:ve.last_page)>1?(l(),w(Ce,{key:1,pagination:g.deliveries,onPageChanged:ee,class:"mt-6"},null,8,["pagination"])):c("",!0)]),e("div",bt,[e("div",_t,[e("div",wt,[e("table",ht,[t[27]||(t[27]=e("thead",{class:"bg-gray-50 dark:bg-gray-700"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Reference"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Status"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Customer"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Amount"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"},"Due Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider"})])],-1)),e("tbody",Ct,[(l(!0),o(A,null,De(((pe=g.deliveries)==null?void 0:pe.data)||[],s=>{var f,k,b,_,C,D,q,S,M,V,j,P,B;return l(),o("tr",{key:s.id,class:I([ne(s),"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-150"])},[e("td",Dt,[e("div",qt,[e("div",St,[t[19]||(t[19]=e("span",{class:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-semibold bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100"}," Reference # ",-1)),e("span",Mt,a(((f=s.delivery_request)==null?void 0:f.reference_number)||`DR-${String(s.delivery_request_id).padStart(6,"0")}`),1)]),e("div",Vt,[e("span",null," Delivery ID: DO-"+a(String(s.delivery_request_id).padStart(6,"0")),1),s.created_at?(l(),o("span",jt," | Created: "+a(T(s.created_at)),1)):c("",!0)])])]),e("td",Pt,[e("span",{class:I([ae(s),"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"])},a(le(s)),3),v(s)==="uncollectible"?(l(),o("div",Bt,[e("div",null,"Reason: "+a((k=s.delivery_request)==null?void 0:k.non_payment_reason),1),e("div",null,"Extended due: "+a(T((b=s.delivery_request)==null?void 0:b.payment_due_date)),1)])):(l(),o("div",Nt," Terms: "+a(re((_=s.delivery_request)==null?void 0:_.payment_terms)),1))]),e("td",Ut,[e("div",zt,a(((D=(C=s.delivery_request)==null?void 0:C.sender)==null?void 0:D.name)||"N/A"),1),e("div",Rt,[t[20]||(t[20]=e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})],-1)),d(" "+a(((S=(q=s.delivery_request)==null?void 0:q.sender)==null?void 0:S.mobile)||"No phone"),1)]),e("div",Tt,[t[21]||(t[21]=e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})],-1)),d(" "+a(((V=(M=s.delivery_request)==null?void 0:M.sender)==null?void 0:V.email)||"No email"),1)])]),e("td",$t," â‚±"+a(de((j=s.delivery_request)==null?void 0:j.total_price)),1),e("td",At,[((P=s.delivery_request)==null?void 0:P.payment_terms)==="cnd"?(l(),o("div",It," CND ")):(B=s.delivery_request)!=null&&B.payment_due_date?(l(),o("div",Et,[d(a(T(s.delivery_request.payment_due_date))+" ",1),K(s)?(l(),o("span",Lt,"(Overdue)")):c("",!0)])):(l(),o("div",Ot,"â€”"))]),e("td",Ft,[e("div",Ht,[J(s)?(l(),w(Q,{key:0,onClick:N=>G(s.delivery_request_id),class:"!px-3 !py-2 !text-xs flex items-center justify-center gap-1",title:"Collect Payment"},{default:i(()=>t[22]||(t[22]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),d(" Collect ")])),_:2},1032,["onClick"])):c("",!0),oe(s)&&v(s)!=="uncollectible"?(l(),w(X,{key:1,onClick:N=>se(s),class:"!px-3 !py-2 !text-xs flex items-center justify-center gap-1",title:"Mark Uncollectible"},{default:i(()=>t[23]||(t[23]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),d(" Uncollectible ")])),_:2},1032,["onClick"])):c("",!0),n(F,{onClick:N=>ie(s),class:"!px-3 !py-2 !text-xs flex items-center justify-center gap-1",title:"View Full Details"},{default:i(()=>t[24]||(t[24]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0zm6 0a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),d(" Info ")])),_:2},1032,["onClick"])])])],2)}),128)),!((me=g.deliveries)!=null&&me.data)||g.deliveries.data.length===0?(l(),o("tr",Wt,[e("td",Gt,[e("div",Jt,[t[25]||(t[25]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-10 w-10 text-gray-400 mx-auto mb-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),t[26]||(t[26]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2"},"No pending collections found",-1)),e("p",Kt,a(R.value?"Try adjusting your search terms":"All payments have been collected"),1)])])])):c("",!0)])])]),((fe=g.deliveries)==null?void 0:fe.last_page)>1?(l(),w(Ce,{key:0,pagination:g.deliveries,onPageChanged:ee,class:"mt-4 border-t border-gray-200 dark:border-gray-700 p-4"},null,8,["pagination"])):c("",!0)])])])]),n(qe,{modelValue:L.value,"onUpdate:modelValue":t[4]||(t[4]=s=>L.value=s),"max-width":"500"},{default:i(()=>[n(Se,{class:"border border-gray-200 dark:border-gray-700 rounded-lg"},{default:i(()=>[n(Me,{class:"pb-0 border-b border-gray-100 dark:border-gray-700 relative"},{default:i(()=>{var s,f,k,b,_;return[e("div",null,[e("span",Qt,a(Ne.value),1),e("div",Xt,[t[28]||(t[28]=d(" Reference: ")),e("span",Yt,a(((f=(s=x.value)==null?void 0:s.delivery_request)==null?void 0:f.reference_number)||`DR-${String((k=x.value)==null?void 0:k.delivery_request_id).padStart(6,"0")}`),1),(_=(b=x.value)==null?void 0:b.delivery_request)!=null&&_.non_payment_reason?(l(),o("span",Zt," (Previously extended) ")):c("",!0)])]),e("button",{type:"button",onClick:W,class:"absolute top-3 right-3 text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 focus:outline-none","aria-label":"Close"},t[29]||(t[29]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)]))]}),_:1}),n(Ve,{class:"p-6"},{default:i(()=>[e("div",es,[e("div",ts,[e("div",ss,a(Ue.value),1),e("div",rs,[n(he,{value:"Reason *",class:"mb-2"}),n(we,{modelValue:y.value,"onUpdate:modelValue":t[2]||(t[2]=s=>y.value=s),options:te,placeholder:"Select a reason",error:z.value.non_payment_reason,class:"w-full"},null,8,["modelValue","error"])]),y.value==="other"?(l(),o("div",as,[n(he,{value:"Please specify *",class:"mb-2"}),n(Ie,{modelValue:U.value,"onUpdate:modelValue":t[3]||(t[3]=s=>U.value=s),rows:3,placeholder:"Please provide details about why payment couldn't be collected...",error:z.value.non_payment_reason},null,8,["modelValue","error"])])):c("",!0),t[30]||(t[30]=e("div",{class:"text-xs text-gray-600 dark:text-gray-400 mt-2"}," The due date will be extended by 7 days and the customer will be notified. ",-1))])])]),_:1}),n(je,{class:"px-6 pb-4"},{default:i(()=>[n(Pe),n(F,{type:"button",onClick:W},{default:i(()=>t[31]||(t[31]=[d(" Cancel ")])),_:1}),n(X,{type:"button",disabled:h.value||!y.value||y.value==="other"&&!U.value.trim(),class:I({"opacity-50":h.value||!y.value||y.value==="other"&&!U.value.trim()}),onClick:Re},{default:i(()=>[h.value?(l(),o("span",ls,[n(Ee,{size:"xs",class:"mr-2"}),t[32]||(t[32]=d(" Processing... "))])):(l(),o("span",ns,a(ze.value),1))]),_:1},8,["disabled","class"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),n(qe,{modelValue:O.value,"onUpdate:modelValue":t[6]||(t[6]=s=>O.value=s),"max-width":"800"},{default:i(()=>[u.value?(l(),w(Se,{key:0,class:"border border-gray-200 dark:border-gray-700 rounded-lg"},{default:i(()=>[n(Me,{class:"pb-0 border-b border-gray-100 dark:border-gray-700 relative"},{default:i(()=>{var s;return[e("div",null,[t[34]||(t[34]=e("span",{class:"text-lg font-semibold text-gray-900 dark:text-gray-100"},"Delivery Request Details",-1)),e("div",os,[t[33]||(t[33]=d(" Reference: ")),e("span",ds,a(((s=u.value.delivery_request)==null?void 0:s.reference_number)||`DR-${String(u.value.delivery_request_id).padStart(6,"0")}`),1)])]),e("button",{type:"button",onClick:ue,class:"absolute top-3 right-3 text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 focus:outline-none","aria-label":"Close"},t[35]||(t[35]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"})],-1)]))]}),_:1}),n(Ve,{class:"p-6"},{default:i(()=>{var s,f,k,b,_,C,D,q,S,M,V,j,P,B,N,ke,be,_e;return[e("div",is,[e("div",us,[e("div",cs,[t[40]||(t[40]=e("div",{class:"bg-gray-50 dark:bg-gray-700 px-4 py-3 border-b border-gray-200 dark:border-gray-600"},[e("h4",{class:"font-semibold text-gray-900 dark:text-gray-100 flex items-center gap-2"},[e("svg",{class:"w-4 h-4 text-blue-500",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})]),d(" Sender Information ")])],-1)),e("div",gs,[e("div",null,[t[36]||(t[36]=e("label",{class:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide"},"Name",-1)),e("p",xs,a(((f=(s=u.value.delivery_request)==null?void 0:s.sender)==null?void 0:f.name)||"â€”"),1)]),e("div",null,[t[37]||(t[37]=e("label",{class:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide"},"Phone",-1)),e("p",ys,a(((b=(k=u.value.delivery_request)==null?void 0:k.sender)==null?void 0:b.mobile)||"â€”"),1)]),e("div",null,[t[38]||(t[38]=e("label",{class:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide"},"Email",-1)),e("p",vs,a(((C=(_=u.value.delivery_request)==null?void 0:_.sender)==null?void 0:C.email)||"â€”"),1)]),e("div",null,[t[39]||(t[39]=e("label",{class:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide"},"Address",-1)),e("p",ps,a(((q=(D=u.value.delivery_request)==null?void 0:D.sender)==null?void 0:q.address)||"â€”"),1)])])]),e("div",ms,[t[45]||(t[45]=e("div",{class:"bg-gray-50 dark:bg-gray-700 px-4 py-3 border-b border-gray-200 dark:border-gray-600"},[e("h4",{class:"font-semibold text-gray-900 dark:text-gray-100 flex items-center gap-2"},[e("svg",{class:"w-4 h-4 text-green-500",fill:"none",stroke:"currentColor","stroke-width":"2",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})]),d(" Receiver Information ")])],-1)),e("div",fs,[e("div",null,[t[41]||(t[41]=e("label",{class:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide"},"Name",-1)),e("p",ks,a(((M=(S=u.value.delivery_request)==null?void 0:S.receiver)==null?void 0:M.name)||"â€”"),1)]),e("div",null,[t[42]||(t[42]=e("label",{class:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide"},"Phone",-1)),e("p",bs,a(((j=(V=u.value.delivery_request)==null?void 0:V.receiver)==null?void 0:j.mobile)||"â€”"),1)]),e("div",null,[t[43]||(t[43]=e("label",{class:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide"},"Email",-1)),e("p",_s,a(((B=(P=u.value.delivery_request)==null?void 0:P.receiver)==null?void 0:B.email)||"â€”"),1)]),e("div",null,[t[44]||(t[44]=e("label",{class:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide"},"Address",-1)),e("p",ws,a(((ke=(N=u.value.delivery_request)==null?void 0:N.receiver)==null?void 0:ke.address)||"â€”"),1)])])])]),(be=u.value.delivery_request)!=null&&be.non_payment_reason?(l(),o("div",hs,[e("h4",Cs,[n(Oe(He),{class:"w-4 h-4"}),t[46]||(t[46]=d(" Collection History "))]),e("div",Ds,[e("div",null,[t[47]||(t[47]=e("span",{class:"font-medium text-gray-700 dark:text-gray-300"},"Previous Issue:",-1)),e("div",qs,a(u.value.delivery_request.non_payment_reason),1)]),(_e=u.value.delivery_request)!=null&&_e.last_uncollectible_at?(l(),o("div",Ss,[t[48]||(t[48]=e("span",{class:"font-medium text-gray-700 dark:text-gray-300"},"Last Attempt:",-1)),e("div",Ms,a(Te(u.value.delivery_request.last_uncollectible_at)),1)])):c("",!0)])])):c("",!0)])]}),_:1}),n(je,{class:"px-6 pb-4"},{default:i(()=>[n(Pe),J(u.value)?(l(),w(Q,{key:0,onClick:t[5]||(t[5]=s=>G(u.value.delivery_request_id)),class:"mr-2"},{default:i(()=>t[49]||(t[49]=[d(" Collect Payment ")])),_:1})):c("",!0),n(F,{onClick:ue},{default:i(()=>t[50]||(t[50]=[d(" Close ")])),_:1})]),_:1})]),_:1})):c("",!0)]),_:1},8,["modelValue"])]}),_:1}))}};export{Fs as default};
