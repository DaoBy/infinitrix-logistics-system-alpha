import{g as d,i as Q,h as X,W as m,d as L,o as r,w as s,b as a,a as i,c,e as g,t as n,f as u,n as j,F,r as Y,u as Z,P as ee}from"./app-B0R_bMJi.js";import{E as te}from"./EmployeeLayout-BQLa5PLV.js";import{_ as B}from"./PrimaryButton-z6gddSkS.js";import{_ as S}from"./SecondaryButton-BDpVYXxA.js";import{D as I}from"./DangerButton-DlTel5kP.js";import{_ as se}from"./SearchInput-BHbkz-wy.js";import{S as U}from"./SelectInput-f4kpY-DU.js";import{_ as ae}from"./DataTable-C_2NMP2T.js";import{M as le}from"./Modal-Oa0ozw3w.js";import{_ as oe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./NavLink-BchASNUp.js";/* empty css                                                                    */const re={class:"flex justify-between items-center px-6"},ie={class:"flex space-x-2"},ne={class:"px-6 sm:px-8"},ue={key:0,class:"mb-6"},ce={key:0,class:"p-4 bg-blue-100 text-blue-800 rounded"},de={key:1,class:"p-4 bg-green-100 text-green-800 rounded"},me={key:2,class:"p-4 bg-red-100 text-red-800 rounded"},fe={class:"mb-6 flex flex-col md:flex-row justify-between items-start md:items-center gap-4 w-full mx-auto"},ve={class:"flex flex-wrap gap-2 w-full md:w-auto"},pe={class:"justify-center flex items-center"},ke={class:"p-5 bg-white border-b border-gray-200"},xe={class:"truncate block"},ge={class:"truncate block"},be={class:"truncate block"},_e={class:"flex space-x-2"},he={key:0,class:"mt-4 flex justify-center"},ye={class:"flex flex-wrap -mb-1"},we=["innerHTML"],Ae={class:"p-6"},Ce={class:"mt-1 text-sm text-gray-600"},Se={class:"mt-6 flex justify-end space-x-4"},Te={key:0},Ve={key:1},Me={__name:"Index",props:{trucks:Object,status:String,success:String,error:String},setup(o){var V,M,N,D,$;const f=o,C=d(!1),p=d(null),k=d(!1),b=d(((V=f.trucks.filters)==null?void 0:V.search)||""),_=d(((M=f.trucks.filters)==null?void 0:M.status)||""),h=d(((N=f.trucks.filters)==null?void 0:N.make)||""),x=d(((D=f.trucks.filters)==null?void 0:D.sort_field)||"license_plate"),v=d((($=f.trucks.filters)==null?void 0:$.sort_direction)||"asc"),T=[{value:"",text:"All Statuses"},{value:"available",text:"Available"},{value:"in_use",text:"In Use"},{value:"under_repair",text:"Under Repair"}],E={available:"bg-green-100 text-green-800",in_use:"bg-yellow-100 text-yellow-800",under_repair:"bg-red-100 text-red-800"},H=[{field:"license_plate",header:"License Plate",sortable:!0},{field:"make",header:"Make",sortable:!0},{field:"model",header:"Model",sortable:!0},{field:"volume_capacity",header:"Volume Capacity",sortable:!0},{field:"weight_capacity",header:"Weight Capacity",sortable:!0},{field:"region.name",header:"Region",sortable:!0},{field:"status",header:"Status",sortable:!0},{field:"last_maintenance_date",header:"Last Maintenance",sortable:!0},{field:"actions",header:"Actions",sortable:!1}],P=Q(()=>{const l=[...new Set(f.trucks.data.map(t=>t.make))];return[{value:"",text:"All Makes"},...l.map(t=>({value:t,text:t}))]}),O=l=>{const t=T.find(w=>w.value===l);return t?t.text:l.replace("_"," ")},W=l=>{x.value===l?v.value=v.value==="asc"?"desc":"asc":(x.value=l,v.value="asc")},z=l=>{p.value=l,C.value=!0},y=()=>{C.value=!1,setTimeout(()=>{p.value=null,k.value=!1},300)},R=async()=>{if(p.value){k.value=!0;try{await m.put(route("admin.trucks.archive",p.value.id),{},{preserveScroll:!0}),y(),m.reload({only:["trucks"]})}catch{y(),alert("Failed to archive truck. Please try again.")}finally{k.value=!1}}},q=()=>m.get(route("admin.trucks.create")),G=l=>m.get(route("admin.trucks.show",l)),J=l=>m.get(route("admin.trucks.edit",l)),K=()=>m.get(route("admin.trucks.archived"));return X([b,_,h,x,v],()=>{m.get(route("admin.trucks.index"),{search:b.value,status:_.value,make:h.value,sort_field:x.value,sort_direction:v.value,page:1},{preserveState:!0,replace:!0})},{deep:!0}),(l,t)=>(r(),L(te,null,{header:s(()=>[a("div",re,[t[5]||(t[5]=a("h2",{class:"text-xl font-semibold leading-tight text-gray-800"},"Truck Management",-1)),a("div",ie,[i(B,{onClick:q},{default:s(()=>t[3]||(t[3]=[u("Add New Truck")])),_:1}),i(S,{onClick:K},{default:s(()=>t[4]||(t[4]=[u("View Disabled")])),_:1})])])]),default:s(()=>{var w;return[a("div",ne,[o.status||o.success||o.error?(r(),c("div",ue,[o.status?(r(),c("div",ce,n(o.status),1)):g("",!0),o.success?(r(),c("div",de,n(o.success),1)):g("",!0),o.error?(r(),c("div",me,n(o.error),1)):g("",!0)])):g("",!0),a("div",fe,[i(se,{modelValue:b.value,"onUpdate:modelValue":t[0]||(t[0]=e=>b.value=e),placeholder:"Search trucks...",class:"w-full md:w-72"},null,8,["modelValue"]),a("div",ve,[i(U,{modelValue:_.value,"onUpdate:modelValue":t[1]||(t[1]=e=>_.value=e),options:T,"option-value":"value","option-label":"text",placeholder:"All Statuses",class:"w-full md:w-48"},null,8,["modelValue"]),i(U,{modelValue:h.value,"onUpdate:modelValue":t[2]||(t[2]=e=>h.value=e),options:P.value,"option-value":"value","option-label":"text",placeholder:"All Makes",class:"w-full md:w-48"},null,8,["modelValue","options"])])]),a("div",pe,[a("div",ke,[i(ae,{columns:H,data:o.trucks.data,"sort-field":x.value,"sort-direction":v.value,onSort:W,class:"w-full"},{license_plate:s(({row:e})=>[a("span",xe,n(e.license_plate||"N/A"),1)]),make:s(({row:e})=>[a("span",ge,n(e.make||"N/A"),1)]),model:s(({row:e})=>[a("span",be,n(e.model||"N/A"),1)]),volume_capacity:s(({row:e})=>[u(n(e.volume_capacity?`${e.volume_capacity} mÂ³`:"N/A"),1)]),weight_capacity:s(({row:e})=>[u(n(e.weight_capacity?`${e.weight_capacity} kg`:"N/A"),1)]),status:s(({row:e})=>[a("span",{class:j(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full capitalize",E[e.status]])},n(O(e.status)),3)]),last_maintenance_date:s(({row:e})=>[u(n(e.last_maintenance_date||"Never"),1)]),"region.name":s(({row:e})=>[u(n(e.region&&e.region.name?e.region.name:"N/A"),1)]),actions:s(({row:e})=>[a("div",_e,[i(S,{onClick:A=>G(e.id)},{default:s(()=>t[6]||(t[6]=[u("View")])),_:2},1032,["onClick"]),i(B,{onClick:A=>J(e.id)},{default:s(()=>t[7]||(t[7]=[u("Edit")])),_:2},1032,["onClick"]),i(I,{onClick:A=>z(e)},{default:s(()=>t[8]||(t[8]=[u("Disable")])),_:2},1032,["onClick"])])]),_:1},8,["data","sort-field","sort-direction"]),((w=o.trucks.links)==null?void 0:w.length)>3?(r(),c("div",he,[a("div",ye,[(r(!0),c(F,null,Y(o.trucks.links,(e,A)=>(r(),c(F,{key:A},[e.url?(r(),L(Z(ee),{key:1,class:j(["mr-1 mb-1 px-4 py-3 text-sm leading-4 border rounded hover:bg-white focus:border-indigo-500 focus:text-indigo-500",{"bg-blue-700 text-white":e.active}]),href:e.url,innerHTML:e.label},null,8,["class","href","innerHTML"])):(r(),c("div",{key:0,class:"mr-1 mb-1 px-4 py-3 text-sm leading-4 text-gray-400 border rounded",innerHTML:e.label},null,8,we))],64))),128))])])):g("",!0)])])]),i(le,{show:C.value,onClose:y},{default:s(()=>{var e;return[a("div",Ae,[t[12]||(t[12]=a("h2",{class:"text-lg font-medium text-gray-900"},"Disable Truck?",-1)),a("p",Ce,[t[9]||(t[9]=u(" Are you sure you want to disable ")),a("strong",null,n((e=p.value)==null?void 0:e.license_plate),1),t[10]||(t[10]=u("? This action can be undone later if needed. "))]),a("div",Se,[i(S,{onClick:y},{default:s(()=>t[11]||(t[11]=[u("Cancel")])),_:1}),i(I,{onClick:R,disabled:k.value},{default:s(()=>[k.value?(r(),c("span",Te,"Disabling...")):(r(),c("span",Ve,"Disable"))]),_:1},8,["disabled"])])])]}),_:1},8,["show"])]}),_:1}))}},Oe=oe(Me,[["__scopeId","data-v-419ccee5"]]);export{Oe as default};
