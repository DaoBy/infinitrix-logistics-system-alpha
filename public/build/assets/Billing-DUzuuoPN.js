import{E as K}from"./EmployeeLayout-CfA_UWXy.js";import{_ as c}from"./PrimaryButton-Cvq5q4eC.js";import{d as v,o as i,w as g,b as e,n as F,c as n,e as y,t as a,f as d,F as Q,r as X,a as Z,W as G}from"./app-B0MxlU5m.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./NavLink-RNmN4-k9.js";import"./DangerButton-CMc3f1cK.js";const ee={class:"flex justify-between items-center px-6"},te={class:"flex space-x-2"},re={class:"px-6 py-4"},ae={class:"bg-white dark:bg-gray-800 shadow-sm rounded-lg overflow-hidden border border-gray-200 dark:border-gray-700 max-w-4xl mx-auto"},se={class:"p-6"},ie={class:"flex items-center"},de={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},le={key:1,xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},ne={class:"font-medium"},oe={key:0,class:"mt-1 text-sm"},ye={key:0},me={class:"mb-8"},xe={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6"},ge={class:"text-sm text-gray-900 dark:text-gray-100"},ue={class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},ce={class:"text-sm text-gray-500 dark:text-gray-400"},ve={class:"text-sm text-gray-500 dark:text-gray-400"},pe={class:"font-medium text-gray-900 dark:text-gray-100"},fe={class:"text-sm text-gray-500 dark:text-gray-400"},we={class:"font-medium text-gray-900 dark:text-gray-100"},he={class:"text-sm text-gray-500 dark:text-gray-400"},ke={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},be={class:"text-sm text-gray-900 dark:text-gray-100"},Re={class:"text-sm text-gray-500 dark:text-gray-400"},qe={class:"text-sm text-gray-900 dark:text-gray-100"},Ne={class:"text-sm text-gray-500 dark:text-gray-400"},De={class:"mb-8"},Ce={class:"overflow-x-auto"},Pe={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},Ae={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},Oe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300"},Be={class:"px-6 py-4 text-sm text-gray-500 dark:text-gray-300"},ze={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300"},He={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300"},Me={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300"},Ie={class:"bg-gray-50 dark:bg-gray-700"},Ve={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-gray-100"},We={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-gray-100"},Ee={class:"px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900 dark:text-gray-100"},Le={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Se={class:"text-sm text-gray-900 dark:text-gray-100"},Te={class:"text-sm text-gray-500 dark:text-gray-400"},Ue={key:0,class:"text-sm text-gray-500 dark:text-gray-400 mt-2"},Fe={class:"text-sm text-gray-900 dark:text-gray-100"},Ge={class:"text-sm text-gray-500 dark:text-gray-400"},je={key:0,class:"text-sm text-gray-500 dark:text-gray-400 mt-2"},Xe={__name:"Billing",props:{deliveryRequest:{type:Object,required:!0},waybillNumber:{type:String,required:!0},priceMatrix:{type:Object,default:()=>({})}},setup(r){const o=r,u=s=>isNaN(s)?"₱0.00":new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP",minimumFractionDigits:2}).format(s),p=s=>{if(!s)return"Not specified";try{return new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"Invalid date"}},j=s=>{if(!s)return"Not specified";try{return new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Invalid date"}},_=s=>o.priceMatrix?s.height*s.width*s.length/1e6*o.priceMatrix.volume_rate+s.weight*o.priceMatrix.weight_rate+o.priceMatrix.package_rate:0,Y=()=>{G.post(route("waybills.generate",o.deliveryRequest.id),{onSuccess:()=>{G.visit(route("waybills.index"))}})},$=()=>{var s;window.open(route("waybills.download",{id:(s=o.deliveryRequest.waybill)==null?void 0:s.id,final:!1}),"_blank")},J=()=>{var s;window.open(route("waybills.download",{id:(s=o.deliveryRequest.waybill)==null?void 0:s.id,final:!0}),"_blank")};return(s,t)=>(i(),v(K,null,{header:g(()=>{var m,x;return[e("div",ee,[t[3]||(t[3]=e("h2",{class:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200"}," Billing & Waybill Generation ",-1)),e("div",te,[((m=r.deliveryRequest.delivery_order)==null?void 0:m.status)!=="completed"?(i(),v(c,{key:0,onClick:$,class:"inline-flex items-center"},{default:g(()=>t[0]||(t[0]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M5 4v3H4a2 2 0 00-2 2v3a2 2 0 002 2h1v2a2 2 0 002 2h6a2 2 0 002-2v-2h1a2 2 0 002-2V9a2 2 0 00-2-2h-1V4a2 2 0 00-2-2H7a2 2 0 00-2 2zm8 0H7v3h6V4zm0 8H7v4h6v-4z","clip-rule":"evenodd"})],-1),d(" Print Initial Waybill ")])),_:1})):y("",!0),((x=r.deliveryRequest.delivery_order)==null?void 0:x.status)==="completed"?(i(),v(c,{key:1,onClick:J,class:"inline-flex items-center"},{default:g(()=>t[1]||(t[1]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M5 4v3H4a2 2 0 00-2 2v3a2 2 0 002 2h1v2a2 2 0 002 2h6a2 2 0 002-2v-2h1a2 2 0 002-2V9a2 2 0 00-2-2h-1V4a2 2 0 00-2-2H7a2 2 0 00-2 2zm8 0H7v3h6V4zm0 8H7v4h6v-4z","clip-rule":"evenodd"})],-1),d(" Print Final Waybill ")])),_:1})):y("",!0),Z(c,{onClick:Y,class:"inline-flex items-center"},{default:g(()=>t[2]||(t[2]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z","clip-rule":"evenodd"})],-1),d(" Generate Waybill ")])),_:1})])])]}),default:g(()=>{var m,x,f,w,h,k,b,R,q,N,D,C,P,A,O,B,z,H,M,I,V,W,E,L,S,T,U;return[e("div",re,[e("div",ae,[e("div",se,[e("div",{class:F(["mb-6 p-4 rounded-lg",{"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":r.deliveryRequest.isPaid(),"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200":!r.deliveryRequest.isPaid()&&r.deliveryRequest.payment_type==="prepaid","bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":r.deliveryRequest.payment_type==="postpaid"}])},[e("div",ie,[r.deliveryRequest.isPaid()?(i(),n("svg",de,t[4]||(t[4]=[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):(i(),n("svg",le,t[5]||(t[5]=[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM7 9a1 1 0 000 2h6a1 1 0 100-2H7z","clip-rule":"evenodd"},null,-1)]))),e("span",ne,a(r.deliveryRequest.payment_type.toUpperCase())+" - "+a(r.deliveryRequest.isPaid()?"PAID":r.deliveryRequest.payment_type==="prepaid"?"PENDING PAYMENT":"TO BE COLLECTED"),1)]),r.deliveryRequest.isPaid()&&r.deliveryRequest.payment?(i(),n("p",oe,[d(" Paid on: "+a(j(r.deliveryRequest.payment.created_at))+" ",1),r.deliveryRequest.payment_method?(i(),n("span",ye,"via "+a(r.deliveryRequest.payment_method.toUpperCase()),1)):y("",!0)])):y("",!0)],2),e("div",me,[t[13]||(t[13]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-4"},"Billing Details",-1)),e("div",xe,[e("div",null,[t[6]||(t[6]=e("h4",{class:"text-md font-medium text-gray-700 dark:text-gray-300 mb-2"},"Customer Information",-1)),e("p",ge,a(((m=r.deliveryRequest.sender)==null?void 0:m.name)||((x=r.deliveryRequest.sender)==null?void 0:x.company_name)||"N/A"),1),e("p",ue,a(((f=r.deliveryRequest.sender)==null?void 0:f.address)||"N/A"),1),e("p",ce,a(((w=r.deliveryRequest.sender)==null?void 0:w.mobile)||"N/A"),1)]),e("div",null,[t[10]||(t[10]=e("h4",{class:"text-md font-medium text-gray-700 dark:text-gray-300 mb-2"},"Service Information",-1)),e("p",ve,[t[7]||(t[7]=d(" Waybill Number: ")),e("span",pe,a(r.waybillNumber),1)]),e("p",fe,[t[8]||(t[8]=d(" Request Date: ")),e("span",we,a(p(r.deliveryRequest.created_at)),1)]),e("p",he,[t[9]||(t[9]=d(" Delivery Status: ")),e("span",{class:F(["font-medium",{"text-green-600 dark:text-green-400":((h=r.deliveryRequest.delivery_order)==null?void 0:h.status)==="completed","text-blue-600 dark:text-blue-400":((k=r.deliveryRequest.delivery_order)==null?void 0:k.status)==="in_transit","text-yellow-600 dark:text-yellow-400":((b=r.deliveryRequest.delivery_order)==null?void 0:b.status)==="pending"}])},a(((q=(R=r.deliveryRequest.delivery_order)==null?void 0:R.status)==null?void 0:q.toUpperCase())||"PENDING"),3)])])]),e("div",ke,[e("div",null,[t[11]||(t[11]=e("h4",{class:"text-md font-medium text-gray-700 dark:text-gray-300 mb-2"},"Origin",-1)),e("p",be,a(((N=r.deliveryRequest.pickUpRegion)==null?void 0:N.name)||"N/A"),1),e("p",Re,a(((D=r.deliveryRequest.pickUpRegion)==null?void 0:D.address)||"N/A"),1)]),e("div",null,[t[12]||(t[12]=e("h4",{class:"text-md font-medium text-gray-700 dark:text-gray-300 mb-2"},"Destination",-1)),e("p",qe,a(((C=r.deliveryRequest.dropOffRegion)==null?void 0:C.name)||"N/A"),1),e("p",Ne,a(((P=r.deliveryRequest.dropOffRegion)==null?void 0:P.address)||"N/A"),1)])])]),e("div",De,[t[18]||(t[18]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-4"},"Pricing Breakdown",-1)),e("div",Ce,[e("table",Pe,[t[17]||(t[17]=e("thead",{class:"bg-gray-50 dark:bg-gray-700"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Item "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Description "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Dimensions (cm) "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Weight (kg) "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Price ")])],-1)),e("tbody",Ae,[(i(!0),n(Q,null,X(r.deliveryRequest.packages,l=>(i(),n("tr",{key:l.id},[e("td",Oe,a(l.item_code||"N/A"),1),e("td",Be,a(l.item_name||"Unspecified Item"),1),e("td",ze,a(l.length)+" × "+a(l.width)+" × "+a(l.height),1),e("td",He,a(l.weight||"N/A"),1),e("td",Me,a(u(_(l))),1)]))),128))]),e("tfoot",Ie,[e("tr",null,[t[14]||(t[14]=e("td",{colspan:"4",class:"px-6 py-4 text-right text-sm font-medium text-gray-500 dark:text-gray-300"}," Subtotal: ",-1)),e("td",Ve,a(u(r.deliveryRequest.total_price-(((A=r.priceMatrix)==null?void 0:A.base_fee)||0))),1)]),e("tr",null,[t[15]||(t[15]=e("td",{colspan:"4",class:"px-6 py-4 text-right text-sm font-medium text-gray-500 dark:text-gray-300"}," Base Fee: ",-1)),e("td",We,a(u(((O=r.priceMatrix)==null?void 0:O.base_fee)||0)),1)]),e("tr",null,[t[16]||(t[16]=e("td",{colspan:"4",class:"px-6 py-4 text-right text-sm font-medium text-gray-500 dark:text-gray-300"}," Total: ",-1)),e("td",Ee,a(u(r.deliveryRequest.total_price)),1)])])])])]),e("div",null,[t[23]||(t[23]=e("h3",{class:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-4"},"Delivery Information",-1)),e("div",Le,[e("div",null,[t[20]||(t[20]=e("h4",{class:"text-md font-medium text-gray-700 dark:text-gray-300 mb-2"},"Assigned Driver",-1)),e("p",Se,a(((z=(B=r.deliveryRequest.deliveryOrder)==null?void 0:B.driver)==null?void 0:z.name)||"Not assigned yet"),1),e("p",Te,a(((M=(H=r.deliveryRequest.deliveryOrder)==null?void 0:H.driver)==null?void 0:M.mobile)||""),1),(I=r.deliveryRequest.deliveryOrder)!=null&&I.estimated_arrival?(i(),n("p",Ue,[t[19]||(t[19]=e("span",{class:"font-medium"},"ETA:",-1)),d(" "+a(p(r.deliveryRequest.deliveryOrder.estimated_arrival)),1)])):y("",!0)]),e("div",null,[t[22]||(t[22]=e("h4",{class:"text-md font-medium text-gray-700 dark:text-gray-300 mb-2"},"Assigned Truck",-1)),e("p",Fe,a(((W=(V=r.deliveryRequest.deliveryOrder)==null?void 0:V.truck)==null?void 0:W.license_plate)||"Not assigned yet"),1),e("p",Ge,a((L=(E=r.deliveryRequest.deliveryOrder)==null?void 0:E.truck)==null?void 0:L.make)+" "+a((T=(S=r.deliveryRequest.deliveryOrder)==null?void 0:S.truck)==null?void 0:T.model),1),(U=r.deliveryRequest.deliveryOrder)!=null&&U.current_region?(i(),n("p",je,[t[21]||(t[21]=e("span",{class:"font-medium"},"Current Location:",-1)),d(" "+a(r.deliveryRequest.deliveryOrder.current_region.name),1)])):y("",!0)])])])])])])]}),_:1}))}};export{Xe as default};
