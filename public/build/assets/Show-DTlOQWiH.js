import{c as d,o as i,b as e,t as r,g as x,i as I,d as F,w as v,a as l,e as g,n as O,f as b,l as T,v as W,W as p}from"./app-B0R_bMJi.js";import{E as Z}from"./EmployeeLayout-BQLa5PLV.js";import{_ as G}from"./PrimaryButton-z6gddSkS.js";import{_ as P}from"./SecondaryButton-BDpVYXxA.js";import{D as A}from"./DangerButton-DlTel5kP.js";import{_ as H}from"./InputLabel-BebyH7Kw.js";import{_ as J}from"./InputError-BoXW6i3M.js";import{M as K}from"./Modal-Oa0ozw3w.js";import{_ as Q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./NavLink-BchASNUp.js";const X={props:{label:String,value:[String,Number],currentValue:[String,Number],hasChange:Boolean}},Y={class:"flex justify-between items-start py-2"},ee={class:"flex-1"},te={class:"text-sm font-medium text-gray-700"},ae={key:0,class:"mt-1"},le={class:"text-sm text-gray-500 line-through"},se={class:"text-sm text-green-600 font-medium"},ue={key:1,class:"text-sm text-gray-900 mt-1"};function re(n,_,o,m,a,s){return i(),d("div",Y,[e("div",ee,[e("span",te,r(o.label)+":",1),o.hasChange?(i(),d("div",ae,[e("p",le,r(o.currentValue||"Not set"),1),e("p",se,r(o.value||"Not set"),1)])):(i(),d("p",ue,r(o.value||"Not set"),1))])])}const u=Q(X,[["render",re]]),ne={class:"flex justify-between items-center px-6"},oe={class:"text-xl font-semibold leading-tight text-gray-800"},ie={class:"flex space-x-2"},de={class:"px-6"},ce={key:0,class:"mb-6 max-w-7xl mx-auto"},ve={key:0,class:"p-4 bg-blue-100 text-blue-800 rounded"},me={key:1,class:"p-4 bg-green-100 text-green-800 rounded"},ge={key:2,class:"p-4 bg-red-100 text-red-800 rounded"},he={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg max-w-7xl mx-auto"},be={class:"bg-gray-50 px-6 py-4 border-b"},pe={class:"flex flex-col md:flex-row justify-between items-start md:items-center"},fe={class:"text-sm text-gray-600"},xe={class:"mt-2 md:mt-0"},_e={class:"p-6 grid grid-cols-1 lg:grid-cols-2 gap-8"},ye={class:"space-y-4"},we={key:0},je={class:"space-y-4"},ke={class:"px-6 pb-6"},Ce={class:"bg-gray-50 p-4 rounded-lg"},Re={class:"text-gray-700"},Ne={key:0,class:"px-6 pb-6"},qe={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Se={class:"mt-1 text-sm text-gray-900"},$e={class:"mt-1 text-sm text-gray-900"},Be={key:1,class:"px-6 py-4 bg-gray-50 border-t"},De={class:"flex justify-end space-x-4"},Me={class:"p-6"},Pe={class:"mt-4"},Ae={class:"mt-6 flex justify-end space-x-4"},Ze={__name:"Show",props:{request:Object,customer:Object,status:String,success:String,error:String},setup(n){const _=n,o=x(!1),m=x(""),a=x(_.request),s=x(_.customer),V=I(()=>({pending:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"})[a.value.status]||"bg-gray-100 text-gray-800"),E=c=>({pending:"Pending Review",approved:"Approved",rejected:"Rejected"})[c]||c,y=c=>c?new Date(c).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",z=()=>{p.visit(route("admin.customer-update-requests.index"))},L=()=>{confirm("Are you sure you want to approve these changes?")&&p.post(route("admin.customer-update-requests.approve",a.value.id),{},{preserveScroll:!0,onSuccess:()=>{p.reload({only:["request","customer"]})}})},U=()=>{if(!m.value.trim()){alert("Please provide a rejection reason");return}p.post(route("admin.customer-update-requests.reject",a.value.id),{rejection_reason:m.value},{preserveScroll:!0,onSuccess:()=>{o.value=!1,m.value="",p.reload({only:["request","customer"]})}})};return(c,t)=>(i(),F(Z,null,{header:v(()=>{var h;return[e("div",ne,[e("h2",oe," Customer Update Request: "+r(((h=a.value.customer)==null?void 0:h.name)||"N/A"),1),e("div",ie,[l(P,{onClick:z},{default:v(()=>t[4]||(t[4]=[b("Back to List")])),_:1})])])]}),default:v(()=>{var h,w,j,k,C,R,N,q,S,$,B,D,M;return[e("div",de,[n.status||n.success||n.error?(i(),d("div",ce,[n.status?(i(),d("div",ve,r(n.status),1)):g("",!0),n.success?(i(),d("div",me,r(n.success),1)):g("",!0),n.error?(i(),d("div",ge,r(n.error),1)):g("",!0)])):g("",!0),e("div",he,[e("div",be,[e("div",pe,[e("div",null,[t[5]||(t[5]=e("h3",{class:"text-lg font-medium text-gray-900"},"Request Details",-1)),e("p",fe,"Submitted on "+r(y(a.value.created_at)),1)]),e("div",xe,[e("span",{class:O([V.value,"px-3 py-1 rounded-full text-sm font-medium"])},r(E(a.value.status)),3)])])]),e("div",_e,[e("div",null,[t[6]||(t[6]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4 pb-2 border-b border-gray-200"}," Current Profile Information ",-1)),e("div",ye,[s.value?(i(),d("div",we,[l(u,{label:"Name",value:s.value.name},null,8,["value"]),l(u,{label:"Email",value:s.value.email},null,8,["value"]),l(u,{label:"Mobile",value:s.value.mobile},null,8,["value"]),l(u,{label:"Phone",value:s.value.phone},null,8,["value"]),l(u,{label:"Address",value:s.value.address},null,8,["value"])])):g("",!0)])]),e("div",null,[t[7]||(t[7]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4 pb-2 border-b border-gray-200"}," Requested Changes ",-1)),e("div",je,[l(u,{label:"First Name",value:a.value.first_name,"current-value":(h=s.value)==null?void 0:h.first_name,"has-change":a.value.first_name!==null},null,8,["value","current-value","has-change"]),l(u,{label:"Middle Name",value:a.value.middle_name,"current-value":(w=s.value)==null?void 0:w.middle_name,"has-change":a.value.middle_name!==null},null,8,["value","current-value","has-change"]),l(u,{label:"Last Name",value:a.value.last_name,"current-value":(j=s.value)==null?void 0:j.last_name,"has-change":a.value.last_name!==null},null,8,["value","current-value","has-change"]),l(u,{label:"Email",value:a.value.email,"current-value":(k=s.value)==null?void 0:k.email,"has-change":a.value.email!==null},null,8,["value","current-value","has-change"]),l(u,{label:"Mobile",value:a.value.mobile,"current-value":(C=s.value)==null?void 0:C.mobile,"has-change":a.value.mobile!==null},null,8,["value","current-value","has-change"]),l(u,{label:"Phone",value:a.value.phone,"current-value":(R=s.value)==null?void 0:R.phone,"has-change":a.value.phone!==null},null,8,["value","current-value","has-change"]),l(u,{label:"Building Number",value:a.value.building_number,"current-value":(N=s.value)==null?void 0:N.building_number,"has-change":a.value.building_number!==null},null,8,["value","current-value","has-change"]),l(u,{label:"Street",value:a.value.street,"current-value":(q=s.value)==null?void 0:q.street,"has-change":a.value.street!==null},null,8,["value","current-value","has-change"]),l(u,{label:"Barangay",value:a.value.barangay,"current-value":(S=s.value)==null?void 0:S.barangay,"has-change":a.value.barangay!==null},null,8,["value","current-value","has-change"]),l(u,{label:"City",value:a.value.city,"current-value":($=s.value)==null?void 0:$.city,"has-change":a.value.city!==null},null,8,["value","current-value","has-change"]),l(u,{label:"Province",value:a.value.province,"current-value":(B=s.value)==null?void 0:B.province,"has-change":a.value.province!==null},null,8,["value","current-value","has-change"]),l(u,{label:"ZIP Code",value:a.value.zip_code,"current-value":(D=s.value)==null?void 0:D.zip_code,"has-change":a.value.zip_code!==null},null,8,["value","current-value","has-change"])])])]),e("div",ke,[t[8]||(t[8]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Reason for Changes",-1)),e("div",Ce,[e("p",Re,r(a.value.reason||"No reason provided"),1)])]),a.value.reviewed_by?(i(),d("div",Ne,[t[11]||(t[11]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Review Information",-1)),e("div",qe,[e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-gray-700"},"Reviewed By",-1)),e("p",Se,r(((M=a.value.reviewer)==null?void 0:M.name)||"N/A"),1)]),e("div",null,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-gray-700"},"Reviewed At",-1)),e("p",$e,r(y(a.value.reviewed_at)),1)])])])):g("",!0),a.value.status==="pending"?(i(),d("div",Be,[e("div",De,[l(A,{onClick:t[0]||(t[0]=f=>o.value=!0)},{default:v(()=>t[12]||(t[12]=[b("Reject")])),_:1}),l(G,{onClick:L},{default:v(()=>t[13]||(t[13]=[b("Approve")])),_:1})])])):g("",!0)])]),l(K,{show:o.value,onClose:t[3]||(t[3]=f=>o.value=!1)},{default:v(()=>[e("div",Me,[t[16]||(t[16]=e("h2",{class:"text-lg font-medium text-gray-900"},"Reject Update Request?",-1)),t[17]||(t[17]=e("p",{class:"mt-1 text-sm text-gray-600"}," Please provide a reason for rejecting this profile update request. ",-1)),e("div",Pe,[l(H,{for:"rejection_reason",value:"Rejection Reason *"}),T(e("textarea",{id:"rejection_reason",rows:"4",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500","onUpdate:modelValue":t[1]||(t[1]=f=>m.value=f),required:"",placeholder:"Explain why this request is being rejected..."},null,512),[[W,m.value]]),l(J,{class:"mt-2",message:c.form.errors.rejection_reason},null,8,["message"])]),e("div",Ae,[l(P,{onClick:t[2]||(t[2]=f=>o.value=!1)},{default:v(()=>t[14]||(t[14]=[b("Cancel")])),_:1}),l(A,{onClick:U,disabled:!m.value.trim()},{default:v(()=>t[15]||(t[15]=[b(" Confirm Reject ")])),_:1},8,["disabled"])])])]),_:1},8,["show"])]}),_:1}))}};export{Ze as default};
