import{g as $,p as ye,i as C,d as V,o,w as y,b as e,c as l,e as x,n as Q,f as g,t as r,a as m,q as fe,F as X,r as Y,k as Z,u as ve,W as P}from"./app-DV6QGe5n.js";import{E as _e}from"./EmployeeLayout-iir4z3Zz.js";import{_ as we}from"./SearchInput-0z3jiYwM.js";import{S as ee}from"./SelectInput-oxDmFdQg.js";import{_ as A}from"./SecondaryButton-Cs3_kGiW.js";import{_ as H}from"./PrimaryButton-D1QT-SsD.js";import{P as te}from"./Pagination-C1DXSjd8.js";import{r as be}from"./ArchiveBoxIcon-BDk5UslP.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./NavLink-sW0XPEdd.js";import"./DangerButton-vX3ciNPD.js";const ke={class:"py-6 px-2 md:px-6 w-full max-w-[95rem] mx-auto"},Ce={class:"bg-white shadow-sm rounded-lg border border-gray-200 mb-6 w-full"},Se={class:"border-b border-gray-200"},Pe={class:"-mb-px flex space-x-8 px-6"},je={class:"ml-2 bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs font-medium"},$e={class:"ml-2 bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs font-medium"},Ve={key:0,class:"p-4 border-b border-gray-200"},Ae={key:0,class:"p-4 bg-blue-100 text-blue-800 rounded"},He={key:1,class:"p-4 bg-green-100 text-green-800 rounded"},Ne={key:2,class:"p-4 bg-red-100 text-red-800 rounded"},ze={class:"p-4 border-b border-gray-200"},De={class:"flex flex-col lg:flex-row gap-4"},Be={class:"flex-1"},Re={class:"sm:w-48"},Ie={class:"sm:w-32"},Oe={class:"flex items-center gap-2"},Te={class:"flex justify-between items-center mt-4"},Fe={class:"text-sm text-gray-500"},Le={key:0,class:"ml-2"},Me={key:1,class:"ml-2"},Ee={key:1,class:"p-4 border-b border-gray-200 bg-yellow-50"},We={class:"flex items-center justify-between"},Ue={class:"text-yellow-800 font-medium"},qe={key:0},Ke={class:"bg-white shadow-sm rounded-lg overflow-hidden border border-gray-200 w-full"},Ge={class:"px-4 py-5 sm:px-6 border-b border-gray-200"},Je={class:"flex justify-between items-center"},Qe={class:"text-sm text-gray-500"},Xe={class:"overflow-x-auto"},Ye={class:"min-w-full divide-y divide-gray-200"},Ze={class:"bg-gray-50"},et={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-12"},tt=["checked"],st={class:"bg-white divide-y divide-gray-200"},at={class:"px-6 py-4 whitespace-nowrap"},rt=["checked","onChange"],nt={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},ot={class:"font-mono"},it={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},lt={class:"flex items-center"},dt={class:"truncate max-w-xs"},ct={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ut={class:"flex items-center"},pt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},xt={class:"text-sm"},mt={class:"font-medium"},gt={class:"text-gray-500 text-xs truncate max-w-xs"},ht={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},yt={class:"text-sm text-gray-900"},ft={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},vt={class:"flex justify-end space-x-2"},_t={key:1},wt={key:1},bt={class:"bg-white shadow-sm rounded-lg overflow-hidden border border-gray-200 w-full"},kt={class:"px-4 py-5 sm:px-6 border-b border-gray-200"},Ct={class:"flex justify-between items-center"},St={class:"text-sm text-gray-500"},Pt={class:"overflow-x-auto"},jt={class:"min-w-full divide-y divide-gray-200"},$t={class:"bg-white divide-y divide-gray-200"},Vt={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},At={class:"font-mono"},Ht={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Nt={class:"flex items-center"},zt={class:"truncate max-w-xs"},Dt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Bt={class:"flex items-center"},Rt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},It={class:"text-sm"},Ot={class:"font-medium"},Tt={class:"text-gray-500 text-xs truncate max-w-xs"},Ft={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Lt={class:"text-sm text-gray-900"},Mt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Et={key:0,class:"text-sm"},Wt={class:"text-gray-500 text-xs"},Ut={key:1,class:"text-gray-400"},qt={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},Kt={class:"flex justify-end space-x-2"},Gt={key:1},Jt={colspan:"7",class:"px-6 py-4 text-center text-sm text-gray-500"},Qt={class:"text-center py-12"},ls={__name:"Index",props:{packages:Object,regions:Array,stats:Object,filters:Object,status:String,success:String,error:String},setup(n){var I,O,T,F;const u=n,d=$(!1),c=$([]),h=$(((I=u.filters)==null?void 0:I.tab)||"not_printed"),i=ye({search:((O=u.filters)==null?void 0:O.search)||"",region_id:((T=u.filters)==null?void 0:T.region_id)||"",per_page:((F=u.filters)==null?void 0:F.per_page)||15}),se=C(()=>[{value:"",label:"All Regions"},...u.regions.map(s=>({value:s.id,label:s.name}))]),ae=C(()=>[{value:"10",label:"10 items"},{value:"15",label:"15 items"},{value:"25",label:"25 items"},{value:"50",label:"50 items"}]),re=C(()=>{var s;return((s=u.stats)==null?void 0:s.not_printed_total)||0}),ne=C(()=>{var s;return((s=u.stats)==null?void 0:s.printed_total)||0}),N=C(()=>{var s,t;return((t=(s=u.packages)==null?void 0:s.data)==null?void 0:t.length)>0&&c.value.length===u.packages.data.length});function oe(){var s,t;return((t=(s=u.packages)==null?void 0:s.data)==null?void 0:t.length)||0}function ie(){return h.value==="not_printed"?"packages ready for printing":"printed packages"}function z(s){h.value=s,c.value=[],f()}function f(){const s={tab:h.value,...i};Object.keys(s).forEach(t=>{(s[t]===""||s[t]===null)&&delete s[t]}),P.visit(route("stickers.index"),{data:s,preserveState:!0,preserveScroll:!0,replace:!0,onStart:()=>d.value=!0,onFinish:()=>d.value=!1})}let D=null;function le(){clearTimeout(D),D=setTimeout(()=>{(i.search===""||i.search.length>=3)&&f()},500)}function de(){Object.keys(i).forEach(s=>{i[s]=""}),i.per_page=15,f()}function S(){P.reload({only:["packages","stats"],preserveScroll:!0})}function B(s){if(s>=1&&s<=ce()){const t={tab:h.value,...i,page:s};Object.keys(t).forEach(p=>{(t[p]===""||t[p]===null)&&delete t[p]}),P.visit(route("stickers.index"),{data:t,preserveState:!0,preserveScroll:!0,onStart:()=>d.value=!0,onFinish:()=>d.value=!1})}}function ce(){var s,t;return((t=(s=u.packages)==null?void 0:s.meta)==null?void 0:t.last_page)||1}function ue(s){const t=u.regions.find(p=>p.id==s);return t?t.name:"Unknown Region"}function pe(){N.value?c.value=[]:c.value=u.packages.data.map(s=>s.id)}function xe(s){const t=c.value.indexOf(s);t===-1?c.value.push(s):c.value.splice(t,1)}async function R(s){d.value=!0;try{const t=`package_ids[]=${s.id}`,p=window.open(`${route("stickers.bulk-print")}?${t}`,"_blank");p?(p.focus(),setTimeout(()=>{S()},1500)):(window.location.href=`${route("stickers.bulk-print")}?${t}`,d.value=!1)}catch(t){console.error("Print error:",t),d.value=!1}}async function me(){if(c.value.length!==0){d.value=!0;try{const s=c.value.map(p=>`package_ids[]=${p}`).join("&"),t=window.open(`${route("stickers.bulk-print")}?${s}`,"_blank");t?(t.focus(),setTimeout(()=>{S(),c.value=[]},1500)):(window.location.href=`${route("stickers.bulk-print")}?${s}`,d.value=!1,c.value=[])}catch(s){console.error("Bulk print error:",s),d.value=!1}}}function ge(s){confirm("Are you sure you want to reset this sticker? This will allow it to be printed again.")&&(d.value=!0,P.post(route("stickers.reset",s.id),{},{preserveScroll:!0,onSuccess:()=>{S()},onFinish:()=>d.value=!1}))}function he(s){return new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}return(s,t)=>(o(),V(_e,null,{header:y(()=>t[7]||(t[7]=[e("div",{class:"flex flex-wrap justify-between items-center gap-4 px-4 md:px-6 w-full"},[e("div",null,[e("h2",{class:"text-xl font-semibold leading-tight text-gray-800"}," Sticker Management "),e("p",{class:"text-sm text-gray-600 mt-1"}," Print and manage package stickers for delivery. ")])],-1)])),default:y(()=>{var p,L,M,E,W,U,q,K,G,J;return[e("div",ke,[e("div",Ce,[e("div",Se,[e("nav",Pe,[e("button",{onClick:t[0]||(t[0]=a=>z("not_printed")),class:Q(["py-4 px-1 border-b-2 font-medium text-sm transition-colors duration-200 flex items-center",h.value==="not_printed"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},[t[8]||(t[8]=g(" 🖨️ Not Printed ")),e("span",je,r(re.value),1)],2),e("button",{onClick:t[1]||(t[1]=a=>z("printed")),class:Q(["py-4 px-1 border-b-2 font-medium text-sm transition-colors duration-200 flex items-center",h.value==="printed"?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},[t[9]||(t[9]=g(" ✅ Printed Stickers ")),e("span",$e,r(ne.value),1)],2)])]),n.status||n.success||n.error?(o(),l("div",Ve,[n.status?(o(),l("div",Ae,r(n.status),1)):x("",!0),n.success?(o(),l("div",He,r(n.success),1)):x("",!0),n.error?(o(),l("div",Ne,r(n.error),1)):x("",!0)])):x("",!0),e("div",ze,[e("div",De,[e("div",Be,[m(we,{modelValue:i.search,"onUpdate:modelValue":t[2]||(t[2]=a=>i.search=a),placeholder:"Search by package ID, item, waybill, receiver...",onKeyup:fe(f,["enter"]),onInput:le,class:"w-full"},null,8,["modelValue"])]),e("div",Re,[m(ee,{modelValue:i.region_id,"onUpdate:modelValue":t[3]||(t[3]=a=>i.region_id=a),options:se.value,placeholder:"All Regions",onChange:f},null,8,["modelValue","options"])]),e("div",Ie,[m(ee,{modelValue:i.per_page,"onUpdate:modelValue":t[4]||(t[4]=a=>i.per_page=a),options:ae.value,placeholder:"Items per page",onChange:f},null,8,["modelValue","options"])]),e("div",Oe,[m(A,{onClick:S},{default:y(()=>t[10]||(t[10]=[e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),g(" Refresh ")])),_:1}),m(A,{onClick:de},{default:y(()=>t[11]||(t[11]=[g(" Reset ")])),_:1})])]),e("div",Te,[e("div",Fe,[g(" Showing "+r(oe())+" "+r(ie())+" ",1),i.search?(o(),l("span",Le,'• "'+r(i.search)+'"',1)):x("",!0),i.region_id?(o(),l("span",Me," • "+r(ue(i.region_id)),1)):x("",!0)])])]),c.value.length>0?(o(),l("div",Ee,[e("div",We,[e("span",Ue,r(c.value.length)+" package(s) selected ",1),m(H,{onClick:me,disabled:d.value},{default:y(()=>t[12]||(t[12]=[e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})],-1),g(" Print Selected ")])),_:1},8,["disabled"])])])):x("",!0)]),h.value==="not_printed"?(o(),l("div",qe,[e("div",Ke,[e("div",Ge,[e("div",Je,[t[13]||(t[13]=e("div",null,[e("h3",{class:"text-lg font-medium text-gray-900"}," Packages Ready for Sticker Printing "),e("p",{class:"mt-1 text-sm text-gray-500"}," Packages that need sticker printing ")],-1)),e("div",Qe," Showing "+r(((L=(p=n.packages)==null?void 0:p.data)==null?void 0:L.length)||0)+" packages ",1)])]),e("div",Xe,[e("table",Ye,[e("thead",Ze,[e("tr",null,[e("th",et,[e("input",{type:"checkbox",checked:N.value,onChange:pe,class:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,40,tt)]),t[14]||(t[14]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Package ID ",-1)),t[15]||(t[15]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Item Name ",-1)),t[16]||(t[16]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Destination ",-1)),t[17]||(t[17]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Receiver ",-1)),t[18]||(t[18]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Waybill ",-1)),t[19]||(t[19]=e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ",-1))])]),e("tbody",st,[((E=(M=n.packages)==null?void 0:M.data)==null?void 0:E.length)>0?(o(!0),l(X,{key:0},Y(n.packages.data,a=>{var v,_,w,b,k;return o(),l("tr",{key:a.id,class:"hover:bg-gray-50"},[e("td",at,[e("input",{type:"checkbox",checked:c.value.includes(a.id),onChange:j=>xe(a.id),class:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,40,rt)]),e("td",nt,[e("span",ot,r(a.item_code),1)]),e("td",it,[e("div",lt,[e("span",dt,r(a.item_name),1)])]),e("td",ct,[e("div",ut,[e("div",{class:"w-4 h-4 rounded-full mr-2 border border-gray-300",style:Z({backgroundColor:(v=a.destination_region)==null?void 0:v.color_hex})},null,4),e("span",null,r((_=a.destination_region)==null?void 0:_.name),1)])]),e("td",pt,[e("div",xt,[e("div",mt,r((w=a.receiver)==null?void 0:w.name),1),e("div",gt,r((b=a.receiver)==null?void 0:b.address),1)])]),e("td",ht,[e("span",yt,r(((k=a.waybill)==null?void 0:k.waybill_number)||"N/A"),1)]),e("td",ft,[e("div",vt,[m(H,{onClick:j=>R(a),disabled:d.value,size:"xs",class:"flex items-center"},{default:y(()=>t[20]||(t[20]=[e("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})],-1),g(" Print ")])),_:2},1032,["onClick","disabled"])])])])}),128)):(o(),l("tr",_t,t[21]||(t[21]=[e("td",{colspan:"7",class:"px-6 py-4 text-center text-sm text-gray-500"},[e("div",{class:"text-center py-12"},[e("svg",{class:"h-12 w-12 mx-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})]),e("p",{class:"text-gray-500 mt-2"},"No packages ready for printing")])],-1)])))])])]),(W=n.packages)!=null&&W.meta&&n.packages.meta.last_page>1?(o(),V(te,{key:0,pagination:n.packages.meta,onPageChanged:t[5]||(t[5]=a=>B(a)),class:"px-4 py-3"},null,8,["pagination"])):x("",!0)])])):h.value==="printed"?(o(),l("div",wt,[e("div",bt,[e("div",kt,[e("div",Ct,[t[22]||(t[22]=e("div",null,[e("h3",{class:"text-lg font-medium text-gray-900"}," Printed Stickers "),e("p",{class:"mt-1 text-sm text-gray-500"}," Packages with printed stickers ")],-1)),e("div",St," Showing "+r(((q=(U=n.packages)==null?void 0:U.data)==null?void 0:q.length)||0)+" packages ",1)])]),e("div",Pt,[e("table",jt,[t[26]||(t[26]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Package ID "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Item Name "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Destination "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Receiver "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Waybill "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Printed At "),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),e("tbody",$t,[((G=(K=n.packages)==null?void 0:K.data)==null?void 0:G.length)>0?(o(!0),l(X,{key:0},Y(n.packages.data,a=>{var v,_,w,b,k;return o(),l("tr",{key:a.id,class:"hover:bg-gray-50"},[e("td",Vt,[e("span",At,r(a.item_code),1)]),e("td",Ht,[e("div",Nt,[e("span",zt,r(a.item_name),1)])]),e("td",Dt,[e("div",Bt,[e("div",{class:"w-4 h-4 rounded-full mr-2 border border-gray-300",style:Z({backgroundColor:(v=a.destination_region)==null?void 0:v.color_hex})},null,4),e("span",null,r((_=a.destination_region)==null?void 0:_.name),1)])]),e("td",Rt,[e("div",It,[e("div",Ot,r((w=a.receiver)==null?void 0:w.name),1),e("div",Tt,r((b=a.receiver)==null?void 0:b.address),1)])]),e("td",Ft,[e("span",Lt,r(((k=a.waybill)==null?void 0:k.waybill_number)||"N/A"),1)]),e("td",Mt,[a.sticker_printed_at?(o(),l("div",Et,[e("div",null,r(he(a.sticker_printed_at)),1),e("div",Wt," by "+r(a.sticker_printed_by||"System"),1)])):(o(),l("span",Ut,"-"))]),e("td",qt,[e("div",Kt,[m(H,{onClick:j=>R(a),disabled:d.value,size:"xs",class:"flex items-center"},{default:y(()=>t[23]||(t[23]=[e("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})],-1),g(" Reprint ")])),_:2},1032,["onClick","disabled"]),m(A,{onClick:j=>ge(a),disabled:d.value,size:"xs",class:"flex items-center"},{default:y(()=>t[24]||(t[24]=[e("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),g(" Reset ")])),_:2},1032,["onClick","disabled"])])])])}),128)):(o(),l("tr",Gt,[e("td",Jt,[e("div",Qt,[m(ve(be),{class:"h-12 w-12 mx-auto text-gray-400"}),t[25]||(t[25]=e("p",{class:"text-gray-500 mt-2"},"No printed stickers found",-1))])])]))])])]),(J=n.packages)!=null&&J.meta&&n.packages.meta.last_page>1?(o(),V(te,{key:0,pagination:n.packages.meta,onPageChanged:t[6]||(t[6]=a=>B(a)),class:"px-4 py-3"},null,8,["pagination"])):x("",!0)])])):x("",!0)])]}),_:1}))}};export{ls as default};
