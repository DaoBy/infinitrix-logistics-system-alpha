import{E as X}from"./EmployeeLayout-BQLa5PLV.js";import{_ as N}from"./PrimaryButton-z6gddSkS.js";import{_ as D}from"./SecondaryButton-BDpVYXxA.js";import{D as j}from"./DangerButton-DlTel5kP.js";import{_ as Y}from"./SearchInput-BHbkz-wy.js";import{S as Z}from"./SelectInput-f4kpY-DU.js";import{_ as ee}from"./DataTable-C_2NMP2T.js";import{M as P}from"./Modal-Oa0ozw3w.js";import{g as c,i as te,h as se,W as v,d as $,o,w as l,b as s,a as n,c as i,e as _,t as u,f as d,n as F,F as B,r as le,u as ae,P as oe}from"./app-B0R_bMJi.js";import{_ as re}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./NavLink-BchASNUp.js";/* empty css                                                                    */const ne={class:"flex justify-between items-center px-6"},ie={class:"flex space-x-2"},de={class:"px-6 sm:px-8"},ue={key:0,class:"mb-6"},ce={key:0,class:"p-4 bg-blue-100 text-blue-800 rounded"},me={key:1,class:"p-4 bg-green-100 text-green-800 rounded"},ve={key:2,class:"p-4 bg-red-100 text-red-800 rounded"},fe={class:"mb-6 flex flex-col md:flex-row justify-between items-start md:items-center gap-4 w-full mx-auto"},pe={class:"flex flex-wrap gap-2 w-full md:w-auto"},xe={class:"justify-center flex items-center"},he={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg w-center"},ke={class:"p-5 bg-white border-b border-gray-200"},_e={class:"truncate block w-32"},ge={class:"truncate block w-32"},be={class:"truncate block w-32"},we={class:"flex space-x-2 min-w-[200px]"},ye={key:0,class:"mt-4 flex justify-center"},Ce={class:"flex flex-wrap -mb-1"},Ae=["innerHTML"],De={class:"p-6"},Me={class:"mt-1 text-sm text-gray-600"},Se={class:"mt-6 flex justify-end space-x-4"},Te={key:0},Re={key:1},Ve={class:"p-6"},Le={class:"mt-1 text-sm text-gray-600"},Ne={class:"mt-6 flex justify-end space-x-4"},je={key:0},Pe={key:1},$e={__name:"Archived",props:{trucks:Object,status:String,success:String,error:String},setup(r){var T,R,V,L;const p=r,M=c(!1),S=c(!1),x=c(null),h=c(null),m=c(!1),g=c(((T=p.trucks.filters)==null?void 0:T.search)||""),b=c(((R=p.trucks.filters)==null?void 0:R.make)||""),k=c(((V=p.trucks.filters)==null?void 0:V.sort_field)||"archived_at"),f=c(((L=p.trucks.filters)==null?void 0:L.sort_direction)||"desc"),H=[{value:"available",text:"Available"},{value:"in_use",text:"In Use"},{value:"under_repair",text:"Under Repair"}],U={available:"bg-green-100 text-green-800",in_use:"bg-yellow-100 text-yellow-800",under_repair:"bg-red-100 text-red-800"},E=[{field:"license_plate",header:"License Plate",sortable:!0,width:"150px"},{field:"make",header:"Make",sortable:!0,width:"150px"},{field:"model",header:"Model",sortable:!0,width:"150px"},{field:"region.name",header:"Region",sortable:!0,width:"150px"},{field:"status",header:"Status",sortable:!0,width:"120px"},{field:"archived_at",header:"Archived Date",sortable:!0,width:"150px"},{field:"actions",header:"Actions",sortable:!1,width:"250px"}],I=te(()=>{const a=[...new Set(p.trucks.data.map(e=>e.make))];return[{value:"",text:"All Makes"},...a.map(e=>({value:e,text:e}))]}),O=a=>{const e=H.find(C=>C.value===a);return e?e.text:a.replace("_"," ")},z=a=>{k.value===a?f.value=f.value==="asc"?"desc":"asc":(k.value=a,f.value="asc")},W=a=>v.get(route("admin.trucks.show",a)),q=a=>{x.value=a,M.value=!0},w=()=>{M.value=!1,setTimeout(()=>{x.value=null,m.value=!1},300)},G=async()=>{if(x.value){m.value=!0;try{await v.put(route("admin.trucks.restore",x.value.id),{},{preserveScroll:!0}),w(),v.reload()}catch{w(),alert("Failed to restore truck. Please try again.")}}},J=a=>{h.value=a,S.value=!0},y=()=>{S.value=!1,setTimeout(()=>{h.value=null,m.value=!1},300)},K=async()=>{if(h.value){m.value=!0;try{await v.delete(route("admin.trucks.destroy",h.value.id),{preserveScroll:!0}),y(),v.reload()}catch{y(),alert("Failed to delete truck. Please try again.")}}},Q=()=>v.get(route("admin.trucks.index"));return se([g,b,k,f],()=>{v.get(route("admin.trucks.archived"),{search:g.value,make:b.value,sort_field:k.value,sort_direction:f.value,page:1},{preserveState:!0,replace:!0})},{deep:!0}),(a,e)=>(o(),$(X,null,{header:l(()=>[s("div",ne,[e[3]||(e[3]=s("h2",{class:"text-xl font-semibold leading-tight text-gray-800"},"Archived Trucks",-1)),s("div",ie,[n(D,{onClick:Q},{default:l(()=>e[2]||(e[2]=[d("View Active Trucks")])),_:1})])])]),default:l(()=>{var C;return[s("div",de,[r.status||r.success||r.error?(o(),i("div",ue,[r.status?(o(),i("div",ce,u(r.status),1)):_("",!0),r.success?(o(),i("div",me,u(r.success),1)):_("",!0),r.error?(o(),i("div",ve,u(r.error),1)):_("",!0)])):_("",!0),s("div",fe,[n(Y,{modelValue:g.value,"onUpdate:modelValue":e[0]||(e[0]=t=>g.value=t),placeholder:"Search archived trucks...",class:"w-full md:w-72"},null,8,["modelValue"]),s("div",pe,[n(Z,{modelValue:b.value,"onUpdate:modelValue":e[1]||(e[1]=t=>b.value=t),options:I.value,"option-value":"value","option-label":"text",placeholder:"All Makes",class:"w-full md:w-48"},null,8,["modelValue","options"])])]),s("div",xe,[s("div",he,[s("div",ke,[n(ee,{columns:E,data:r.trucks.data,"sort-field":k.value,"sort-direction":f.value,onSort:z,class:"w-full"},{license_plate:l(({row:t})=>[s("span",_e,u(t.license_plate||"N/A"),1)]),make:l(({row:t})=>[s("span",ge,u(t.make||"N/A"),1)]),model:l(({row:t})=>[s("span",be,u(t.model||"N/A"),1)]),status:l(({row:t})=>[s("span",{class:F(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full capitalize",U[t.status]])},u(O(t.status)),3)]),archived_at:l(({row:t})=>[d(u(t.archived_at?new Date(t.archived_at).toLocaleDateString():"N/A"),1)]),actions:l(({row:t})=>[s("div",we,[n(D,{onClick:A=>W(t.id)},{default:l(()=>e[4]||(e[4]=[d("View")])),_:2},1032,["onClick"]),n(N,{onClick:A=>q(t)},{default:l(()=>e[5]||(e[5]=[d("Restore")])),_:2},1032,["onClick"]),n(j,{onClick:A=>J(t)},{default:l(()=>e[6]||(e[6]=[d("Delete")])),_:2},1032,["onClick"])])]),_:1},8,["data","sort-field","sort-direction"]),((C=r.trucks.links)==null?void 0:C.length)>3?(o(),i("div",ye,[s("div",Ce,[(o(!0),i(B,null,le(r.trucks.links,(t,A)=>(o(),i(B,{key:A},[t.url?(o(),$(ae(oe),{key:1,class:F(["mr-1 mb-1 px-4 py-3 text-sm leading-4 border rounded hover:bg-white focus:border-indigo-500 focus:text-indigo-500",{"bg-blue-700 text-white":t.active}]),href:t.url,innerHTML:t.label},null,8,["class","href","innerHTML"])):(o(),i("div",{key:0,class:"mr-1 mb-1 px-4 py-3 text-sm leading-4 text-gray-400 border rounded",innerHTML:t.label},null,8,Ae))],64))),128))])])):_("",!0)])])])]),n(P,{show:M.value,onClose:w},{default:l(()=>{var t;return[s("div",De,[e[10]||(e[10]=s("h2",{class:"text-lg font-medium text-gray-900"},"Restore Truck?",-1)),s("p",Me,[e[7]||(e[7]=d(" Are you sure you want to restore ")),s("strong",null,u((t=x.value)==null?void 0:t.license_plate),1),e[8]||(e[8]=d("? "))]),s("div",Se,[n(D,{onClick:w},{default:l(()=>e[9]||(e[9]=[d("Cancel")])),_:1}),n(N,{onClick:G,disabled:m.value},{default:l(()=>[m.value?(o(),i("span",Te,"Restoring...")):(o(),i("span",Re,"Restore"))]),_:1},8,["disabled"])])])]}),_:1},8,["show"]),n(P,{show:S.value,onClose:y},{default:l(()=>{var t;return[s("div",Ve,[e[14]||(e[14]=s("h2",{class:"text-lg font-medium text-gray-900"},"Permanently Delete Truck?",-1)),s("p",Le,[e[11]||(e[11]=d(" Are you sure you want to permanently delete ")),s("strong",null,u((t=h.value)==null?void 0:t.license_plate),1),e[12]||(e[12]=d("? This action cannot be undone. "))]),s("div",Ne,[n(D,{onClick:y},{default:l(()=>e[13]||(e[13]=[d("Cancel")])),_:1}),n(j,{onClick:K,disabled:m.value},{default:l(()=>[m.value?(o(),i("span",je,"Deleting...")):(o(),i("span",Pe,"Delete"))]),_:1},8,["disabled"])])])]}),_:1},8,["show"])]}),_:1}))}},Ke=re($e,[["__scopeId","data-v-d89e1cd7"]]);export{Ke as default};
