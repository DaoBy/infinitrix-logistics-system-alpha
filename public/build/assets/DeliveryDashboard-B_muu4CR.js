import{c as m,o,b as e,e as u,t as l,n as _,g as w,h as ae,W as v,d as h,w as n,f as c,a as d,u as p,J as ie,L as le}from"./app-BRlF4EhB.js";import{_ as ne}from"./GuestLayout-DECX7ZmV.js";import{_ as k}from"./PrimaryButton-D8Y0EbxS.js";import{_ as L}from"./SecondaryButton-BSdBhKLO.js";import{_ as de}from"./SearchInput-Bk70t47v.js";import{_ as re}from"./DataTable-C6KofKRH.js";import{P as oe}from"./Pagination-DEiiLFx0.js";import{_ as F}from"./StatusBadge-BdVxzSf5.js";import{r as O}from"./DocumentTextIcon-BKn2oh0P.js";import{r as ce}from"./ClockIcon-BaqXOW6q.js";import{r as ue}from"./CheckCircleIcon-DtzQV5J2.js";import{r as me}from"./TruckIcon-C3nzPWq0.js";import{r as ve}from"./ArrowRightIcon-D9Zl0zKp.js";import"./NavLink-CmY0AIOJ.js";import"./NavBar-DOjypLKH.js";import"./DropdownLink-3d1KvLPo.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./XCircleIcon-D6hhBJtX.js";import"./ExclamationTriangleIcon-FspGL_1_.js";import"./InformationCircleIcon-BHNycXIl.js";function pe(i,b){return o(),m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 18.75a60.07 60.07 0 0 1 15.797 2.101c.727.198 1.453-.342 1.453-1.096V18.75M3.75 4.5v.75A.75.75 0 0 1 3 6h-.75m0 0v-.375c0-.621.504-1.125 1.125-1.125H20.25M2.25 6v9m18-10.5v.75c0 .414.336.75.75.75h.75m-1.5-1.5h.375c.621 0 1.125.504 1.125 1.125v9.75c0 .621-.504 1.125-1.125 1.125h-.375m1.5-1.5H21a.75.75 0 0 0-.75.75v.75m0 0H3.75m0 0h-.375a1.125 1.125 0 0 1-1.125-1.125V15m1.5 1.5v-.75A.75.75 0 0 0 3 15h-.75M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm3 0h.008v.008H18V10.5Zm-12 0h.008v.008H6V10.5Z"})])}const ye={class:"flex items-center"},fe={key:0,class:"w-5 h-5 mr-2 text-blue-800",fill:"currentColor",viewBox:"0 0 20 20"},ge={key:1,class:"w-5 h-5 mr-2 text-green-800",fill:"currentColor",viewBox:"0 0 20 20"},xe={key:2,class:"w-5 h-5 mr-2 text-red-800",fill:"currentColor",viewBox:"0 0 20 20"},he={key:3,class:"w-5 h-5 mr-2 text-yellow-800",fill:"currentColor",viewBox:"0 0 20 20"},P={__name:"Alert",props:{type:{type:String,default:"info",validator:i=>["info","success","danger","warning","neutral"].includes(i)},message:{type:String,required:!0}},setup(i){return(b,r)=>(o(),m("div",{class:_(["p-4 mb-4 rounded",{"bg-blue-100 text-blue-800":i.type==="info","bg-green-100 text-green-800":i.type==="success","bg-red-100 text-red-800":i.type==="danger","bg-yellow-100 text-yellow-800":i.type==="warning","bg-gray-100 text-gray-800":i.type==="neutral"}])},[e("div",ye,[i.type==="info"?(o(),m("svg",fe,r[0]||(r[0]=[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2h-1V9z","clip-rule":"evenodd"},null,-1)]))):u("",!0),i.type==="success"?(o(),m("svg",ge,r[1]||(r[1]=[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):u("",!0),i.type==="danger"?(o(),m("svg",xe,r[2]||(r[2]=[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"},null,-1)]))):u("",!0),i.type==="warning"?(o(),m("svg",he,r[3]||(r[3]=[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"},null,-1)]))):u("",!0),e("span",null,l(i.message),1)])],2))}},_e={class:"flex justify-between items-center w-full px-6 md:px-8"},be={class:"flex gap-2"},we={class:"px-6 sm:px-8"},ke={key:0,class:"mb-6"},Pe={class:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-8"},Se={class:"bg-white overflow-hidden shadow rounded-lg"},Ce={class:"px-4 py-5 sm:p-6"},$e={class:"flex items-center"},Ve={class:"flex-shrink-0 bg-blue-100 rounded-md p-3"},De={class:"ml-5 w-0 flex-1"},je={class:"flex items-baseline"},qe={class:"text-2xl font-semibold text-gray-900"},ze={class:"bg-white overflow-hidden shadow rounded-lg"},Be={class:"px-4 py-5 sm:p-6"},Te={class:"flex items-center"},Me={class:"flex-shrink-0 bg-yellow-100 rounded-md p-3"},Ne={class:"ml-5 w-0 flex-1"},Re={class:"flex items-baseline"},Ae={class:"text-2xl font-semibold text-gray-900"},He={class:"bg-white overflow-hidden shadow rounded-lg"},Ie={class:"px-4 py-5 sm:p-6"},Le={class:"flex items-center"},Fe={class:"flex-shrink-0 bg-green-100 rounded-md p-3"},Oe={class:"ml-5 w-0 flex-1"},Ue={class:"flex items-baseline"},Ze={class:"text-2xl font-semibold text-gray-900"},Ee={class:"bg-white overflow-hidden shadow rounded-lg"},Ge={class:"px-4 py-5 sm:p-6"},We={class:"flex items-center"},Je={class:"flex-shrink-0 bg-purple-100 rounded-md p-3"},Ke={class:"ml-5 w-0 flex-1"},Qe={class:"flex items-baseline"},Xe={class:"text-2xl font-semibold text-gray-900"},Ye={class:"bg-white overflow-hidden shadow rounded-lg"},et={class:"px-4 py-5 sm:p-6"},tt={class:"flex items-center"},st={class:"flex-shrink-0 bg-red-100 rounded-md p-3"},at={class:"ml-5 w-0 flex-1"},it={class:"flex items-baseline"},lt={class:"text-2xl font-semibold text-gray-900"},nt={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},dt={class:"p-6 bg-white border-b border-gray-200"},rt={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3 mb-6"},ot={class:"flex flex-col sm:flex-row items-start sm:items-center space-y-3 sm:space-y-0 sm:space-x-4"},ct={class:"flex items-center space-x-2"},ut={class:"text-sm text-gray-500 bg-gray-50 px-3 py-1 rounded border border-gray-200"},mt={key:0,class:"ml-1"},vt={class:"flex flex-col"},pt={class:"font-medium text-gray-900"},yt={key:0,class:"text-xs text-gray-500"},ft={class:"font-medium text-gray-900"},gt={key:0,class:"text-xs text-gray-500 block"},xt={class:"text-sm"},ht={class:"flex items-center text-gray-600"},_t={class:"font-medium"},bt={class:"font-medium"},wt={class:"text-center"},kt={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},Pt={class:"font-medium text-gray-900"},St={class:"text-sm text-gray-700 capitalize"},Ct={class:"text-sm text-gray-700 capitalize"},$t={class:"text-sm text-gray-500"},Vt={class:"flex space-x-2"},Dt={class:"text-center py-12"},jt={class:"bg-gray-50 rounded-lg p-8 max-w-md mx-auto"},qt={class:"text-gray-500 mb-4"},zt={class:"mt-4"},Yt={__name:"DeliveryDashboard",props:{deliveries:Object,stats:Object,filters:Object,status:String,success:String,error:String},setup(i){var j,q;const b=i,r=w(((j=b.filters)==null?void 0:j.search)||""),f=w(((q=b.filters)==null?void 0:q.status_filter)||"all"),S=w("created_at"),C=w("desc"),U=[{field:"id",header:"Delivery ID",sortable:!0},{field:"receiver",header:"Receiver",sortable:!0},{field:"route",header:"Route",sortable:!1},{field:"packages",header:"Packages",sortable:!0},{field:"total_price",header:"Total Price",sortable:!0},{field:"payment_method",header:"Payment Method",sortable:!0},{field:"payment_type",header:"Payment Type",sortable:!0},{field:"status",header:"Status",sortable:!0},{field:"payment_status",header:"Payment Status",sortable:!0},{field:"created_at",header:"Created",sortable:!0},{field:"actions",header:"Actions",sortable:!1}],Z=s=>({draft:"Draft",pending:"Pending",approved:"Approved",in_transit:"In Transit",delivered:"Delivered",completed:"Completed",rejected:"Rejected"})[s]||s,E=s=>{const t=x(s);return{unpaid:"Payment Required",pending_payment:"Payment Pending",pending_verification:"Verifying Payment",paid:"Payment Received",verified:"Payment Verified",rejected:"Payment Rejected"}[t]||t},G=s=>{const t=x(s);return{unpaid:"red",pending_payment:"yellow",pending_verification:"blue",paid:"green",verified:"green",rejected:"red"}[t]||"gray"},W=s=>s?{cash:"Cash",gcash:"GCash",bank:"Bank Transfer"}[s]||s:"Not set",x=s=>s.payment_status?s.payment_status:s.payment&&s.payment.status?s.payment.status:"unpaid",$=s=>{const t=x(s);return V(s)&&["pending_verification","paid","verified","rejected"].includes(t)},V=s=>s.payment&&s.payment.id?s.payment.id:null,D=s=>{const t=x(s);return["unpaid","pending_payment","rejected"].includes(t)&&s.status==="approved"},J=s=>x(s)==="rejected"?"Resubmit Payment":"Pay Now",K=s=>{v.visit(route("customer.delivery-requests.show",s))},Q=s=>{v.visit(route("customer.delivery-requests.edit",s))},X=s=>{s.payment_status==="rejected"&&s.payment?v.visit(route("customer.payments.resubmit",{delivery:s.id,payment:s.payment.id})):v.visit(route("customer.payments.create",s.id))},Y=s=>{v.visit(route("customer.payments.show",s))},ee=s=>{S.value=s.field,C.value=s.direction},te=s=>{v.get(route("customer.delivery-requests.index"),{page:s,search:r.value,status_filter:f.value},{preserveState:!0,preserveScroll:!0,replace:!0})},se=s=>{if(!s)return"—";const t=new Date(s);return isNaN(t.getTime())?"—":t.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})};return ae([r,f],()=>{v.get(route("customer.delivery-requests.index"),{search:r.value,status_filter:f.value,page:1},{preserveState:!0,replace:!0,preserveScroll:!0})}),(s,t)=>(o(),h(ne,null,{header:n(()=>[e("div",_e,[t[5]||(t[5]=e("div",null,[e("h2",{class:"text-xl font-semibold leading-tight text-gray-800"},"My Deliveries"),e("p",{class:"mt-1 text-sm text-gray-500"}," View all your delivery requests and orders in one place ")],-1)),e("div",be,[d(k,{onClick:t[0]||(t[0]=y=>p(v).visit(s.route("customer.delivery-requests.create")))},{default:n(()=>t[4]||(t[4]=[c(" + New Request ")])),_:1})])])]),default:n(()=>{var y,z,B,T,M,N,R,A,H;return[e("div",we,[i.status||i.success||i.error?(o(),m("div",ke,[i.status?(o(),h(P,{key:0,type:"info"},{default:n(()=>[c(l(i.status),1)]),_:1})):u("",!0),i.success?(o(),h(P,{key:1,type:"success"},{default:n(()=>[c(l(i.success),1)]),_:1})):u("",!0),i.error?(o(),h(P,{key:2,type:"danger"},{default:n(()=>[c(l(i.error),1)]),_:1})):u("",!0)])):u("",!0),e("div",Pe,[e("div",Se,[e("div",Ce,[e("div",$e,[e("div",Ve,[d(p(O),{class:"h-6 w-6 text-blue-600"})]),e("div",De,[e("dl",null,[t[6]||(t[6]=e("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Total",-1)),e("dd",je,[e("div",qe,l(((y=i.stats)==null?void 0:y.total)||0),1)])])])])])]),e("div",ze,[e("div",Be,[e("div",Te,[e("div",Me,[d(p(ce),{class:"h-6 w-6 text-yellow-600"})]),e("div",Ne,[e("dl",null,[t[7]||(t[7]=e("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Pending",-1)),e("dd",Re,[e("div",Ae,l(((z=i.stats)==null?void 0:z.pending)||0),1)])])])])])]),e("div",He,[e("div",Ie,[e("div",Le,[e("div",Fe,[d(p(ue),{class:"h-6 w-6 text-green-600"})]),e("div",Oe,[e("dl",null,[t[8]||(t[8]=e("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Approved",-1)),e("dd",Ue,[e("div",Ze,l(((B=i.stats)==null?void 0:B.approved)||0),1)])])])])])]),e("div",Ee,[e("div",Ge,[e("div",We,[e("div",Je,[d(p(me),{class:"h-6 w-6 text-purple-600"})]),e("div",Ke,[e("dl",null,[t[9]||(t[9]=e("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Completed",-1)),e("dd",Qe,[e("div",Xe,l(((T=i.stats)==null?void 0:T.completed)||0),1)])])])])])]),e("div",Ye,[e("div",et,[e("div",tt,[e("div",st,[d(p(pe),{class:"h-6 w-6 text-red-600"})]),e("div",at,[e("dl",null,[t[10]||(t[10]=e("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Awaiting Payment",-1)),e("dd",it,[e("div",lt,l(((M=i.stats)==null?void 0:M.awaiting_payment)||0),1)])])])])])])]),e("div",nt,[e("div",dt,[e("div",rt,[t[13]||(t[13]=e("div",null,[e("h3",{class:"text-lg font-medium text-gray-900"},"All Deliveries"),e("p",{class:"text-sm text-gray-500 mt-1"}," View all your delivery requests and orders in one place ")],-1)),e("div",ot,[e("div",ct,[t[12]||(t[12]=e("label",{class:"text-sm font-medium text-gray-700"},"Status:",-1)),ie(e("select",{"onUpdate:modelValue":t[1]||(t[1]=a=>f.value=a),class:"border-gray-300 rounded-md shadow-sm focus:border-blue-500 focus:ring-blue-500 text-sm"},t[11]||(t[11]=[e("option",{value:"all"},"All Status",-1),e("option",{value:"pending"},"Pending",-1),e("option",{value:"approved"},"Approved",-1),e("option",{value:"in_transit"},"In Transit",-1),e("option",{value:"delivered"},"Delivered",-1),e("option",{value:"completed"},"Completed",-1),e("option",{value:"rejected"},"Rejected",-1)]),512),[[le,f.value]])]),d(de,{modelValue:r.value,"onUpdate:modelValue":t[2]||(t[2]=a=>r.value=a),placeholder:"Search deliveries...",class:"w-64"},null,8,["modelValue"]),e("div",ut,[c(" 📋 "+l(((R=(N=i.deliveries)==null?void 0:N.data)==null?void 0:R.length)||0)+" of "+l(((A=i.deliveries)==null?void 0:A.total)||0)+" deliveries ",1),i.deliveries&&i.deliveries.last_page>1?(o(),m("span",mt," (Page "+l(i.deliveries.current_page)+" of "+l(i.deliveries.last_page)+") ",1)):u("",!0)])])]),d(re,{columns:U,data:((H=i.deliveries)==null?void 0:H.data)||[],"sort-field":S.value,"sort-direction":C.value,"numeric-fields":["id","total_price","package_count"],onSort:ee,class:"w-full"},{id:n(({row:a})=>[e("div",vt,[e("span",pt,"#"+l(a.id.toString().padStart(6,"0")),1),a.reference_number?(o(),m("span",yt," Ref: "+l(a.reference_number),1)):u("",!0)])]),receiver:n(({row:a})=>[e("div",null,[e("span",ft,l(a.receiver.name),1),a.receiver.company_name?(o(),m("span",gt,l(a.receiver.company_name),1)):u("",!0)])]),route:n(({row:a})=>{var g,I;return[e("div",xt,[e("div",ht,[e("span",_t,l((g=a.pick_up_region)==null?void 0:g.name),1),d(p(ve),{class:"h-4 w-4 mx-2"}),e("span",bt,l((I=a.drop_off_region)==null?void 0:I.name),1)])])]}),packages:n(({row:a})=>[e("div",wt,[e("span",kt,l(a.package_count)+" "+l(a.package_count===1?"package":"packages"),1)])]),total_price:n(({row:a})=>[e("span",Pt," ₱"+l(parseFloat(a.total_price||0).toFixed(2)),1)]),payment_method:n(({row:a})=>[e("span",St,l(a.payment_method||"Not set"),1)]),payment_type:n(({row:a})=>[e("span",Ct,l(W(a.payment_method)),1)]),status:n(({row:a})=>[d(F,{status:a.status},{default:n(()=>[c(l(Z(a.status)),1)]),_:2},1032,["status"])]),payment_status:n(({row:a})=>[d(F,{status:G(a)},{default:n(()=>[c(l(E(a)),1)]),_:2},1032,["status"])]),created_at:n(({row:a})=>[e("span",$t,l(se(a.created_at)),1)]),actions:n(({row:a})=>[e("div",Vt,[d(L,{onClick:g=>K(a.id),disabled:!1,class:_(["text-xs py-1 px-2",{"opacity-50 cursor-not-allowed":!1}])},{default:n(()=>t[14]||(t[14]=[c(" View ")])),_:2},1032,["onClick"]),d(k,{onClick:g=>Q(a.id),disabled:a.status!=="pending",class:_(["text-xs py-1 px-2",{"opacity-50 cursor-not-allowed":a.status!=="pending"}])},{default:n(()=>t[15]||(t[15]=[c(" Edit ")])),_:2},1032,["onClick","disabled","class"]),d(k,{onClick:g=>X(a),disabled:!D(a),class:_(["text-xs py-1 px-2",{"opacity-50 cursor-not-allowed":!D(a)}])},{default:n(()=>[c(l(J(a)),1)]),_:2},1032,["onClick","disabled","class"]),d(L,{onClick:g=>Y(V(a)),disabled:!$(a),class:_(["text-xs py-1 px-2",{"opacity-50 cursor-not-allowed":!$(a)}])},{default:n(()=>t[16]||(t[16]=[c(" View Payment ")])),_:2},1032,["onClick","disabled","class"])])]),empty:n(()=>[e("div",Dt,[e("div",jt,[d(p(O),{class:"h-12 w-12 text-gray-400 mx-auto mb-4"}),t[18]||(t[18]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"No deliveries found",-1)),e("p",qt,l(r.value||f.value!=="all"?"Try adjusting your search or filters":"Get started by creating your first delivery request"),1),d(k,{onClick:t[3]||(t[3]=a=>p(v).visit(s.route("customer.delivery-requests.create")))},{default:n(()=>t[17]||(t[17]=[c(" Create Delivery Request ")])),_:1})])])]),_:1},8,["data","sort-field","sort-direction"]),e("div",zt,[i.deliveries&&i.deliveries.last_page>1?(o(),h(oe,{key:0,pagination:{current_page:i.deliveries.current_page,last_page:i.deliveries.last_page,total:i.deliveries.total,from:i.deliveries.from,to:i.deliveries.to},onPageChanged:te},null,8,["pagination"])):u("",!0)])])])])]}),_:1}))}};export{Yt as default};
