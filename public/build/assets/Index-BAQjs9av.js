import{E as q}from"./EmployeeLayout-DIT5z9wE.js";import{_ as w}from"./PrimaryButton-C_K9q06y.js";import{_ as ee}from"./SecondaryButton-BolX5WPO.js";import{_ as te}from"./SearchInput-BlX_e4xM.js";import{S as ae}from"./SelectInput-CqVYJRU0.js";import{g as k,h as re,W as y,i as _,d as C,o as d,w as c,b as e,c as n,e as x,F as J,r as K,t as l,n as W,f as u,a as m}from"./app-xrBi3RtB.js";import{l as se}from"./lodash-Dna8ZzNw.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./NavLink-BuzuRvoY.js";import"./DangerButton-C4ke1hY1.js";const le={class:"flex justify-between items-center px-6"},de={class:"flex space-x-2"},ie={class:"px-6 py-4 space-y-6"},ne={class:"bg-white dark:bg-gray-800 shadow-sm rounded-lg overflow-hidden border border-gray-200 dark:border-gray-700"},oe={class:"overflow-x-auto"},pe={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},ce={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},ge={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-gray-100"},ye={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300"},xe={class:"px-6 py-4 whitespace-nowrap"},ue={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300"},me={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},be={class:"flex justify-end space-x-2"},ve={key:0},fe={class:"bg-white dark:bg-gray-800 px-4 py-3 flex items-center justify-center border-t border-gray-200 dark:border-gray-700 sm:px-6"},we={class:"flex items-center space-x-2"},ke=["disabled"],he=["disabled"],_e={class:"bg-white dark:bg-gray-800 shadow-sm rounded-lg overflow-hidden border border-gray-200 dark:border-gray-700"},Ce={class:"px-4 py-5 sm:px-6 border-b border-gray-200 dark:border-gray-700 flex flex-col md:flex-row md:items-center md:justify-between gap-4"},We={class:"flex items-center gap-2"},$e={class:"overflow-x-auto"},Pe={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},Ve={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},Ne={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-gray-100"},Se={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300"},ze={class:"px-6 py-4 whitespace-nowrap"},Ae={key:0},He={class:"px-6 py-4 whitespace-nowrap"},De={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},je={class:"flex justify-end space-x-2"},Be={key:0},Ie={key:1},Fe={key:0},Me={class:"bg-white dark:bg-gray-800 px-4 py-3 flex items-center justify-center border-t border-gray-200 dark:border-gray-700 sm:px-6"},Ee={class:"flex items-center space-x-2"},Te=["disabled"],Ge=["disabled"],qe={__name:"Index",props:{waybills:{type:Object,required:!0,default:()=>({data:[],links:[],current_page:1,last_page:1})},pendingWaybills:{type:Object,required:!0,default:()=>({data:[],links:[],current_page:1,last_page:1})},filters:{type:Object,default:()=>({})}},setup(s){const o=s,h=k(o.filters.search),b=k(""),g=k("desc"),v=k("created_at");re(h,se.debounce(r=>{y.get(route("waybills.index"),{search:r},{preserveState:!0,replace:!0})},300));const $=_(()=>{let r=o.waybills.data||[];return b.value&&(r=r.filter(t=>{var a;return((a=t.delivery_request)==null?void 0:a.payment_type)===b.value})),r=r.slice().sort((t,a)=>{const i=t[v.value]||"",p=a[v.value]||"";return i<p?g.value==="asc"?-1:1:i>p?g.value==="asc"?1:-1:0}),r});function Q(r){v.value===r?g.value=g.value==="asc"?"desc":"asc":(v.value=r,g.value="asc")}const R=r=>{const t="px-2 inline-flex text-xs leading-5 font-semibold rounded-full";switch(r){case"dispatched":return`${t} bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200`;case"in_transit":return`${t} bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200`;case"delivered":return`${t} bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200`;case"completed":return`${t} bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200`;case"cancelled":return`${t} bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200`;default:return`${t} bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300`}},P=r=>{var a;const t="px-2 inline-flex text-xs leading-5 font-semibold rounded-full";return r?r.payment_type==="prepaid"?r.is_paid?`${t} bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200`:`${t} bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200`:((a=r.delivery_order)==null?void 0:a.status)==="completed"?`${t} bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200`:`${t} bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200`:`${t} bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300`},V=()=>{y.get(route("waybills.index"),{},{preserveState:!0,replace:!0,only:["waybills","pendingWaybills"]})},X=r=>{y.visit(route("waybills.show",r.id))},Y=r=>{var a,i;const t=((i=(a=r.delivery_request)==null?void 0:a.delivery_order)==null?void 0:i.status)==="completed";window.open(route("waybills.preview",{id:r.id,final:t}),"_blank")},Z=r=>{y.post(route("waybills.generate",{deliveryRequest:r}),{},{preserveScroll:!0,onSuccess:()=>{V()}})};function N(r){r>=1&&r<=o.waybills.last_page&&y.get(route("waybills.index"),{...o.filters,page:r},{preserveState:!0,replace:!0})}function S(r){r>=1&&r<=o.pendingWaybills.last_page&&y.get(route("waybills.index"),{...o.filters,pending_page:r},{preserveState:!0,replace:!0})}const z=_(()=>o.pendingWaybills.data?o.pendingWaybills.data.slice(0,5):[]),A=_(()=>$.value?$.value.slice(0,5):[]);return(r,t)=>(d(),C(q,null,{header:c(()=>[e("div",le,[t[8]||(t[8]=e("h2",{class:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200"}," Waybills Management ",-1)),e("div",de,[m(te,{modelValue:h.value,"onUpdate:modelValue":t[0]||(t[0]=a=>h.value=a),placeholder:"Search waybills..."},null,8,["modelValue"]),m(w,{onClick:V,class:"inline-flex items-center"},{default:c(()=>t[7]||(t[7]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z","clip-rule":"evenodd"})],-1),u(" Refresh ")])),_:1})])])]),default:c(()=>[e("div",ie,[e("div",ne,[t[13]||(t[13]=e("div",{class:"px-4 py-5 sm:px-6 border-b border-gray-200 dark:border-gray-700"},[e("h3",{class:"text-lg font-medium leading-6 text-gray-900 dark:text-gray-100"}," Pending Waybill Generation "),e("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"}," Delivery requests with dispatched orders but no waybill yet ")],-1)),e("div",oe,[e("table",pe,[t[12]||(t[12]=e("thead",{class:"bg-gray-50 dark:bg-gray-700"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Order # "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Customer "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Payment "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Destination "),e("th",{scope:"col",class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Actions ")])],-1)),e("tbody",ce,[(d(!0),n(J,null,K(z.value,a=>{var i;return d(),n("tr",{key:a.id+"-row"},[e("td",ge," DR-"+l(a.id.toString().padStart(6,"0")),1),e("td",ye,l(a.sender&&(a.sender.name||a.sender.company_name||a.sender['"name"'])||a.receiver&&(a.receiver.name||a.receiver.company_name||a.receiver['"name"'])||"N/A"),1),e("td",xe,[e("span",{class:W(P(a))},l(a.payment_type.toUpperCase())+" - "+l(a.is_paid?"PAID":"PENDING"),3)]),e("td",ue,l(((i=a.drop_off_region)==null?void 0:i.name)||"N/A"),1),e("td",me,[e("div",be,[a.payment_type==="prepaid"&&a.is_paid&&a.waybill&&a.waybill.id?(d(),C(w,{key:0,onClick:p=>r.printInitialWaybill(a),class:"inline-flex items-center"},{default:c(()=>t[9]||(t[9]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M5 4v3H4a2 2 0 00-2 2v3a2 2 0 002 2h1v2a2 2 0 002 2h6a2 2 0 002-2v-2h1a2 2 0 002-2V9a2 2 0 00-2-2h-1V4a2 2 0 00-2-2H7a2 2 0 00-2 2zm8 0H7v3h6V4zm0 8H7v4h6v-4z","clip-rule":"evenodd"})],-1),u(" Print Initial ")])),_:2},1032,["onClick"])):x("",!0),a.waybill?x("",!0):(d(),C(w,{key:1,onClick:p=>Z(a.id),class:"inline-flex items-center"},{default:c(()=>t[10]||(t[10]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z","clip-rule":"evenodd"})],-1),u(" Generate ")])),_:2},1032,["onClick"]))])])])}),128)),z.value.length===0?(d(),n("tr",ve,t[11]||(t[11]=[e("td",{colspan:"6",class:"px-6 py-4 text-center text-sm text-gray-500 dark:text-gray-400"}," No pending waybills found ",-1)]))):x("",!0)])])]),e("div",fe,[e("div",we,[e("button",{onClick:t[1]||(t[1]=a=>S(s.pendingWaybills.current_page-1)),disabled:s.pendingWaybills.current_page<=1,class:"px-3 py-1 rounded border text-sm"},"Previous",8,ke),e("span",null,"Page "+l(s.pendingWaybills.current_page)+" of "+l(s.pendingWaybills.last_page),1),e("button",{onClick:t[2]||(t[2]=a=>S(s.pendingWaybills.current_page+1)),disabled:s.pendingWaybills.current_page>=s.pendingWaybills.last_page,class:"px-3 py-1 rounded border text-sm"},"Next",8,he)])])]),e("div",_e,[e("div",Ce,[t[14]||(t[14]=e("div",null,[e("h3",{class:"text-lg font-medium leading-6 text-gray-900 dark:text-gray-100"}," Generated Waybills "),e("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"}," Delivery requests with generated waybills ")],-1)),e("div",We,[m(ae,{modelValue:b.value,"onUpdate:modelValue":t[3]||(t[3]=a=>b.value=a),options:[{value:"",label:"All Payment Types"},{value:"prepaid",label:"Prepaid"},{value:"postpaid",label:"Postpaid"}],placeholder:"Filter by Payment Type",class:"w-48"},null,8,["modelValue"]),e("button",{onClick:t[4]||(t[4]=a=>Q("created_at")),class:"ml-2 px-2 py-1 text-xs rounded bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-200"}," Sort: "+l(g.value==="asc"?"Oldest":"Newest"),1)])]),e("div",$e,[e("table",Pe,[t[18]||(t[18]=e("thead",{class:"bg-gray-50 dark:bg-gray-700"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Waybill # "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Customer "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Payment "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Status "),e("th",{scope:"col",class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Actions ")])],-1)),e("tbody",Ve,[(d(!0),n(J,null,K(A.value,a=>{var i,p,H,D,j,B,I,F,M,E,T,G,O,U;return d(),n("tr",{key:a.id},[e("td",Ne,l(a.waybill_number||"N/A"),1),e("td",Se,l(((p=(i=a.delivery_request)==null?void 0:i.sender)==null?void 0:p.name)||((D=(H=a.delivery_request)==null?void 0:H.sender)==null?void 0:D.company_name)||((B=(j=a.delivery_request)==null?void 0:j.receiver)==null?void 0:B.name)||((F=(I=a.delivery_request)==null?void 0:I.receiver)==null?void 0:F.company_name)||"N/A"),1),e("td",ze,[e("span",{class:W(P(a.delivery_request))},[u(l(((E=(M=a.delivery_request)==null?void 0:M.payment_type)==null?void 0:E.toUpperCase())||"N/A")+" ",1),a.delivery_request?(d(),n("span",Ae," - "+l(a.delivery_request.is_paid?"PAID":"PENDING"),1)):x("",!0)],2)]),e("td",He,[e("span",{class:W(R((G=(T=a.delivery_request)==null?void 0:T.delivery_order)==null?void 0:G.status))},l(((U=(O=a.delivery_request)==null?void 0:O.delivery_order)==null?void 0:U.status)||"N/A"),3)]),e("td",De,[e("div",je,[m(w,{onClick:f=>Y(a),class:"inline-flex items-center"},{default:c(()=>{var f,L;return[t[15]||(t[15]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M5 4v3H4a2 2 0 00-2 2v3a2 2 0 002 2h1v2a2 2 0 002 2h6a2 2 0 002-2v-2h1a2 2 0 002-2V9a2 2 0 00-2-2h-1V4a2 2 0 00-2-2H7a2 2 0 00-2 2zm8 0H7v3h6V4zm0 8H7v4h6v-4z","clip-rule":"evenodd"})],-1)),((L=(f=a.delivery_request)==null?void 0:f.delivery_order)==null?void 0:L.status)==="completed"?(d(),n("span",Be,"Print Final")):(d(),n("span",Ie,"Print Initial"))]}),_:2},1032,["onClick"]),m(ee,{onClick:f=>X(a),class:"inline-flex items-center"},{default:c(()=>t[16]||(t[16]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),e("path",{"fill-rule":"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z","clip-rule":"evenodd"})],-1),u(" View ")])),_:2},1032,["onClick"])])])])}),128)),A.value.length===0?(d(),n("tr",Fe,t[17]||(t[17]=[e("td",{colspan:"6",class:"px-6 py-4 text-center text-sm text-gray-500 dark:text-gray-400"}," No waybills found ",-1)]))):x("",!0)])])]),e("div",Me,[e("div",Ee,[e("button",{onClick:t[5]||(t[5]=a=>N(s.waybills.current_page-1)),disabled:s.waybills.current_page<=1,class:"px-3 py-1 rounded border text-sm"},"Previous",8,Te),e("span",null,"Page "+l(s.waybills.current_page)+" of "+l(s.waybills.last_page),1),e("button",{onClick:t[6]||(t[6]=a=>N(s.waybills.current_page+1)),disabled:s.waybills.current_page>=s.waybills.last_page,class:"px-3 py-1 rounded border text-sm"},"Next",8,Ge)])])])])]),_:1}))}};export{qe as default};
