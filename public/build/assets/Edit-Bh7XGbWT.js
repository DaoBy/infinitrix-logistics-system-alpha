import{C as J,i as c,d as X,o as d,w as v,b as e,t as r,f as m,c as n,e as x,s as Y,v as f,u as l,x as j,L as Z,a1 as S,F as h,r as _,n as A,a as w}from"./app-Xu1-QTPS.js";import{E as ee}from"./EmployeeLayout-HD3iRf9t.js";import{_ as te}from"./PrimaryButton-CQvisOOW.js";import{_ as z}from"./SecondaryButton-B4_LijSy.js";import{L as se}from"./LoadingSpinner-C6mwMO_t.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./NavLink-Dma88ZBl.js";import"./DangerButton-B9GvHwCg.js";const re={class:"flex justify-between items-center px-4 sm:px-6"},ae={class:"min-w-0 flex-1"},de={class:"text-lg sm:text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200 truncate"},ne={class:"mt-1 text-sm text-gray-600 dark:text-gray-400 hidden sm:block"},oe={class:"px-4 md:px-6 py-4 max-w-7xl mx-auto"},ie={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},le={class:"lg:col-span-2 space-y-6"},ue={class:"bg-white dark:bg-gray-800 shadow-sm rounded-lg border border-gray-200 dark:border-gray-700"},ce={class:"flex flex-col md:flex-row md:items-center md:justify-between p-4 bg-indigo-50 dark:bg-indigo-900/20 border-b border-indigo-200 dark:border-indigo-800"},ge={class:"flex-1"},me={class:"flex flex-wrap items-center gap-2 mb-2"},xe={class:"text-lg font-bold text-indigo-600 dark:text-indigo-400 tracking-wide"},ye={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-800 dark:text-yellow-100"},be={class:"flex flex-wrap items-center gap-4 text-xs text-gray-600 dark:text-gray-300"},fe={class:"mt-3 md:mt-0"},ke={class:"text-2xl font-bold text-indigo-900 dark:text-indigo-100 text-center md:text-right"},pe={class:"p-4 md:p-6"},ve={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6"},he={class:"bg-gray-50 dark:bg-gray-700/50 p-3 rounded-lg"},_e={class:"space-y-2 text-sm"},we={class:"flex justify-between"},je={class:"capitalize font-medium text-gray-900 dark:text-gray-100"},Ae={class:"flex justify-between"},Me={class:"font-medium text-gray-900 dark:text-gray-100"},Ce={class:"flex justify-between"},Pe={class:"font-medium text-gray-900 dark:text-gray-100"},Ve={class:"bg-gray-50 dark:bg-gray-700/50 p-3 rounded-lg"},De={class:"space-y-2 text-sm"},Ne={class:"flex justify-between"},Re={class:"font-medium text-gray-900 dark:text-gray-100"},Be={class:"flex justify-between"},Le={class:"font-medium text-gray-900 dark:text-gray-100"},Fe={class:"flex justify-between"},Ie={class:"font-medium text-gray-500 dark:text-gray-400 text-xs"},Ue={class:"flex justify-between border-t border-gray-200 dark:border-gray-600 pt-2"},$e={class:"text-gray-600 dark:text-gray-400 font-semibold"},Se={class:"font-bold text-green-600 dark:text-green-400"},ze={key:0,class:"flex justify-between"},Ee={class:"font-medium text-blue-600 dark:text-blue-400"},Oe={class:"bg-white dark:bg-gray-800 shadow-sm rounded-lg border border-gray-200 dark:border-gray-700"},Te={class:"p-4 bg-blue-50 dark:bg-blue-900/20 border-b border-blue-200 dark:border-blue-800"},qe={class:"font-medium text-blue-900 dark:text-blue-100 flex items-center gap-2"},He={class:"p-4 md:p-6"},We={class:"mb-6"},Ke={for:"refund_amount",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},Qe={class:"mt-1 relative rounded-md shadow-sm"},Ge=["max"],Je={class:"mt-1 text-sm text-gray-500 dark:text-gray-400"},Xe={class:"text-xs text-gray-400"},Ye={key:0,class:"mt-1 text-sm text-blue-600 dark:text-blue-400"},Ze={key:1,class:"mt-1 text-sm text-red-600 dark:text-red-400"},et={class:"mb-6"},tt={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},st={class:"mb-6"},rt=["placeholder"],at={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},dt={class:"mb-6"},nt=["placeholder"],ot={class:"mb-6"},it={class:"space-y-2"},lt={class:"flex items-center"},ut={class:"flex items-center"},ct={for:"process",class:"ml-3 block text-sm font-medium text-gray-700 dark:text-gray-300"},gt={key:0,class:"mt-1 text-sm text-red-600 dark:text-red-400"},mt={class:"lg:col-span-1 space-y-6"},xt={class:"bg-white dark:bg-gray-800 shadow-sm rounded-lg border border-gray-200 dark:border-gray-700"},yt={class:"p-4"},bt={class:"mb-4"},ft={key:0,class:"grid grid-cols-2 gap-2"},kt=["src","alt","onClick"],pt={key:1,class:"text-center py-4 bg-gray-50 dark:bg-gray-700/50 rounded"},vt={key:0,class:"grid grid-cols-2 gap-2"},ht=["src","alt","onClick"],_t={key:1,class:"text-center py-4 bg-gray-50 dark:bg-gray-700/50 rounded"},wt={key:0,class:"mt-4 p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded border border-yellow-200 dark:border-yellow-800"},jt={class:"text-xs text-yellow-700 dark:text-yellow-300 mb-2"},At={class:"text-xs text-yellow-600 dark:text-yellow-400"},Mt={key:0,class:"bg-white dark:bg-gray-800 shadow-sm rounded-lg border border-gray-200 dark:border-gray-700"},Ct={class:"p-4 bg-gray-50 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-700"},Pt={class:"font-medium text-gray-900 dark:text-gray-100 flex items-center gap-2"},Vt={class:"p-4"},Dt={class:"space-y-3"},Nt={class:"flex justify-between items-start mb-2"},Rt={class:"text-sm font-medium text-gray-900 dark:text-gray-100 truncate"},Bt={class:"text-xs text-gray-600 dark:text-gray-400 space-y-1"},Lt={class:"flex justify-between"},Ft={class:"font-medium"},It={class:"flex justify-between"},Ut={key:0,class:"text-red-600 dark:text-red-400 text-xs mt-1"},$t={key:1,class:"bg-white dark:bg-gray-800 shadow-sm rounded-lg border border-gray-200 dark:border-gray-700"},St={class:"p-4 bg-gray-50 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-700"},zt={class:"font-medium text-gray-900 dark:text-gray-100 flex items-center gap-2"},Et={class:"p-4"},Ot={class:"space-y-2"},Tt={class:"flex justify-between"},qt={class:"font-medium"},Ht={class:"flex justify-between text-xs"},Wt={key:0,class:"text-red-600 dark:text-red-400"},Kt={key:1,class:"text-green-600 dark:text-green-400"},Qt={class:"bg-white dark:bg-gray-800 shadow-sm rounded-lg border border-gray-200 dark:border-gray-700"},Gt={class:"p-4"},Jt={class:"space-y-2"},Xt={key:0},Yt={key:1},os={__name:"Edit",props:{refund:Object,maxRefundable:Number,reasonOptions:Object},setup(o){const u=o,i=J({refund_amount:u.refund.refund_amount,reason:u.refund.reason,description:u.refund.description,notes:u.refund.notes,action:"process"}),M=c(()=>u.refund.original_amount||0),k=c(()=>{var s;return(s=u.refund.delivery_request)!=null&&s.packages?u.refund.delivery_request.packages.map(t=>{var g;return{...t,isAffected:((g=u.refund.refunded_packages)==null?void 0:g.includes(t.id))||!1}}):[]}),y=c(()=>k.value.filter(s=>s.isAffected)),C=c(()=>y.value.reduce((s,t)=>s+(parseFloat(t.value)||0),0)),E=c(()=>k.value.reduce((s,t)=>s+(parseFloat(t.value)||0),0)),P=c(()=>{if(u.refund.type==="adjustment"){const s=Number(i.refund_amount)||0;return Math.max(0,u.refund.original_amount-s)}return 0}),V=c(()=>{const s=[];return y.value.forEach(t=>{t.photo_url&&Array.isArray(t.photo_url)&&s.push(...t.photo_url)}),s.slice(0,4)}),D=c(()=>{const s=[];return y.value.forEach(t=>{if(t.incident_evidence&&Array.isArray(t.incident_evidence)){const g=t.incident_evidence.map(b=>b.startsWith("http")?b:`/storage/${b}`);s.push(...g)}}),s.slice(0,4)}),O=c(()=>y.value.some(s=>s.incident_description||s.incident_reported_at)),T=c(()=>{const s=y.value.find(t=>t.incident_description);return(s==null?void 0:s.incident_description)||"No incident description provided"}),q=c(()=>{const s=y.value.find(t=>t.incident_reported_at);return s==null?void 0:s.incident_reported_at});function H(){}function N(){i.put(route("refunds.update",{refund:u.refund.id}))}function R(s){window.open(s,"_blank")}function W(s){return s?new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"}function K(s){return{damaged_in_transit:"bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-100",lost_in_transit:"bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-100",delivered:"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100",completed:"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100"}[s]||"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-100"}function Q(s){return{damaged_in_transit:"Damaged in Transit",lost_in_transit:"Lost in Transit",delivered:"Delivered",completed:"Completed",in_transit:"In Transit",pending:"Pending"}[s]||s.replace(/_/g," ").replace(/\b\w/g,g=>g.toUpperCase())}return(s,t)=>(d(),X(ee,null,{header:v(()=>[e("div",re,[e("div",ae,[e("h2",de,r(o.refund.type==="adjustment"?"Process Invoice Adjustment":"Process Refund"),1),e("p",ne,r(o.refund.type==="adjustment"?"Negotiate and apply invoice adjustment.":"Negotiate and process refund with customer."),1)]),w(z,{onClick:t[0]||(t[0]=g=>s.$inertia.visit(s.route("refunds.index"))),class:"inline-flex items-center text-sm whitespace-nowrap shrink-0 ml-2"},{default:v(()=>t[8]||(t[8]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1 sm:mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),e("span",{class:"hidden sm:inline"},"Back to Refunds",-1),e("span",{class:"sm:hidden"},"Back",-1)])),_:1})])]),default:v(()=>{var g,b,B,L,F,I,U,$;return[e("div",oe,[e("div",ie,[e("div",le,[e("div",ue,[e("div",ce,[e("div",ge,[e("div",me,[t[9]||(t[9]=e("span",{class:"inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-indigo-100 text-indigo-800 dark:bg-indigo-800 dark:text-indigo-100 border border-indigo-200 dark:border-indigo-700"}," Reference# ",-1)),e("span",xe,r((g=o.refund.delivery_request)==null?void 0:g.reference_number),1),e("span",ye,r(o.refund.type==="adjustment"?"Pending Adjustment":"Pending Refund"),1)]),e("div",be,[e("span",null,"Type: "+r(o.refund.type_label),1),e("span",null,"Sender: "+r((B=(b=o.refund.delivery_request)==null?void 0:b.sender)==null?void 0:B.name),1)])]),e("div",fe,[e("div",ke," ₱"+r(Number(o.refund.original_amount).toFixed(2)),1),t[10]||(t[10]=e("div",{class:"text-xs text-gray-600 dark:text-gray-300 text-center md:text-right"}," Original Amount ",-1))])]),e("div",pe,[e("div",ve,[e("div",he,[t[14]||(t[14]=e("h4",{class:"text-sm font-medium text-gray-900 dark:text-gray-100 mb-3 flex items-center gap-2"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]),m(" Delivery Information ")],-1)),e("div",_e,[e("div",we,[t[11]||(t[11]=e("span",{class:"text-gray-600 dark:text-gray-400"},"Payment Type:",-1)),e("span",je,r((L=o.refund.delivery_request)==null?void 0:L.payment_type),1)]),e("div",Ae,[t[12]||(t[12]=e("span",{class:"text-gray-600 dark:text-gray-400"},"Sender:",-1)),e("span",Me,r((I=(F=o.refund.delivery_request)==null?void 0:F.sender)==null?void 0:I.name),1)]),e("div",Ce,[t[13]||(t[13]=e("span",{class:"text-gray-600 dark:text-gray-400"},"Receiver:",-1)),e("span",Pe,r(($=(U=o.refund.delivery_request)==null?void 0:U.receiver)==null?void 0:$.name),1)])])]),e("div",Ve,[t[19]||(t[19]=e("h4",{class:"text-sm font-medium text-gray-900 dark:text-gray-100 mb-3 flex items-center gap-2"},[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})]),m(" Financial Details ")],-1)),e("div",De,[e("div",Ne,[t[15]||(t[15]=e("span",{class:"text-gray-600 dark:text-gray-400"},"Delivery Fee:",-1)),e("span",Re,"₱"+r(M.value),1)]),e("div",Be,[t[16]||(t[16]=e("span",{class:"text-gray-600 dark:text-gray-400"},"Affected Package Values:",-1)),e("span",Le,"₱"+r(C.value.toFixed(2)),1)]),e("div",Fe,[t[17]||(t[17]=e("span",{class:"text-gray-600 dark:text-gray-400"},"Total Package Values:",-1)),e("span",Ie,"₱"+r(E.value.toFixed(2)),1)]),e("div",Ue,[e("span",$e,"Max "+r(o.refund.type==="adjustment"?"Adjustable":"Refundable")+":",1),e("span",Se,"₱"+r(o.maxRefundable),1)]),o.refund.type==="adjustment"?(d(),n("div",ze,[t[18]||(t[18]=e("span",{class:"text-gray-600 dark:text-gray-400"},"New Amount Due:",-1)),e("span",Ee,"₱"+r(P.value),1)])):x("",!0)])])])])]),e("form",{onSubmit:Y(N,["prevent"])},[e("div",Oe,[e("div",Te,[e("h3",qe,[t[20]||(t[20]=e("svg",{class:"w-5 h-5 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})],-1)),m(" "+r(o.refund.type==="adjustment"?"Adjustment Negotiation":"Refund Negotiation"),1)])]),e("div",He,[e("div",We,[e("label",Ke,r(o.refund.type==="adjustment"?"Adjustment Amount *":"Refund Amount *"),1),e("div",Qe,[t[21]||(t[21]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("span",{class:"text-gray-500 sm:text-sm"},"₱")],-1)),f(e("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>l(i).refund_amount=a),type:"number",step:"0.01",min:"0",max:o.maxRefundable,id:"refund_amount",class:"block w-full pl-7 pr-12 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white sm:text-sm",placeholder:"0.00",onInput:H},null,40,Ge),[[j,l(i).refund_amount]])]),e("p",Je,[m(" Maximum "+r(o.refund.type==="adjustment"?"adjustable":"refundable")+" amount: ₱"+r(o.maxRefundable)+" ",1),e("span",Xe,"(Delivery Fee: ₱"+r(M.value)+" + Affected Packages: ₱"+r(C.value.toFixed(2))+")",1)]),o.refund.type==="adjustment"?(d(),n("p",Ye," New amount due: ₱"+r(P.value),1)):x("",!0),l(i).errors.refund_amount?(d(),n("p",Ze,r(l(i).errors.refund_amount),1)):x("",!0)]),e("div",et,[t[23]||(t[23]=e("label",{for:"reason",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Reason * ",-1)),f(e("select",{"onUpdate:modelValue":t[2]||(t[2]=a=>l(i).reason=a),id:"reason",class:"mt-1 block w-full border border-gray-300 dark:border-gray-600 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white sm:text-sm"},t[22]||(t[22]=[e("option",{value:""},"Select a reason",-1),e("option",{value:"damaged"},"Package Damaged",-1),e("option",{value:"lost"},"Package Lost",-1),e("option",{value:"other"},"Other (specify in description)",-1)]),512),[[Z,l(i).reason]]),l(i).errors.reason?(d(),n("p",tt,r(l(i).errors.reason),1)):x("",!0)]),e("div",st,[t[24]||(t[24]=e("label",{for:"description",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Description * ",-1)),f(e("textarea",{"onUpdate:modelValue":t[3]||(t[3]=a=>l(i).description=a),id:"description",rows:"3",class:"mt-1 block w-full border border-gray-300 dark:border-gray-600 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white sm:text-sm",placeholder:o.refund.type==="adjustment"?"Describe the adjustment reason and negotiation details...":"Describe the refund reason and negotiation details..."},null,8,rt),[[j,l(i).description]]),l(i).errors.description?(d(),n("p",at,r(l(i).errors.description),1)):x("",!0)]),e("div",dt,[t[25]||(t[25]=e("label",{for:"notes",class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," Internal Notes ",-1)),f(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=a=>l(i).notes=a),id:"notes",rows:"2",class:"mt-1 block w-full border border-gray-300 dark:border-gray-600 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white sm:text-sm",placeholder:o.refund.type==="adjustment"?"Internal notes about the adjustment...":"Internal notes about the negotiation..."},null,8,nt),[[j,l(i).notes]])]),e("div",ot,[t[27]||(t[27]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3"}," Action ",-1)),e("div",it,[e("div",lt,[f(e("input",{"onUpdate:modelValue":t[5]||(t[5]=a=>l(i).action=a),id:"update_pending",value:"update_pending",type:"radio",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 dark:border-gray-600 dark:bg-gray-700"},null,512),[[S,l(i).action]]),t[26]||(t[26]=e("label",{for:"update_pending",class:"ml-3 block text-sm font-medium text-gray-700 dark:text-gray-300"}," Update negotiation details (keep as pending) ",-1))]),e("div",ut,[f(e("input",{"onUpdate:modelValue":t[6]||(t[6]=a=>l(i).action=a),id:"process",value:"process",type:"radio",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 dark:border-gray-600 dark:bg-gray-700"},null,512),[[S,l(i).action]]),e("label",ct,r(o.refund.type==="adjustment"?"Apply adjustment immediately":"Process refund immediately"),1)])]),l(i).errors.action?(d(),n("p",gt,r(l(i).errors.action),1)):x("",!0)])])])],32)]),e("div",mt,[e("div",xt,[t[33]||(t[33]=e("div",{class:"p-4 bg-gray-50 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-700"},[e("h3",{class:"font-medium text-gray-900 dark:text-gray-100 flex items-center gap-2"},[e("svg",{class:"w-5 h-5 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})]),m(" Evidence Comparison ")])],-1)),e("div",yt,[e("div",bt,[t[29]||(t[29]=e("h4",{class:"text-sm font-medium text-gray-900 dark:text-gray-100 mb-2"},"Original Package Photos",-1)),V.value.length>0?(d(),n("div",ft,[(d(!0),n(h,null,_(V.value,(a,p)=>(d(),n("div",{key:p,class:"relative"},[e("img",{src:a,alt:`Original package photo ${p+1}`,class:"w-full h-20 object-cover rounded border border-gray-200 dark:border-gray-600 cursor-pointer hover:opacity-80 transition-opacity",onClick:G=>R(a)},null,8,kt)]))),128))])):(d(),n("div",pt,t[28]||(t[28]=[e("svg",{class:"mx-auto h-8 w-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1),e("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},"No original photos",-1)])))]),e("div",null,[t[31]||(t[31]=e("h4",{class:"text-sm font-medium text-gray-900 dark:text-gray-100 mb-2"},"Incident Evidence",-1)),D.value.length>0?(d(),n("div",vt,[(d(!0),n(h,null,_(D.value,(a,p)=>(d(),n("div",{key:p,class:"relative"},[e("img",{src:a,alt:`Incident evidence ${p+1}`,class:"w-full h-20 object-cover rounded border border-gray-200 dark:border-gray-600 cursor-pointer hover:opacity-80 transition-opacity",onClick:G=>R(a)},null,8,ht)]))),128))])):(d(),n("div",_t,t[30]||(t[30]=[e("svg",{class:"mx-auto h-8 w-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1),e("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},"No incident evidence",-1)])))]),O.value?(d(),n("div",wt,[t[32]||(t[32]=e("h4",{class:"text-sm font-medium text-yellow-800 dark:text-yellow-200 mb-2"},"Incident Report",-1)),e("p",jt,r(T.value),1),e("div",At," Reported: "+r(W(q.value)),1)])):x("",!0)])]),y.value.length>0?(d(),n("div",Mt,[e("div",Ct,[e("h3",Pt,[t[34]||(t[34]=e("svg",{class:"w-5 h-5 text-orange-600 dark:text-orange-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})],-1)),m(" Affected Packages ("+r(y.value.length)+") ",1)])]),e("div",Vt,[e("div",Dt,[(d(!0),n(h,null,_(y.value,a=>(d(),n("div",{key:a.id,class:"bg-gray-50 dark:bg-gray-700/50 p-3 rounded-lg border border-gray-200 dark:border-gray-600"},[e("div",Nt,[e("h4",Rt,r(a.item_name||"Unnamed Package"),1),e("span",{class:A([K(a.status),"inline-flex px-2 text-xs font-semibold leading-5 rounded-full"])},r(Q(a.status)),3)]),e("div",Bt,[e("div",Lt,[t[35]||(t[35]=e("span",null,"Value:",-1)),e("span",Ft,"₱"+r(a.value||"0.00"),1)]),e("div",It,[t[36]||(t[36]=e("span",null,"Weight:",-1)),e("span",null,r(a.weight)+" kg",1)]),a.incident_description?(d(),n("div",Ut,r(a.incident_description),1)):x("",!0)])]))),128))])])])):x("",!0),k.value.length>0?(d(),n("div",$t,[e("div",St,[e("h3",zt,[t[37]||(t[37]=e("svg",{class:"w-5 h-5 text-gray-600 dark:text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})],-1)),m(" All Packages ("+r(k.value.length)+") ",1)])]),e("div",Et,[e("div",Ot,[(d(!0),n(h,null,_(k.value,a=>(d(),n("div",{key:a.id,class:A(["text-xs text-gray-600 dark:text-gray-400 p-2 rounded border",a.isAffected?"bg-red-50 border-red-200 dark:bg-red-900/20 dark:border-red-800":"bg-gray-50 border-gray-200 dark:bg-gray-700/50 dark:border-gray-600"])},[e("div",Tt,[e("span",qt,r(a.item_name),1),e("span",{class:A(a.isAffected?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400")}," ₱"+r(a.value),3)]),e("div",Ht,[e("span",null,r(a.status),1),a.isAffected?(d(),n("span",Wt,"● Affected")):(d(),n("span",Kt,"● OK"))])],2))),128))])])])):x("",!0),e("div",Qt,[t[40]||(t[40]=e("div",{class:"p-4 bg-gray-50 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-700"},[e("h3",{class:"font-medium text-gray-900 dark:text-gray-100 flex items-center gap-2"},[e("svg",{class:"w-5 h-5 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})]),m(" Quick Actions ")])],-1)),e("div",Gt,[e("div",Jt,[w(z,{onClick:t[7]||(t[7]=a=>s.$inertia.visit(s.route("refunds.show",{refund:o.refund.id}))),class:"w-full justify-center"},{default:v(()=>t[38]||(t[38]=[m(" Cancel ")])),_:1}),w(te,{onClick:N,disabled:l(i).processing,class:"w-full justify-center"},{default:v(()=>[l(i).processing?(d(),n("span",Xt,[w(se,{size:"xs",class:"mr-2"}),t[39]||(t[39]=m(" Processing... "))])):(d(),n("span",Yt,r(l(i).action==="process"?o.refund.type==="adjustment"?"Apply Adjustment":"Process Refund":"Update Details"),1))]),_:1},8,["disabled"])])])])])])])]}),_:1}))}};export{os as default};
