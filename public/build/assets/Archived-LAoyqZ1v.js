import{E as H}from"./EmployeeLayout-B8SQYBgj.js";import{_ as $}from"./PrimaryButton-CBiTPJhk.js";import{_ as b}from"./SecondaryButton-BS-rbRq0.js";import{D as B}from"./DangerButton-CNs3xLhr.js";import{_ as J}from"./SearchInput-CAeLERWr.js";import{_ as K}from"./DataTable-CWybtFnL.js";import{M as z}from"./Modal-CyMVj4bP.js";import{P as Q}from"./Pagination-DOkO8BU-.js";import{g as m,h as X,W as g,d as Y,o as i,w as a,b as e,a as n,c as u,e as v,t as o,f as d,u as Z,n as ee,k as te}from"./app-SYI-8bdC.js";import{_ as se}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as ae}from"./TruckIcon-CGlI839r.js";import"./NavLink-D6cPZaLM.js";const le={class:"flex justify-between items-center w-full px-6 md:px-8"},re={class:"flex gap-2"},oe={class:"zoom-content"},ne={class:"px-6 py-4"},ie={key:0,class:"mb-4"},de={key:0,class:"p-3 bg-blue-100 text-blue-800 rounded"},ue={key:1,class:"p-3 bg-green-100 text-green-800 rounded"},ce={key:2,class:"p-3 bg-red-100 text-red-800 rounded"},me={class:"mb-4 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-3"},ge={class:"w-full sm:w-96"},ve={class:"text-sm text-gray-500 bg-blue-50 px-3 py-1 rounded border border-blue-100 whitespace-nowrap"},fe={key:0,class:"ml-1"},xe={class:"justify-center flex items-center"},he={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg w-full max-w-[95vw]"},ke={class:"p-4 bg-white border-b border-gray-200"},ye={class:"font-medium text-gray-900"},be={class:"text-gray-700"},_e={class:"text-gray-700"},pe={class:"flex items-center"},we={class:"text-gray-700"},Ce={class:"text-gray-600"},Ae={class:"flex space-x-2"},Te={class:"text-center py-8"},Se={class:"bg-gray-50 rounded-lg p-6 max-w-md mx-auto"},Me={class:"text-gray-500 mb-3"},De={key:0,class:"mt-4"},Ne={class:"p-5"},Pe={class:"mt-1 text-sm text-gray-600"},Re={class:"mt-4 flex justify-end space-x-3"},je={key:0},$e={key:1},Be={class:"p-5"},ze={class:"mt-1 text-sm text-gray-600"},Fe={class:"mt-4 flex justify-end space-x-3"},Ee={key:0},Ie={key:1},Ue={__name:"Archived",props:{trucks:Object,status:String,success:String,error:String},setup(l){var S,M,D;const w=l,C=m(!1),A=m(!1),x=m(null),h=m(null),c=m(!1),f=m(((S=w.trucks.filters)==null?void 0:S.search)||""),k=m(((M=w.trucks.filters)==null?void 0:M.sort_field)||"archived_at"),y=m(((D=w.trucks.filters)==null?void 0:D.sort_direction)||"desc"),F={available:"bg-green-100 text-green-800",in_use:"bg-yellow-100 text-yellow-800",under_repair:"bg-red-100 text-red-800",unavailable:"bg-gray-100 text-gray-800",maintenance:"bg-red-100 text-red-800",assigned:"bg-blue-100 text-blue-800",in_transit:"bg-purple-100 text-purple-800",returning:"bg-orange-100 text-orange-800",nearly_full:"bg-yellow-100 text-yellow-800",available_for_backhaul:"bg-green-100 text-green-800",cooldown:"bg-blue-100 text-blue-800"},E=[{field:"license_plate",header:"License Plate",sortable:!0},{field:"make",header:"Make",sortable:!0},{field:"model",header:"Model",sortable:!0},{field:"region.name",header:"Region",sortable:!0},{field:"status",header:"Status",sortable:!0},{field:"archived_at",header:"Archived Date",sortable:!0},{field:"actions",header:"Actions",sortable:!1}],I=r=>r&&!["available","unavailable","maintenance"].includes(r)?"In Use":{available:"Available",unavailable:"Unavailable",maintenance:"Maintenance",assigned:"Assigned",in_transit:"In Transit",returning:"Returning",nearly_full:"Nearly Full",available_for_backhaul:"Available for Backhaul",cooldown:"Cooldown"}[r]||(r==null?void 0:r.replace(/_/g," "))||"N/A",U=r=>{k.value=r.field,y.value=r.direction},V=r=>{g.get(route("admin.trucks.archived"),{page:r,search:f.value,sort_field:k.value,sort_direction:y.value},{preserveState:!0,preserveScroll:!0,replace:!0})},L=r=>g.get(route("admin.trucks.show",r)),W=r=>{x.value=r,C.value=!0},_=()=>{C.value=!1,setTimeout(()=>{x.value=null,c.value=!1},300)},O=async()=>{if(x.value){c.value=!0;try{await g.put(route("admin.trucks.restore",x.value.id),{},{preserveScroll:!0}),_(),g.reload()}catch{_(),alert("Failed to restore truck. Please try again.")}}},q=r=>{h.value=r,A.value=!0},p=()=>{A.value=!1,setTimeout(()=>{h.value=null,c.value=!1},300)},G=async()=>{if(h.value){c.value=!0;try{await g.delete(route("admin.trucks.destroy",h.value.id),{preserveScroll:!0}),p(),g.reload()}catch{p(),alert("Failed to delete truck. Please try again.")}}},T=()=>g.get(route("admin.trucks.index"));return X([f,k,y],()=>{g.get(route("admin.trucks.archived"),{search:f.value,sort_field:k.value,sort_direction:y.value,page:1},{preserveState:!0,replace:!0})},{deep:!0}),(r,t)=>(i(),Y(H,null,{header:a(()=>[e("div",le,[t[2]||(t[2]=e("div",null,[e("h2",{class:"text-xl font-semibold leading-tight text-gray-800"},"Archived Trucks"),e("p",{class:"mt-1 text-sm text-gray-500"}," Manage disabled trucks and restore or permanently delete them ")],-1)),e("div",re,[n(b,{onClick:T},{default:a(()=>t[1]||(t[1]=[d("View Active Trucks")])),_:1})])])]),default:a(()=>{var N,P,R;return[e("div",oe,[e("div",ne,[l.status||l.success||l.error?(i(),u("div",ie,[l.status?(i(),u("div",de,o(l.status),1)):v("",!0),l.success?(i(),u("div",ue,o(l.success),1)):v("",!0),l.error?(i(),u("div",ce,o(l.error),1)):v("",!0)])):v("",!0),e("div",me,[e("div",ge,[n(J,{modelValue:f.value,"onUpdate:modelValue":t[0]||(t[0]=s=>f.value=s),placeholder:"Search archived trucks by license plate, make, or model...",class:"w-full"},null,8,["modelValue"])]),e("div",ve,[d(" ðŸ“‹ Showing "+o(((N=l.trucks.data)==null?void 0:N.length)||0)+" archived "+o(((P=l.trucks.data)==null?void 0:P.length)===1?"truck":"trucks")+" ",1),l.trucks.data&&l.trucks.data.length<l.trucks.total?(i(),u("span",fe," (Page "+o(l.trucks.current_page)+" of "+o(l.trucks.last_page)+") ",1)):v("",!0)])]),e("div",xe,[e("div",he,[e("div",ke,[n(K,{columns:E,data:l.trucks.data,"sort-field":k.value,"sort-direction":y.value,onSort:U,class:"w-full"},{license_plate:a(({row:s})=>[e("span",ye,o(s.license_plate||"N/A"),1)]),make:a(({row:s})=>[e("span",be,o(s.make||"N/A"),1)]),model:a(({row:s})=>[e("span",_e,o(s.model||"N/A"),1)]),"region.name":a(({row:s})=>[e("div",pe,[s.region&&s.region.color_hex?(i(),u("div",{key:0,class:"w-3 h-3 rounded-full mr-2 border border-gray-300",style:te({backgroundColor:s.region.color_hex})},null,4)):v("",!0),e("span",we,o(s.region&&s.region.name?s.region.name:"N/A"),1)])]),status:a(({row:s})=>[e("span",{class:ee(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full capitalize",s.status&&!["available","in_use","under_repair"].includes(s.status)?"bg-yellow-100 text-yellow-800":F[s.status]])},o(I(s.status)),3)]),archived_at:a(({row:s})=>[e("span",Ce,o(s.archived_at||"N/A"),1)]),actions:a(({row:s})=>[e("div",Ae,[n(b,{onClick:j=>L(s.id),class:"text-xs py-1 px-2"},{default:a(()=>t[3]||(t[3]=[d("View")])),_:2},1032,["onClick"]),n($,{onClick:j=>W(s),class:"text-xs py-1 px-2"},{default:a(()=>t[4]||(t[4]=[d("Restore")])),_:2},1032,["onClick"]),n(B,{onClick:j=>q(s),class:"text-xs py-1 px-2"},{default:a(()=>t[5]||(t[5]=[d("Delete")])),_:2},1032,["onClick"])])]),empty:a(()=>[e("div",Te,[e("div",Se,[n(Z(ae),{class:"h-10 w-10 text-gray-400 mx-auto mb-3"}),t[7]||(t[7]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"No archived trucks found",-1)),e("p",Me,o(f.value?"Try adjusting your search terms":"All trucks are currently active"),1),n(b,{onClick:T},{default:a(()=>t[6]||(t[6]=[d("View Active Trucks")])),_:1})])])]),_:1},8,["data","sort-field","sort-direction"]),((R=l.trucks.links)==null?void 0:R.length)>3?(i(),u("div",De,[n(Q,{pagination:l.trucks,onPageChanged:V},null,8,["pagination"])])):v("",!0)])])])])]),n(z,{show:C.value,onClose:_},{default:a(()=>{var s;return[e("div",Ne,[t[11]||(t[11]=e("h2",{class:"text-lg font-medium text-gray-900"},"Restore Truck?",-1)),e("p",Pe,[t[8]||(t[8]=d(" Are you sure you want to restore ")),e("strong",null,o((s=x.value)==null?void 0:s.license_plate),1),t[9]||(t[9]=d("? This will move it back to active trucks. "))]),e("div",Re,[n(b,{onClick:_},{default:a(()=>t[10]||(t[10]=[d("Cancel")])),_:1}),n($,{onClick:O,disabled:c.value},{default:a(()=>[c.value?(i(),u("span",je,"Processing...")):(i(),u("span",$e,"Restore Truck"))]),_:1},8,["disabled"])])])]}),_:1},8,["show"]),n(z,{show:A.value,onClose:p},{default:a(()=>{var s;return[e("div",Be,[t[15]||(t[15]=e("h2",{class:"text-lg font-medium text-gray-900"},"Permanently Delete Truck?",-1)),e("p",ze,[t[12]||(t[12]=d(" Are you sure you want to permanently delete ")),e("strong",null,o((s=h.value)==null?void 0:s.license_plate),1),t[13]||(t[13]=d("? This action cannot be undone. "))]),e("div",Fe,[n(b,{onClick:p},{default:a(()=>t[14]||(t[14]=[d("Cancel")])),_:1}),n(B,{onClick:G,disabled:c.value},{default:a(()=>[c.value?(i(),u("span",Ee,"Processing...")):(i(),u("span",Ie,"Delete Permanently"))]),_:1},8,["disabled"])])])]}),_:1},8,["show"])]}),_:1}))}},Ze=se(Ue,[["__scopeId","data-v-443dce00"]]);export{Ze as default};
