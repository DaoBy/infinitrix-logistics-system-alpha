import{g as F,W as x,h as oe,d as W,o as r,w as O,b as e,a as p,c as i,e as o,F as Y,r as G,t as l,n as z,f as y}from"./app-Xu1-QTPS.js";import{E as ce}from"./EmployeeLayout-HD3iRf9t.js";import{_ as J}from"./PrimaryButton-CQvisOOW.js";import{_ as pe}from"./SecondaryButton-B4_LijSy.js";import{_ as xe}from"./SearchInput-CS47I9fw.js";import{S as ye}from"./SelectInput-C0-STkNZ.js";import{P as K}from"./Pagination-BAEaYyIT.js";import{_ as Q}from"./PaymentStatusBadge-DusSvfcI.js";import{l as ge}from"./lodash-DIfNQ9VX.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./NavLink-Dma88ZBl.js";import"./DangerButton-B9GvHwCg.js";const me={class:"flex justify-between items-center px-6"},ue={class:"flex space-x-2 items-center"},fe={class:"px-2 py-4 max-w-5xl mx-auto"},ve={class:"bg-white dark:bg-gray-800 shadow-sm rounded-lg overflow-hidden border border-gray-200 dark:border-gray-700"},he={class:"overflow-x-auto"},ke={class:"min-w-[900px] w-full divide-y divide-gray-200 dark:divide-gray-700 text-xs md:text-sm"},_e={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},we={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-gray-100"},be={class:"flex flex-col"},qe={class:"flex items-center gap-2"},Ce={class:"font-bold text-indigo-900 dark:text-indigo-100 tracking-wide"},De={class:"mt-1 flex flex-wrap items-center gap-2 text-xs text-gray-500 dark:text-gray-300"},Pe={key:0},Se={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300"},Re={class:"px-6 py-4 whitespace-nowrap"},je={key:0,class:"ml-2"},Ae={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300"},Oe={class:"px-6 py-4 whitespace-nowrap"},Ne={class:"flex flex-col gap-1"},Ve={key:0,class:"flex items-center gap-1 text-red-600 dark:text-red-400"},Le={class:"text-xs font-medium"},Ie={class:"text-xs text-gray-500 dark:text-gray-400"},Be={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},ze={class:"flex justify-end space-x-2"},Me=["onClick"],He={key:0},Te={class:"bg-white dark:bg-gray-800 shadow-sm rounded-lg overflow-hidden border border-gray-200 dark:border-gray-700 mt-6"},Ue={class:"overflow-x-auto"},$e={class:"min-w-[900px] w-full divide-y divide-gray-200 dark:divide-gray-700 text-xs md:text-sm"},Ee={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},Fe={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-gray-100"},We={class:"flex flex-col"},Ye={class:"flex items-center gap-2"},Ge={class:"font-bold text-gray-900 dark:text-gray-100 tracking-wide"},Je={class:"mt-1 flex flex-wrap items-center gap-2 text-xs text-gray-500 dark:text-gray-300"},Ke={key:0},Qe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300"},Xe={class:"px-6 py-4 whitespace-nowrap"},Ze={key:0,class:"ml-2"},et={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300"},tt={class:"px-6 py-4 whitespace-nowrap"},st={key:0,class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},at={key:1,class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200"},rt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300"},lt={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},nt={class:"flex justify-end space-x-2"},it={key:0},kt={__name:"ReleaseIndex",props:{orders:Object,completedOrders:Object,filters:Object},setup(c){var H,T;const N=c,V=F(((H=N.filters)==null?void 0:H.search)||""),L=F(((T=N.filters)==null?void 0:T.payment_type)||""),I=a=>{var s,n;return((n=(s=a.delivery_request)==null?void 0:s.packages)==null?void 0:n.some(d=>d.status==="damaged_in_transit"||d.status==="lost_in_transit"))||!1},X=a=>{var s,n;return((n=(s=a.delivery_request)==null?void 0:s.packages)==null?void 0:n.filter(d=>d.status==="damaged_in_transit"||d.status==="lost_in_transit").length)||0},Z=a=>{var s,n;return((n=(s=a.delivery_request)==null?void 0:s.packages)==null?void 0:n.filter(d=>d.status==="delivered").length)||0},ee=()=>{x.reload()},te=a=>{x.visit(route("cargo-assignments.delivery-completion.release",a))},se=a=>{x.visit(route("cargo-assignments.delivery-completion.release",a))},ae=a=>{x.visit(route("cargo-assignments.show",a))},re=a=>{x.get(route("cargo-assignments.delivery-completion.ready-for-release"),{...N.filters,page:a},{preserveState:!0,replace:!0})},le=a=>{x.get(route("cargo-assignments.delivery-completion.ready-for-release"),{...N.filters,completed_page:a},{preserveState:!0,replace:!0})};function M(a){if(!a)return"N/A";try{return new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"Invalid date"}}function ne(a){if(!a)return"N/A";try{return new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Invalid date"}}const ie=ge.debounce(()=>{x.get(route("cargo-assignments.delivery-completion.ready-for-release"),{search:V.value,payment_type:L.value},{preserveState:!0,replace:!0})},300);return oe([V,L],ie),(a,s)=>(r(),W(ce,null,{header:O(()=>[e("div",me,[s[3]||(s[3]=e("h2",{class:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200"}," Ready for Release ",-1)),e("div",ue,[p(xe,{modelValue:V.value,"onUpdate:modelValue":s[0]||(s[0]=n=>V.value=n),placeholder:"Search by DO#, Reference #, customer...",class:"w-[28rem]"},null,8,["modelValue"]),p(ye,{modelValue:L.value,"onUpdate:modelValue":s[1]||(s[1]=n=>L.value=n),options:[{value:"",label:"All Payment Types"},{value:"prepaid",label:"Prepaid"},{value:"postpaid",label:"Postpaid"}],placeholder:"Payment Type",class:"w-60"},null,8,["modelValue"]),p(J,{onClick:ee,class:"inline-flex items-center"},{default:O(()=>s[2]||(s[2]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z","clip-rule":"evenodd"})],-1),y(" Refresh ")])),_:1})])])]),default:O(()=>{var n,d,U,$;return[e("div",fe,[e("div",ve,[s[10]||(s[10]=e("div",{class:"px-4 py-5 sm:px-6 border-b border-gray-200 dark:border-gray-700 flex flex-col md:flex-row md:items-center md:justify-between gap-4"},[e("div",null,[e("h3",{class:"text-lg font-medium leading-6 text-gray-900 dark:text-gray-100"}," Pending Release of Packages "),e("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"}," These are delivery orders that have been delivered and are now ready for package release. Use the release action to confirm and complete the delivery process. ")])],-1)),e("div",he,[e("table",ke,[s[9]||(s[9]=e("thead",{class:"bg-gray-50 dark:bg-gray-700"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Reference # "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Customer "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Payment "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Destination "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Package Status "),e("th",{scope:"col",class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Actions ")])],-1)),e("tbody",_e,[(r(!0),i(Y,null,G(((n=c.orders)==null?void 0:n.data)||[],t=>{var g,m,u,f,v,h,k,_,w,b,q,C,D,P,S,R,j,A,B,E;return r(),i("tr",{key:t.id},[e("td",we,[e("div",be,[e("div",qe,[s[4]||(s[4]=e("span",{class:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-semibold bg-indigo-100 text-indigo-800 dark:bg-indigo-800 dark:text-indigo-100"}," Reference # ",-1)),e("span",Ce,l(((g=t.delivery_request)==null?void 0:g.reference_number)||"DR-"+(((m=t.delivery_request)==null?void 0:m.id)??t.id).toString().padStart(6,"0")),1)]),e("div",De,[e("span",null," Order ID: DO-"+l(t.id.toString().padStart(6,"0")),1),(u=t.delivery_request)!=null&&u.created_at?(r(),i("span",Pe," | Created: "+l(M(t.delivery_request.created_at)),1)):o("",!0)])])]),e("td",Se,l(((v=(f=t.delivery_request)==null?void 0:f.sender)==null?void 0:v.name)||((k=(h=t.delivery_request)==null?void 0:h.sender)==null?void 0:k.company_name)||((w=(_=t.delivery_request)==null?void 0:_.receiver)==null?void 0:w.name)||((q=(b=t.delivery_request)==null?void 0:b.receiver)==null?void 0:q.company_name)||"N/A"),1),e("td",Re,[e("span",{class:z(["cash","gcash","bank"].includes((((C=t.delivery_request)==null?void 0:C.payment_method)||((D=t.delivery_request)==null?void 0:D.payment_type)||"").toLowerCase())?"px-2 py-0.5 inline-flex items-center text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"px-2 py-0.5 inline-flex items-center text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200")},l((((P=t.delivery_request)==null?void 0:P.payment_type)||((S=t.delivery_request)==null?void 0:S.payment_method)||"N/A").toUpperCase()),3),(R=t.delivery_request)!=null&&R.payment_status?(r(),i("span",je,[p(Q,{payment:t.delivery_request.payment,delivery:t.delivery_request},null,8,["payment","delivery"])])):o("",!0)]),e("td",Ae,l(((A=(j=t.delivery_request)==null?void 0:j.drop_off_region)==null?void 0:A.name)||"N/A"),1),e("td",Oe,[e("div",Ne,[I(t)?(r(),i("div",Ve,[s[5]||(s[5]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})],-1)),e("span",Le,"Has Issues: "+l(X(t)),1)])):o("",!0),e("div",Ie," Delivered: "+l(Z(t))+"/"+l(((E=(B=t.delivery_request)==null?void 0:B.packages)==null?void 0:E.length)||0),1)])]),e("td",Be,[e("div",ze,[I(t)?o("",!0):(r(),W(J,{key:0,onClick:de=>te(t.id),class:"inline-flex items-center",title:"Release Packages",style:{"padding-left":"0.75rem","padding-right":"0.75rem"}},{default:O(()=>s[6]||(s[6]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 12V7a2 2 0 00-2-2H6a2 2 0 00-2 2v5m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0H4"})],-1),y(" Release ")])),_:2},1032,["onClick"])),I(t)?(r(),i("button",{key:1,onClick:de=>se(t.id),class:"inline-flex items-center px-3 py-2 border border-red-300 text-red-700 bg-red-50 rounded-md text-xs font-medium hover:bg-red-100 hover:text-red-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 dark:border-red-600 dark:bg-red-900/30 dark:text-red-300 dark:hover:bg-red-900/50",title:"Release with Issues"},s[7]||(s[7]=[e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})],-1),y(" Release with Issues ")]),8,Me)):o("",!0)])])])}),128)),!((d=c.orders)!=null&&d.data)||c.orders.data.length===0?(r(),i("tr",He,s[8]||(s[8]=[e("td",{colspan:"6",class:"px-6 py-4 text-center text-sm text-gray-500 dark:text-gray-400"}," No orders ready for release ",-1)]))):o("",!0)])])]),p(K,{pagination:c.orders,onPageChanged:re},null,8,["pagination"])]),e("div",Te,[s[17]||(s[17]=e("div",{class:"px-4 py-5 sm:px-6 border-b border-gray-200 dark:border-gray-700 flex flex-col md:flex-row md:items-center md:justify-between gap-4"},[e("div",null,[e("h3",{class:"text-lg font-medium leading-6 text-gray-900 dark:text-gray-100"}," Completed Releases "),e("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"}," All delivery orders that have been fully released and marked as completed. You can view the details of each completed release. ")])],-1)),e("div",Ue,[e("table",$e,[s[16]||(s[16]=e("thead",{class:"bg-gray-50 dark:bg-gray-700"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Reference # "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Customer "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Payment "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Destination "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Completion Status "),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Completed At "),e("th",{scope:"col",class:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider"}," Actions ")])],-1)),e("tbody",Ee,[(r(!0),i(Y,null,G(((U=c.completedOrders)==null?void 0:U.data)||[],t=>{var g,m,u,f,v,h,k,_,w,b,q,C,D,P,S,R,j,A;return r(),i("tr",{key:t.id},[e("td",Fe,[e("div",We,[e("div",Ye,[s[11]||(s[11]=e("span",{class:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-semibold bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-100"}," Reference # ",-1)),e("span",Ge,l(((g=t.delivery_request)==null?void 0:g.reference_number)||"DR-"+(((m=t.delivery_request)==null?void 0:m.id)??t.id).toString().padStart(6,"0")),1)]),e("div",Je,[e("span",null," Order ID: DO-"+l(t.id.toString().padStart(6,"0")),1),(u=t.delivery_request)!=null&&u.created_at?(r(),i("span",Ke," | Created: "+l(M(t.delivery_request.created_at)),1)):o("",!0)])])]),e("td",Qe,l(((v=(f=t.delivery_request)==null?void 0:f.sender)==null?void 0:v.name)||((k=(h=t.delivery_request)==null?void 0:h.sender)==null?void 0:k.company_name)||((w=(_=t.delivery_request)==null?void 0:_.receiver)==null?void 0:w.name)||((q=(b=t.delivery_request)==null?void 0:b.receiver)==null?void 0:q.company_name)||"N/A"),1),e("td",Xe,[e("span",{class:z(["cash","gcash","bank"].includes((((C=t.delivery_request)==null?void 0:C.payment_method)||((D=t.delivery_request)==null?void 0:D.payment_type)||"").toLowerCase())?"px-2 py-0.5 inline-flex items-center text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"px-2 py-0.5 inline-flex items-center text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200")},l((((P=t.delivery_request)==null?void 0:P.payment_type)||((S=t.delivery_request)==null?void 0:S.payment_method)||"N/A").toUpperCase()),3),(R=t.delivery_request)!=null&&R.payment_status?(r(),i("span",Ze,[p(Q,{payment:t.delivery_request.payment,delivery:t.delivery_request},null,8,["payment","delivery"])])):o("",!0)]),e("td",et,l(((A=(j=t.delivery_request)==null?void 0:j.drop_off_region)==null?void 0:A.name)||"N/A"),1),e("td",tt,[t.status==="partially_delivered"||t.status==="delivery_failed"?(r(),i("span",{key:0,class:z(["inline-flex items-center px-2 py-1 rounded-full text-xs font-medium",{"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200":t.status==="partially_delivered","bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200":t.status==="delivery_failed"}])},[t.status==="partially_delivered"?(r(),i("svg",st,s[12]||(s[12]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"},null,-1)]))):o("",!0),y(" "+l(t.status==="partially_delivered"?"Partially Delivered":"Delivery Failed"),1)],2)):(r(),i("span",at,s[13]||(s[13]=[e("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),y(" Completed ")])))]),e("td",rt,l(ne(t.completed_at)),1),e("td",lt,[e("div",nt,[p(pe,{onClick:B=>ae(t.id),class:"inline-flex items-center",title:"View Details",style:{"padding-left":"0.75rem","padding-right":"0.75rem"}},{default:O(()=>s[14]||(s[14]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1),y(" View ")])),_:2},1032,["onClick"])])])])}),128)),!(($=c.completedOrders)!=null&&$.data)||c.completedOrders.data.length===0?(r(),i("tr",it,s[15]||(s[15]=[e("td",{colspan:"7",class:"px-6 py-4 text-center text-sm text-gray-500 dark:text-gray-400"}," No completed releases ",-1)]))):o("",!0)])])]),p(K,{pagination:c.completedOrders,onPageChanged:le},null,8,["pagination"])])])]}),_:1}))}};export{kt as default};
