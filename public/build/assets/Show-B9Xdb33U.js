import{E as H}from"./EmployeeLayout-HD3iRf9t.js";import{_ as v}from"./PrimaryButton-CQvisOOW.js";import{_ as p}from"./SecondaryButton-B4_LijSy.js";import{D as C}from"./DangerButton-B9GvHwCg.js";import{_ as N}from"./DataTable-3JX1dhV3.js";import{M as O}from"./Modal-CsHRj0Ox.js";import{g as _,i as j,d as f,o as i,w as r,b as t,a as g,c as l,e as d,t as n,n as M,k as Y,u as S,W as u,f as c}from"./app-Xu1-QTPS.js";import{_ as J}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./NavLink-Dma88ZBl.js";const K={class:"flex justify-between items-center w-full px-6 md:px-8"},Q={class:"text-xl font-semibold leading-tight text-gray-800"},X={class:"flex gap-2"},Z={class:"zoom-content"},ee={class:"px-6 py-4"},te={key:0,class:"mb-4"},se={key:0,class:"p-3 bg-blue-100 text-blue-800 rounded"},ne={key:1,class:"p-3 bg-green-100 text-green-800 rounded"},ae={key:2,class:"p-3 bg-red-100 text-red-800 rounded"},re={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},oe={class:"p-6 bg-white border-b border-gray-200"},ie={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8"},le={class:"bg-white border border-gray-200 rounded-lg p-6"},de={class:"space-y-4"},ce={class:"flex justify-between items-center py-2 border-b border-gray-100"},ue={class:"text-sm text-gray-900 font-semibold"},me={class:"flex justify-between items-center py-2 border-b border-gray-100"},ge={class:"text-sm text-gray-900"},ye={class:"flex justify-between items-center py-2 border-b border-gray-100"},xe={key:0,class:"flex justify-between items-center py-2 border-b border-gray-100"},be={class:"flex items-center"},fe={class:"text-sm text-gray-900"},ke={class:"bg-white border border-gray-200 rounded-lg p-6"},ve={class:"space-y-4"},pe={class:"flex justify-between items-center py-2 border-b border-gray-100"},he={class:"text-sm text-gray-900"},we={class:"flex justify-between items-center py-2 border-b border-gray-100"},Ce={class:"text-sm text-gray-900"},_e={class:"flex justify-between items-center py-2 border-b border-gray-100"},De={class:"text-sm text-gray-900"},Ne={class:"flex justify-between items-center py-2 border-b border-gray-100"},je={class:"text-sm text-gray-900"},Me={class:"flex justify-between items-center py-2"},Se={class:"text-sm font-semibold text-green-600"},$e={class:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8"},Ae={class:"bg-white border border-gray-200 rounded-lg p-6"},Te={class:"space-y-4"},Ie={key:0,class:"flex justify-between items-center py-2 border-b border-gray-100"},Be={class:"text-sm text-gray-900"},ze={key:1,class:"flex justify-between items-center py-2 border-b border-gray-100"},Le={class:"text-sm text-gray-900 font-mono"},Pe={key:2,class:"flex justify-between items-center py-2 border-b border-gray-100"},Ue={class:"text-sm text-gray-900"},We={key:3,class:"flex justify-between items-center py-2 border-b border-gray-100"},Ee={class:"text-sm text-gray-900"},Re={key:4,class:"flex justify-between items-center py-2"},Ve={class:"text-sm text-gray-900"},Fe={key:0,class:"bg-white border border-gray-200 rounded-lg p-6"},qe={class:"text-sm text-gray-700 whitespace-pre-line"},Ge={class:"bg-white border border-gray-200 rounded-lg p-6 mb-6"},He={class:"flex justify-between items-center mb-4"},Oe={class:"font-medium text-gray-900"},Ye={class:"text-gray-700 capitalize"},Je={class:"text-gray-600"},Ke={key:1,class:"text-center py-4 text-gray-500"},Qe={class:"bg-white border border-gray-200 rounded-lg p-6"},Xe={class:"flex justify-between items-center mb-4"},Ze={class:"capitalize"},et={class:"text-gray-700"},tt={class:"line-clamp-2"},st={class:"flex space-x-2"},nt={key:1,class:"text-center py-4 text-gray-500"},at={class:"p-5"},rt={class:"mt-1 text-sm text-gray-600"},ot={class:"mt-4 flex justify-end space-x-3"},it={key:0},lt={key:1},dt={__name:"Show",props:{truck:{type:Object,required:!0,default:()=>({maintenance:[],components:[],region:null})},status:String,success:String,error:String},setup(s){const m=s,h=_(!1),x=_(null),b=_(!1),$={available:"bg-green-100 text-green-800",unavailable:"bg-gray-100 text-gray-800",maintenance:"bg-red-100 text-red-800",assigned:"bg-blue-100 text-blue-800",in_transit:"bg-purple-100 text-purple-800",returning:"bg-orange-100 text-orange-800",nearly_full:"bg-yellow-100 text-yellow-800",available_for_backhaul:"bg-green-100 text-green-800",cooldown:"bg-blue-100 text-blue-800"},A={new:"New",good:"Good",fair:"Fair",poor:"Poor",needs_replacement:"Needs Replacement"},T=[{field:"maintenance_date",header:"Date",sortable:!0},{field:"type",header:"Type",sortable:!0},{field:"service_provider",header:"Provider",sortable:!0},{field:"service_details",header:"Details",sortable:!1},{field:"cost",header:"Cost",sortable:!0},{field:"actions",header:"Actions",sortable:!1}],I=[{field:"name",header:"Name",sortable:!0},{field:"type",header:"Type",sortable:!0},{field:"condition",header:"Condition",sortable:!0},{field:"installation_date",header:"Installed",sortable:!0},{field:"actions",header:"Actions",sortable:!1}],B=j(()=>(m.truck.volume_capacity||0)-(m.truck.current_volume||0)),z=j(()=>(m.truck.weight_capacity||0)-(m.truck.current_weight||0)),y=a=>a?a.replace(/\b\w/g,e=>e.toUpperCase()):"",L=a=>a&&!["available","unavailable","maintenance"].includes(a)?"In Use":{available:"Available",unavailable:"Unavailable",maintenance:"Maintenance",assigned:"Assigned",in_transit:"In Transit",returning:"Returning",nearly_full:"Nearly Full",available_for_backhaul:"Available for Backhaul",cooldown:"Cooldown"}[a]||y(a==null?void 0:a.replace(/_/g," "))||"N/A",P=a=>a?["assigned","in_transit","returning","nearly_full","available_for_backhaul","cooldown"].includes(a.status):!1,k=a=>{if(!a)return"N/A";try{return new Date(a).toLocaleDateString()}catch{return"Invalid Date"}},U=a=>({new:"bg-green-100 text-green-800",good:"bg-blue-100 text-blue-800",fair:"bg-yellow-100 text-yellow-800",poor:"bg-orange-100 text-orange-800",needs_replacement:"bg-red-100 text-red-800"})[a]||"bg-gray-100 text-gray-800",W=()=>{u.get(route("admin.trucks.edit",m.truck.id))},E=()=>{confirm("Are you sure you want to disable this truck?")&&u.put(route("admin.trucks.archive",m.truck.id),{preserveScroll:!0,onSuccess:()=>u.reload()})},R=()=>{confirm("Are you sure you want to restore this truck?")&&u.put(route("admin.trucks.restore",m.truck.id),{preserveScroll:!0,onSuccess:()=>u.reload()})},V=a=>{u.get(route("admin.trucks.maintenance.edit",{truck:m.truck.id,maintenance:a.id}))},F=a=>{u.get(route("admin.trucks.components.show",{truck:m.truck.id,component:a.id}))},q=a=>{x.value=a,h.value=!0},w=()=>{h.value=!1,x.value=null,b.value=!1},G=()=>{x.value&&(b.value=!0,u.delete(route("admin.trucks.maintenance.destroy",{truck:m.truck.id,maintenance:x.value.id}),{preserveScroll:!0,onSuccess:()=>{w(),u.reload()},onFinish:()=>{b.value=!1}}))};return(a,e)=>(i(),f(H,null,{header:r(()=>[t("div",K,[t("div",null,[t("h2",Q," Truck Details: "+n(s.truck.license_plate),1),e[3]||(e[3]=t("p",{class:"mt-1 text-sm text-gray-500"}," View and manage truck information, maintenance, and components ",-1))]),t("div",X,[g(p,{onClick:e[0]||(e[0]=o=>a.$inertia.visit(a.route("admin.trucks.index")))},{default:r(()=>e[4]||(e[4]=[c(" Back to List ")])),_:1}),g(v,{onClick:W},{default:r(()=>e[5]||(e[5]=[c(" Edit Truck ")])),_:1}),s.truck.is_active&&!P(s.truck)?(i(),f(C,{key:0,onClick:E},{default:r(()=>e[6]||(e[6]=[c(" Disable ")])),_:1})):s.truck.is_active?d("",!0):(i(),f(v,{key:1,onClick:R},{default:r(()=>e[7]||(e[7]=[c(" Restore ")])),_:1}))])])]),default:r(()=>[t("div",Z,[t("div",ee,[s.status||s.success||s.error?(i(),l("div",te,[s.status?(i(),l("div",se,n(s.status),1)):d("",!0),s.success?(i(),l("div",ne,n(s.success),1)):d("",!0),s.error?(i(),l("div",ae,n(s.error),1)):d("",!0)])):d("",!0),t("div",re,[t("div",oe,[t("div",ie,[t("div",le,[e[12]||(e[12]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Basic Information",-1)),t("div",de,[t("div",ce,[e[8]||(e[8]=t("span",{class:"text-sm font-medium text-gray-500"},"License Plate",-1)),t("span",ue,n(s.truck.license_plate),1)]),t("div",me,[e[9]||(e[9]=t("span",{class:"text-sm font-medium text-gray-500"},"Make & Model",-1)),t("span",ge,n(s.truck.make)+" "+n(s.truck.model),1)]),t("div",ye,[e[10]||(e[10]=t("span",{class:"text-sm font-medium text-gray-500"},"Status",-1)),t("span",{class:M([s.truck.status&&!["available","unavailable","maintenance"].includes(s.truck.status)?"bg-yellow-100 text-yellow-800":$[s.truck.status],"px-2 inline-flex text-xs leading-5 font-semibold rounded-full capitalize"])},n(L(s.truck.status)),3)]),s.truck.region?(i(),l("div",xe,[e[11]||(e[11]=t("span",{class:"text-sm font-medium text-gray-500"},"Region",-1)),t("div",be,[s.truck.region.color_hex?(i(),l("div",{key:0,class:"w-3 h-3 rounded-full mr-2 border border-gray-300",style:Y({backgroundColor:s.truck.region.color_hex})},null,4)):d("",!0),t("span",fe,n(s.truck.region.name),1)])])):d("",!0)])]),t("div",ke,[e[18]||(e[18]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Capacity Information",-1)),t("div",ve,[t("div",pe,[e[13]||(e[13]=t("span",{class:"text-sm font-medium text-gray-500"},"Volume Capacity",-1)),t("span",he,n(s.truck.volume_capacity?`${s.truck.volume_capacity} m³`:"N/A"),1)]),t("div",we,[e[14]||(e[14]=t("span",{class:"text-sm font-medium text-gray-500"},"Weight Capacity",-1)),t("span",Ce,n(s.truck.weight_capacity?`${s.truck.weight_capacity} kg`:"N/A"),1)]),t("div",_e,[e[15]||(e[15]=t("span",{class:"text-sm font-medium text-gray-500"},"Current Volume",-1)),t("span",De,n(s.truck.current_volume?`${s.truck.current_volume} m³`:"0 m³"),1)]),t("div",Ne,[e[16]||(e[16]=t("span",{class:"text-sm font-medium text-gray-500"},"Current Weight",-1)),t("span",je,n(s.truck.current_weight?`${s.truck.current_weight} kg`:"0 kg"),1)]),t("div",Me,[e[17]||(e[17]=t("span",{class:"text-sm font-medium text-gray-500"},"Available Capacity",-1)),t("span",Se,n(B.value)+" m³ / "+n(z.value)+" kg ",1)])])])]),t("div",$e,[t("div",Ae,[e[24]||(e[24]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Vehicle Details",-1)),t("div",Te,[s.truck.year?(i(),l("div",Ie,[e[19]||(e[19]=t("span",{class:"text-sm font-medium text-gray-500"},"Year",-1)),t("span",Be,n(s.truck.year),1)])):d("",!0),s.truck.vin?(i(),l("div",ze,[e[20]||(e[20]=t("span",{class:"text-sm font-medium text-gray-500"},"VIN",-1)),t("span",Le,n(s.truck.vin),1)])):d("",!0),s.truck.purchase_date?(i(),l("div",Pe,[e[21]||(e[21]=t("span",{class:"text-sm font-medium text-gray-500"},"Purchase Date",-1)),t("span",Ue,n(k(s.truck.purchase_date)),1)])):d("",!0),s.truck.purchase_price?(i(),l("div",We,[e[22]||(e[22]=t("span",{class:"text-sm font-medium text-gray-500"},"Purchase Price",-1)),t("span",Ee,"₱"+n(Number(s.truck.purchase_price).toLocaleString()),1)])):d("",!0),s.truck.current_value?(i(),l("div",Re,[e[23]||(e[23]=t("span",{class:"text-sm font-medium text-gray-500"},"Current Value",-1)),t("span",Ve,"₱"+n(Number(s.truck.current_value).toLocaleString()),1)])):d("",!0)])]),s.truck.notes?(i(),l("div",Fe,[e[25]||(e[25]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Notes",-1)),t("p",qe,n(s.truck.notes),1)])):d("",!0)]),t("div",Ge,[t("div",He,[e[27]||(e[27]=t("h3",{class:"text-lg font-medium text-gray-900"},"Components",-1)),g(v,{onClick:e[1]||(e[1]=o=>S(u).get(a.route("admin.trucks.components.index",s.truck.id))),class:"text-xs py-1 px-2"},{default:r(()=>e[26]||(e[26]=[c(" Manage Components ")])),_:1})]),s.truck.components&&s.truck.components.length?(i(),f(N,{key:0,columns:I,data:s.truck.components,class:"w-full"},{name:r(({row:o})=>[t("span",Oe,n(y(o.name)),1)]),type:r(({row:o})=>[t("span",Ye,n(y(o.type.replace(/_/g," "))),1)]),condition:r(({row:o})=>[t("span",{class:M(`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${U(o.condition)}`)},n(y(A[o.condition])),3)]),installation_date:r(({row:o})=>[t("span",Je,n(k(o.installation_date)),1)]),actions:r(({row:o})=>[g(p,{onClick:D=>F(o),class:"text-xs py-1 px-2"},{default:r(()=>e[28]||(e[28]=[c("View")])),_:2},1032,["onClick"])]),empty:r(()=>e[29]||(e[29]=[t("div",{class:"text-center py-4 text-gray-500"}," No components found. ",-1)])),_:1},8,["data"])):(i(),l("div",Ke," No components found. "))]),t("div",Qe,[t("div",Xe,[e[31]||(e[31]=t("h3",{class:"text-lg font-medium text-gray-900"},"Maintenance History",-1)),g(v,{onClick:e[2]||(e[2]=o=>S(u).get(a.route("admin.trucks.maintenance.create",s.truck.id))),class:"text-xs py-1 px-2"},{default:r(()=>e[30]||(e[30]=[c(" Add Maintenance ")])),_:1})]),s.truck.maintenance&&s.truck.maintenance.length?(i(),f(N,{key:0,columns:T,data:s.truck.maintenance,class:"w-full"},{maintenance_date:r(({row:o})=>[c(n(k(o.maintenance_date)),1)]),type:r(({row:o})=>[t("span",Ze,n(y(o.type.replace(/_/g," "))),1)]),service_provider:r(({row:o})=>[t("span",et,n(y(o.service_provider)),1)]),service_details:r(({row:o})=>[t("span",tt,n(y(o.service_details)),1)]),cost:r(({row:o})=>[c(" ₱"+n(Number(o.cost).toFixed(2)),1)]),actions:r(({row:o})=>[t("div",st,[g(p,{onClick:D=>V(o),class:"text-xs py-1 px-2"},{default:r(()=>e[32]||(e[32]=[c("Edit")])),_:2},1032,["onClick"]),g(C,{onClick:D=>q(o),class:"text-xs py-1 px-2"},{default:r(()=>e[33]||(e[33]=[c("Delete")])),_:2},1032,["onClick"])])]),empty:r(()=>e[34]||(e[34]=[t("div",{class:"text-center py-4 text-gray-500"}," No maintenance records found. ",-1)])),_:1},8,["data"])):(i(),l("div",nt," No maintenance records found. "))])])])])]),g(O,{show:h.value,onClose:w},{default:r(()=>[t("div",at,[e[36]||(e[36]=t("h2",{class:"text-lg font-medium text-gray-900"},"Delete Maintenance Record?",-1)),t("p",rt," Are you sure you want to delete this maintenance record from "+n(x.value?k(x.value.maintenance_date):"")+"? ",1),t("div",ot,[g(p,{onClick:w},{default:r(()=>e[35]||(e[35]=[c("Cancel")])),_:1}),g(C,{onClick:G,disabled:b.value},{default:r(()=>[b.value?(i(),l("span",it,"Processing...")):(i(),l("span",lt,"Delete"))]),_:1},8,["disabled"])])])]),_:1},8,["show"])]),_:1}))}},vt=J(dt,[["__scopeId","data-v-03fc36fc"]]);export{vt as default};
