import{E as oe}from"./EmployeeLayout-CgMY_n5V.js";import{_ as q}from"./PrimaryButton-eC2eu5yQ.js";import{_ as B}from"./SecondaryButton-f4DzqSLc.js";import{D as re}from"./DangerButton-B7_oj2jq.js";import{_ as le}from"./DataTable-BArupUOg.js";import{P as ae}from"./Pagination-clkSGD3h.js";import{_ as ie}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{g as ee,i as de,c as u,o,a as b,d as C,e as v,w as l,b as t,f as m,t as i,n as ne,F as te,r as se,W as y}from"./app-BllHWhcy.js";import{T as ue}from"./TransactionHistoryTable-BK5VJVOv.js";import"./NavLink-BG8uMyS8.js";const me={class:"font-medium"},ce={class:"font-medium"},ve={class:"flex items-center justify-start space-x-1 w-full overflow-hidden"},fe={__name:"PendingRequestsTable",props:{requests:Object},emits:["view","edit","cancel"],setup(s){const k=s,c=ee("created_at"),p=ee("desc"),A=[{field:"request_number",header:"Request #",sortable:!0},{field:"receiver",header:"Receiver",sortable:!0},{field:"pickup",header:"Pickup Branch",sortable:!0},{field:"dropoff",header:"Dropoff Branch",sortable:!0},{field:"created_at",header:"Date Created",sortable:!0},{field:"status",header:"Status",sortable:!0},{field:"total_price",header:"Total",sortable:!0},{field:"actions",header:"Actions",sortable:!1,style:"width: 200px;"}],S=e=>{switch(e){case"draft":return"bg-gray-100 text-gray-800";case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},N=de(()=>{var e;return(e=k.requests)!=null&&e.data?k.requests.data.sort((a,f)=>{var d,g,w,h;if(!c.value)return 0;const n=p.value==="asc"?1:-1;return c.value==="request_number"?(a.id-f.id)*n:c.value==="pickup"?(((d=a.pick_up_region)==null?void 0:d.name)||"").localeCompare(((g=f.pick_up_region)==null?void 0:g.name)||"")*n:c.value==="dropoff"?(((w=a.drop_off_region)==null?void 0:w.name)||"").localeCompare(((h=f.drop_off_region)==null?void 0:h.name)||"")*n:a[c.value]<f[c.value]?-1*n:a[c.value]>f[c.value]?1*n:0}):[]});function D(e){c.value===e?p.value=p.value==="asc"?"desc":"asc":(c.value=e,p.value="asc")}const R=e=>new Date(e).toLocaleDateString(),$=e=>Number(e).toFixed(2),r=e=>e.charAt(0).toUpperCase()+e.slice(1);return(e,a)=>{var f;return o(),u("div",null,[b(le,{columns:A,data:N.value,"sort-field":c.value,"sort-direction":p.value,onSort:D,class:"w-full"},{request_number:l(({row:n})=>[t("span",me,"#"+i(n.id.toString().padStart(6,"0")),1)]),receiver:l(({row:n})=>{var d,g;return[t("span",null,i(((d=n.receiver)==null?void 0:d.name)||((g=n.receiver)==null?void 0:g.company_name)||"Not specified"),1)]}),pickup:l(({row:n})=>{var d;return[t("span",null,i(((d=n.pick_up_region)==null?void 0:d.name)||"Not specified"),1)]}),dropoff:l(({row:n})=>{var d;return[t("span",null,i(((d=n.drop_off_region)==null?void 0:d.name)||"Not specified"),1)]}),created_at:l(({row:n})=>[t("span",null,i(R(n.created_at)),1)]),status:l(({row:n})=>[t("span",{class:ne(["inline-block px-3 py-0.5 rounded-full text-xs font-medium",S(n.status)])},i(r(n.status)),3)]),total_price:l(({row:n})=>[t("span",ce," â‚±"+i($(n.total_price??0)),1)]),actions:l(({row:n})=>[t("div",ve,[b(B,{class:"!px-2 !py-1 text-xs",onClick:d=>e.$emit("view",n.id)},{default:l(()=>a[0]||(a[0]=[m(" View ")])),_:2},1032,["onClick"]),n.status==="pending"||n.status==="draft"?(o(),C(q,{key:0,class:"!px-2 !py-1 text-xs",onClick:d=>e.$emit("edit",n.id)},{default:l(()=>a[1]||(a[1]=[m(" Edit ")])),_:2},1032,["onClick"])):v("",!0),n.status==="pending"||n.status==="draft"?(o(),C(re,{key:1,class:"!px-2 !py-1 text-xs",onClick:d=>e.$emit("cancel",n.id)},{default:l(()=>a[2]||(a[2]=[m(" Cancel ")])),_:2},1032,["onClick"])):v("",!0)])]),_:1},8,["data","sort-field","sort-direction"]),((f=s.requests.links)==null?void 0:f.length)>3?(o(),C(ae,{key:0,links:s.requests.links,class:"mt-4"},null,8,["links"])):v("",!0)])}}},ye=ie(fe,[["__scopeId","data-v-a9f64fdc"]]),ge={class:"flex justify-between items-center"},xe={class:"text-xl font-semibold leading-tight text-gray-800"},be={class:"flex space-x-2"},pe={class:"py-6 px-6 sm:px-8"},ke={class:"mx-auto max-w-7xl"},Ce={key:0,class:"mb-6"},we={key:0,class:"p-4 bg-blue-100 text-blue-800 rounded"},he={key:1,class:"p-4 bg-green-100 text-green-800 rounded"},qe={key:2,class:"p-4 bg-red-100 text-red-800 rounded"},Ae={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},Se={class:"p-5 bg-white border-b border-gray-200"},Ne={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},De={class:"space-y-4"},Re={class:"space-y-4"},$e={class:"mt-1 text-sm text-gray-900"},Be={class:"mt-1 text-sm text-gray-900"},je={class:"space-y-4"},Te={class:"space-y-4"},Ee={class:"mt-1 text-sm text-gray-900 capitalize"},Le={key:0},Ve={class:"block text-sm font-medium text-gray-500"},Fe={class:"mt-1 text-sm text-gray-900"},Ie={key:1},ze={class:"mt-1 text-sm text-gray-900"},Pe={class:"mt-1 text-sm text-gray-900"},Oe={key:0,class:"mt-1 text-sm text-gray-900"},He={class:"mt-1 text-sm text-gray-900"},We={class:"space-y-4"},Ue={class:"mt-1 text-sm text-gray-900"},_e={class:"mt-1 text-sm text-gray-900"},Ge={class:"mt-1 text-sm text-gray-900 capitalize"},Je={key:0},Ke={class:"mt-1 text-sm text-gray-900 whitespace-pre-line"},Me={key:0,class:"space-y-4"},Qe={key:0},Xe={class:"mt-2 space-y-2"},Ye={key:1},Ze={class:"mt-2 space-y-2"},et={class:"mt-8"},tt={class:"overflow-x-auto w-full"},st={class:"mt-8"},rt={class:"overflow-x-auto w-full"},it={class:"mt-8 flex justify-end space-x-4"},nt={class:"mt-8"},ot={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},lt={__name:"Show",props:{customer:Object,recent_sent_deliveries:Array,recent_received_deliveries:Array,deliveryRequests:Object,transactions:Object,status:String,success:String,error:String},setup(s){const k=s,c=()=>{y.get(route("admin.customers.edit",k.customer.id))},p=()=>{confirm("Are you sure you want to archive this customer?")&&y.put(route("admin.customers.archive",k.customer.id),{preserveScroll:!0,onSuccess:()=>{y.reload()}})},A=()=>{confirm("Are you sure you want to restore this customer?")&&y.put(route("admin.customers.restore",k.customer.id),{preserveScroll:!0,onSuccess:()=>{y.reload()}})},S=r=>{y.get(route("admin.delivery-requests.show",r))},N=r=>{y.get(route("admin.delivery-requests.edit",r))},D=r=>{confirm("Are you sure you want to cancel this request?")&&y.delete(route("admin.delivery-requests.destroy",r),{preserveScroll:!0,onSuccess:()=>y.reload()})},R=r=>{y.get(route("admin.transactions.show",r))},$=r=>{y.get(route("admin.delivery-requests.show",r))};return(r,e)=>(o(),C(oe,null,{header:l(()=>{var a;return[t("div",ge,[t("h2",xe," Customer Details: "+i(s.customer.name||s.customer.company_name),1),t("div",be,[b(B,{onClick:e[0]||(e[0]=f=>r.$inertia.visit(r.route("admin.customers.index")))},{default:l(()=>e[2]||(e[2]=[m(" Back to List ")])),_:1}),b(q,{onClick:c},{default:l(()=>e[3]||(e[3]=[m(" Edit ")])),_:1}),(a=s.customer.user)!=null&&a.is_active?(o(),C(re,{key:0,onClick:p},{default:l(()=>e[4]||(e[4]=[m(" Archive ")])),_:1})):(o(),C(q,{key:1,onClick:A},{default:l(()=>e[5]||(e[5]=[m(" Restore ")])),_:1}))])])]}),default:l(()=>{var a,f,n,d,g,w,h,j,T,E,L,V,F,I,z,P,O,H,W,U,_,G,J,K,M,Q,X,Y,Z;return[t("div",pe,[t("div",ke,[s.status||s.success||s.error?(o(),u("div",Ce,[s.status?(o(),u("div",we,i(s.status),1)):v("",!0),s.success?(o(),u("div",he,i(s.success),1)):v("",!0),s.error?(o(),u("div",qe,i(s.error),1)):v("",!0)])):v("",!0),t("div",Ae,[t("div",Se,[t("div",Ne,[t("div",De,[e[9]||(e[9]=t("h3",{class:"text-lg font-medium text-gray-900"},"Account Information",-1)),t("div",Re,[t("div",null,[e[6]||(e[6]=t("label",{class:"block text-sm font-medium text-gray-500"},"Account Email",-1)),t("p",$e,i(((a=s.customer.user)==null?void 0:a.email)||"N/A"),1)]),t("div",null,[e[7]||(e[7]=t("label",{class:"block text-sm font-medium text-gray-500"},"Account Status",-1)),t("span",{class:ne([(f=s.customer.user)!=null&&f.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800","px-2 inline-flex text-xs leading-5 font-semibold rounded-full"])},i((n=s.customer.user)!=null&&n.is_active?"Active":"Inactive"),3)]),t("div",null,[e[8]||(e[8]=t("label",{class:"block text-sm font-medium text-gray-500"},"Created At",-1)),t("p",Be,i(new Date(s.customer.created_at).toLocaleDateString()),1)])])]),t("div",je,[e[13]||(e[13]=t("h3",{class:"text-lg font-medium text-gray-900"},"Customer Information",-1)),t("div",Te,[t("div",null,[e[10]||(e[10]=t("label",{class:"block text-sm font-medium text-gray-500"},"Type",-1)),t("p",Ee,i(s.customer.customer_category==="company"?"Company":"Individual"),1)]),s.customer.name?(o(),u("div",Le,[t("label",Ve,i(s.customer.customer_category==="company"?"Contact Person":"Full Name"),1),t("p",Fe,i(s.customer.name),1)])):v("",!0),s.customer.company_name?(o(),u("div",Ie,[e[11]||(e[11]=t("label",{class:"block text-sm font-medium text-gray-500"},"Company Name",-1)),t("p",ze,i(s.customer.company_name),1)])):v("",!0),t("div",null,[e[12]||(e[12]=t("label",{class:"block text-sm font-medium text-gray-500"},"Contact",-1)),t("p",Pe,i(s.customer.mobile),1),s.customer.phone?(o(),u("p",Oe,i(s.customer.phone),1)):v("",!0),t("p",He,i(s.customer.email),1)])])]),t("div",We,[e[17]||(e[17]=t("h3",{class:"text-lg font-medium text-gray-900"},"Address Information",-1)),t("div",null,[e[14]||(e[14]=t("label",{class:"block text-sm font-medium text-gray-500"},"Address",-1)),t("p",Ue,i([s.customer.building_number,s.customer.street].filter(Boolean).join(" ")),1),t("p",_e,i([s.customer.barangay,s.customer.city,s.customer.province,s.customer.zip_code].filter(Boolean).join(", ")),1)]),t("div",null,[e[15]||(e[15]=t("label",{class:"block text-sm font-medium text-gray-500"},"Frequency",-1)),t("p",Ge,i(s.customer.frequency_type==="regular"?"Regular":"Occasional"),1)]),s.customer.notes?(o(),u("div",Je,[e[16]||(e[16]=t("label",{class:"block text-sm font-medium text-gray-500"},"Notes",-1)),t("p",Ke,i(s.customer.notes),1)])):v("",!0)]),(d=s.recent_sent_deliveries)!=null&&d.length||(g=s.recent_received_deliveries)!=null&&g.length?(o(),u("div",Me,[e[20]||(e[20]=t("h3",{class:"text-lg font-medium text-gray-900"},"Recent Deliveries",-1)),(w=s.recent_sent_deliveries)!=null&&w.length?(o(),u("div",Qe,[e[18]||(e[18]=t("h4",{class:"text-md font-medium text-gray-700"},"Sent",-1)),t("ul",Xe,[(o(!0),u(te,null,se(s.recent_sent_deliveries,x=>(o(),u("li",{key:x.id,class:"text-sm text-gray-600"},i(x.tracking_number)+" - "+i(new Date(x.created_at).toLocaleDateString()),1))),128))])])):v("",!0),(h=s.recent_received_deliveries)!=null&&h.length?(o(),u("div",Ye,[e[19]||(e[19]=t("h4",{class:"text-md font-medium text-gray-700"},"Received",-1)),t("ul",Ze,[(o(!0),u(te,null,se(s.recent_received_deliveries,x=>(o(),u("li",{key:x.id,class:"text-sm text-gray-600"},i(x.tracking_number)+" - "+i(new Date(x.created_at).toLocaleDateString()),1))),128))])])):v("",!0)])):v("",!0)]),t("div",et,[e[21]||(e[21]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Delivery Requests",-1)),t("div",tt,[b(ye,{requests:s.deliveryRequests,onView:S,onEdit:N,onCancel:D},null,8,["requests"])])]),t("div",st,[e[22]||(e[22]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Transaction History",-1)),t("div",rt,[b(ue,{transactions:s.transactions,onView:R,onViewRequest:$},null,8,["transactions"])])]),t("div",it,[b(B,{onClick:e[1]||(e[1]=x=>r.$inertia.visit(r.route("admin.customers.index")))},{default:l(()=>e[23]||(e[23]=[m(" Back to List ")])),_:1}),b(q,{onClick:c},{default:l(()=>e[24]||(e[24]=[m(" Edit Customer ")])),_:1})])])]),t("div",nt,[t("div",ot,[t("div",null,[e[29]||(e[29]=t("h3",{class:"font-semibold text-lg mb-2"},"Sender",-1)),t("div",null,[e[25]||(e[25]=t("span",{class:"font-medium"},"Name:",-1)),m(" "+i(((j=r.delivery.sender)==null?void 0:j.name)||((T=r.delivery.sender)==null?void 0:T.company_name)||"N/A"),1)]),t("div",null,[e[26]||(e[26]=t("span",{class:"font-medium"},"Contact:",-1)),m(" "+i(((E=r.delivery.sender)==null?void 0:E.mobile)||((L=r.delivery.sender)==null?void 0:L.phone)||"N/A"),1)]),t("div",null,[e[27]||(e[27]=t("span",{class:"font-medium"},"Email:",-1)),m(" "+i(((V=r.delivery.sender)==null?void 0:V.email)||"N/A"),1)]),t("div",null,[e[28]||(e[28]=t("span",{class:"font-medium"},"Address:",-1)),t("span",null,i([(F=r.delivery.sender)==null?void 0:F.building_number,(I=r.delivery.sender)==null?void 0:I.street,(z=r.delivery.sender)==null?void 0:z.barangay,(P=r.delivery.sender)==null?void 0:P.city,(O=r.delivery.sender)==null?void 0:O.province,(H=r.delivery.sender)==null?void 0:H.zip_code].filter(Boolean).join(", ")||"N/A"),1)])]),t("div",null,[e[34]||(e[34]=t("h3",{class:"font-semibold text-lg mb-2"},"Receiver",-1)),t("div",null,[e[30]||(e[30]=t("span",{class:"font-medium"},"Name:",-1)),m(" "+i(((W=r.delivery.receiver)==null?void 0:W.name)||((U=r.delivery.receiver)==null?void 0:U.company_name)||"N/A"),1)]),t("div",null,[e[31]||(e[31]=t("span",{class:"font-medium"},"Contact:",-1)),m(" "+i(((_=r.delivery.receiver)==null?void 0:_.mobile)||((G=r.delivery.receiver)==null?void 0:G.phone)||"N/A"),1)]),t("div",null,[e[32]||(e[32]=t("span",{class:"font-medium"},"Email:",-1)),m(" "+i(((J=r.delivery.receiver)==null?void 0:J.email)||"N/A"),1)]),t("div",null,[e[33]||(e[33]=t("span",{class:"font-medium"},"Address:",-1)),t("span",null,i([(K=r.delivery.receiver)==null?void 0:K.building_number,(M=r.delivery.receiver)==null?void 0:M.street,(Q=r.delivery.receiver)==null?void 0:Q.barangay,(X=r.delivery.receiver)==null?void 0:X.city,(Y=r.delivery.receiver)==null?void 0:Y.province,(Z=r.delivery.receiver)==null?void 0:Z.zip_code].filter(Boolean).join(", ")||"N/A"),1)])])])])])])]}),_:1}))}},bt=ie(lt,[["__scopeId","data-v-b312391c"]]);export{bt as default};
